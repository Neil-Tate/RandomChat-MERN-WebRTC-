{"version":3,"sources":["utils/storage.js","config/config.js","pages/HomePage/HomePage.js","pages/Signup/Signup.js","pages/Login/Login.js","pages/UserSign/UserSign.js","config/country.js","pages/GuestSign/GuestSign.js","components/ChatBox.js","components/OnTyping/OnTyping.js","components/ProfileBox/ProfileBox.js","components/FullScreenImage/FullScreenImage.js","components/SearchSettingBox/SearchSettingBox.js","components/ReportBox/ReportBox.js","components/ErrorModal.js","components/LoadingModal.js","pages/Chat/socket.js","pages/Chat/Emitter.js","pages/Chat/MediaDevice.js","pages/Chat/PeerConnection.js","components/CallWindow/CallWindow.js","components/CallModal/CallModal.js","pages/Chat/Chat.js","pages/AdminSign/AdminSign.js","pages/AdminManage/AdminManage.js","App/Routes.js","App/App.js","registerServiceWorker.js","index.js"],"names":["getFromStorage","key","valueStr","localStorage","getItem","JSON","parse","err","setInStorage","obj","console","error","setItem","stringify","RESTAPIUrl","FullPageIntroWithFixedTransparentNavbar","props","state","collapse","isWideEnough","restricted","onClick","bind","this","verifyAccount","fetch","method","headers","body","then","res","json","status","setState","color","fixed","dark","expand","scrolling","transparent","size","href","className","isOpen","navbar","right","to","disabled","src","overlay","icon","align","React","Component","SignUp","context","handleChange","handleChangeEmail","handleChangeConfirm","handleChangeName","handleDismiss","handleShow","signUpClicked","displayAlert","password","email","confPass","name","signInLoading","show","signupStatus","signUpMessage","length","test","String","toLowerCase","e","target","value","Alert","bsStyle","onDismiss","id","newUser","log","message","FormGroup","controlId","FormControl","type","placeholder","onChange","validationState","validateEmail","Feedback","getValidationState","HelpBlock","getValidationStateConf","Button","block","LogIn","logInClicked","logInLoading","signInError","logInStatus","success","token","stateChanger","loggedIn","loggedInName","logOutButtonStatus","UserSign","logOutClicked","logOutLoadingMessage","logOutLoading","newState","Grid","Row","Col","md","xs","Tabs","defaultActiveKey","Tab","eventKey","title","countries","GuestSign","handleChangeLocation","handleChangeAge","handleChangeGender","handleSubmit","userName","location","age","gender","loginLoading","event","preventDefault","history","push","NotificationManager","sm","lg","xl","onSubmit","label","group","validate","required","map","object","i","getValue","min","max","checked","htmlFor","outline","ChatBox","onEditorStateChange","editorState","handleChangeComplete","rgbColor","rgb","r","g","b","pickerColor","showEmojiPicker","toolbar_show","showColorPicker","messageText","EditorState","createEmpty","onAttachFile","setDomEditorRef","ref","domEditor","onSendClicked","draftToHtml","convertToRaw","getCurrentContent","focusEditor","document","onkeydown","setTimeout","toggleCustomInlineStyle","emoji","convertHtml","subHtml","substring","totalHtml","blocksFromHtml","htmlToDraft","contentBlocks","entityMap","contentState","ContentState","createFromBlockArray","editorStateChange","createWithContent","tempState","onTyping","onFocusEditor","KeyBindingUtil","hasCommandModifier","ctrlKey","getDefaultKeyBinding","findTargetUser","data","FormData","append","attachFile","files","fileContainer","fileName","video","config","audio","startCall","targetUser","left","signedInUser","profile_image","imageHash","alt","center","callWithVideo","path","mdiPhone","horizontal","vertical","rotate","mdiVideoOutline","caret","mdiDotsVertical","basic","onProfileModalShow","onSearchSettingModalShow","onReportModalShow","divider","logOut","lockable","toBottomHeight","dataSource","messages","downButton","style","width","position","toggleEmojiPicker","toggle_toolbar","wrapperClassName","toolbarClassName","editorClassName","keyBindingFn","keyBindingFunction","onFocus","toolbar","options","inline","inDropdown","image","uploadEnabled","inputAccept","fontSize","onChangeComplete","onApplyColorPicker","hideColorPicker","toggleColorPicker","accept","focusable","viewBox","aria-hidden","role","fill","d","bottom","opacity","zIndex","onSelect","addEmoji","emojiTooltip","closeEmojiPicker","OnTyping","imageURL","profileInfo","handleUploadImage","handleChangeProfile","ev","uploadInput","updateProfile","jwt_decode","user","Date","now","alert","_id","profileContainer","FullScreenImage","downloadPath","imageUrl","split","onShowImageFullScreen","download","class","Range","createSliderWithTooltip","Slider","SearchSettingBox","temp","searchSetting","ageMin","ageMax","searchContainer","handleChangeSearchSetting","defaultValue","tipFormatter","ReportBox","reportList","reportReason","inputTextActive","reportUser","reason","reportContainer","handleReport","handleChangeReportSetting","rows","handleOtherReason","ErrorModal","Header","Title","Body","glyph","errorMessage","LoadingModal","socket","io","connect","Emitter","events","args","forEach","fn","_","isFunction","listeners","index","findIndex","_fn","splice","MediaDevice","navigator","mediaDevices","getUserMedia","facingMode","height","ideal","stream","emit","catch","DOMException","on","len","arguments","track","enabled","set","getTracks","stop","PC_CONFIG","iceServers","url","credential","username","PeerConnection","friendID","pc","RTCPeerConnection","onicecandidate","candidate","ontrack","streams","mediaDevice","isCaller","addTrack","createOffer","start","isStarter","close","off","getDescription","createAnswer","desc","setLocalDescription","sdp","rtcSdp","RTCSessionDescription","setRemoteDescription","iceCandidate","RTCIceCandidate","addIceCandidate","getButtonClass","classnames","disable","CallWindow","peerSrc","localSrc","endCall","peerVideo","useRef","localVideo","useState","setVideo","setAudio","toggleVideo","setToggleVideo","useEffect","current","srcObject","toggle","toggleMediaDevice","deviceType","autoPlay","muted","CallModal","callFrom","rejectCall","contactUser","userAvatar","acceptWithVideo","App","signInModalShow","users","userChatData","selectedUserIndex","profileModalShow","searchModalShow","reportModalShow","blackUsersList","showImageFullScreen","confirmRemoveOldSession","callWindow","callModal","startCallHandler","endCallHandler","rejectCallHandler","initSocketConnection","createSocketRoom","setupSocketListeners","imgObj","getElementsByTagName","that","addEventListener","hasAttribute","attributes","getNamedItem","attachFileUrl","clear","axios","interceptors","request","use","loading","Promise","reject","response","findTargetQuery","prevTargetUser","date","text","from","onMessageRecieved","onReconnection","onClientDisconnected","onRemoveOldSession","onFindTargetUser","onSearchNone","onAvailableNone","onIgnore","onTargetUserTyping","onTargetDisconnect","onTargetLogout","onLogOut","messageData","messageDataText","str","array","matchAll","emojiHtml","querySelector","join","innerHTML","replace","renderAddCmp","renderHtml","avatar","pop","prevMessageData","element","scrollTop","scrollHeight","filter","u","unread","userInfo","turnOffNoExistTimeout","clearTimeout","turnOffExistTimeout","targetIndex","indexOf","targetUserID","createMessage","iamgeHash","onChangeProfile","changeProfile","closeSettingBox","isEmpty","onConfirmRemoveOldSession","AdminSign","adminSignLoading","handleChangePassword","AdminManage","userListShow","userProfileShow","adminProfileShow","toggleWrapper","updateUserProfile","getUserList","getAdminInfo","$button","$wrapper","classList","bpdy","admin","selectedUser","confirmPassword","summary","ip_address","report_number","isDeleted","handleChangeConfirmPassword","enableUser","for","report_reason","reporter_id","fakeAuth","PrivateRoute","component","rest","render","PrivateChatRoute","Routes","exact","HomePage","Chat","isLocalhost","Boolean","window","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","getElementById","URL","process","origin","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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ACA,SACA,QACA,SACA,UACA,UACA,QACA,SACA,UACA,YACA,SACA,gBACA,SACA,QACA,WACA,UACA,UACA,QACA,YACA,OACA,OACA,UACA,SACA,QACA,UACA,QACA,SACA,aACA,QACA,WACA,SACA,SACA,aACA,OACA,SACA,UACA,UACA,UACA,QACA,gBACA,YACA,aACA,oBACA,aACA,SACA,WACA,WACA,OACA,QACA,mBACA,aACA,YACA,SACA,aACA,UACA,SACA,WACA,aACA,UACA,aACA,kBACA,UACA,QACA,QACA,cACA,cACA,YACA,QACA,UACA,cACA,SACA,OACA,WACA,QACA,YACA,SACA,mBACA,WACA,OACA,cACA,SACA,WACA,QACA,UACA,SACA,SACA,wBACA,cACA,mCACA,QACA,aACA,wBACA,eACA,UACA,SACA,aACA,eACA,YACA,WACA,WACA,kBACA,UACA,eACA,cACA,cACA,QACA,YACA,QACA,WACA,YACA,SACA,cACA,QACA,SACA,aACA,WACA,WACA,cACA,OACA,QACA,sBACA,UACA,SACA,eACA,SACA,SACA,UACA,6BACA,sBACA,iCACA,UACA,aACA,UACA,0BACA,YACA,UACA,QACA,SACA,YCzDWC,G,yDA7Hb,WAAY/G,EAAOuC,GAAU,IAAD,8BAC1B,cAAMvC,EAAOuC,IACRI,iBAAmB,EAAKA,iBAAiBrC,KAAtB,gBACxB,EAAK0G,qBAAuB,EAAKA,qBAAqB1G,KAA1B,gBAC5B,EAAK2G,gBAAkB,EAAKA,gBAAgB3G,KAArB,gBACvB,EAAK4G,mBAAqB,EAAKA,mBAAmB5G,KAAxB,gBAC1B,EAAK6G,aAAe,EAAKA,aAAa7G,KAAlB,gBAEpB,EAAKL,MAAQ,CACXmH,SAAU,GACVC,SAAU,SACVC,IAAK,GACLC,OAAQ,OACRC,cAAc,GAbU,E,6DAiBX5D,GACfrD,KAAKU,SAAS,CAAEmG,SAAUxD,EAAEC,OAAOC,U,2CAGhBF,GACnBrD,KAAKU,SAAS,CAAEoG,SAAUzD,EAAEC,OAAOC,U,sCAGrBA,GACdvD,KAAKU,SAAS,CAAEqG,IAAKxD,M,yCAGJF,GACjBrD,KAAKU,SAAS,CAAEsG,OAAQ3D,EAAEC,OAAOC,U,mCAGtB2D,GAAQ,IAAD,OAClBA,EAAMC,iBADY,MAE0BnH,KAAKN,MAAzCmH,EAFU,EAEVA,SAAUC,EAFA,EAEAA,SAAUC,EAFV,EAEUA,IAAKC,EAFf,EAEeA,OAEjChH,KAAKU,SAAU,CACbuG,cAAc,IAGhB/G,MAAMX,EAAa,oBAAqB,CACtCY,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMvB,KAAKQ,UAAU,CACnBuH,WACAC,WACAC,MACAC,aAED1G,MAAK,SAAAC,GAAG,OAAGA,EAAIC,UACfF,MAAK,SAAAE,GACDA,EAAKC,QACNxB,EAAa,eAAgB,CAACkG,MAAM3E,EAAK2E,QACzC,EAAK1F,MAAM2H,QAAQC,KAAK,UAExBC,sBAAoBlI,MAApB,UACKoB,EAAKsD,e,+BAMhB,OACI,kBAAC,IAAD,KACE,kBAAC,wBAAD,MACA,kBAAC,IAAD,CAAQyD,GAAG,KAAKvB,GAAG,IAAIwB,GAAG,IAAIC,GAAG,IAAItG,UAAU,+BAC7C,0BAAMuG,SAAU1H,KAAK4G,cACnB,kBAAC,IAAD,KACA,yBAAKzF,UAAU,0BACb,wBAAIA,UAAU,uBAAsB,6CAEtC,kBAAC,IAAD,CAAaA,UAAU,QAErB,kBAAC,IAAD,CAAUwG,MAAM,YAAYC,OAAK,EAAC1D,KAAK,OAAOE,SAAUpE,KAAKoC,iBAAkByF,UAAQ,EAACzI,MAAM,QAAQ8F,QAAQ,QAAQ4C,UAAQ,IAE9H,4BAAQ3G,UAAU,gCAAgCwC,GAAG,WAAWf,KAAK,WAAWW,MAAOvD,KAAKN,MAAMoH,SAAU1C,SAAUpE,KAAKyG,sBACzH,wDAEEF,EAAUwB,KAAI,SAACC,EAAQC,GACrB,OAAO,4BAAQ1E,MAAOyE,EAAQtJ,IAAKuJ,GAAID,OAK7C,2BAAO7G,UAAU,cAAjB,YACA,kBAAC,IAAD,CAAiBwC,GAAG,MAAMf,KAAK,MAAMsF,SAAUlI,KAAK0G,gBAAiByB,IAAK,GAAIC,IAAK,GAAI7E,MAAOvD,KAAKN,MAAMqH,IAAK5F,UAAU,SAExH,2BAAOA,UAAU,cAAjB,eACA,yBAAKA,UAAU,eACb,yBAAKA,UAAU,SACb,2BAAOwC,GAAG,UAAUf,KAAK,QAAQsB,KAAK,QAAQX,MAAM,OAAOa,SAAUpE,KAAK2G,mBAAoB0B,QAA+B,SAAtBrI,KAAKN,MAAMsH,SAClH,2BAAOsB,QAAQ,UAAUnH,UAAU,eAAnC,SAGF,yBAAKA,UAAU,SACb,2BAAOwC,GAAG,UAAUf,KAAK,QAAQsB,KAAK,QAAQX,MAAM,SAASa,SAAUpE,KAAK2G,mBAAoB0B,QAA+B,WAAtBrI,KAAKN,MAAMsH,SACpH,2BAAQsB,QAAQ,UAAUnH,UAAU,eAApC,YAIJ,yBAAKA,UAAU,yBACb,kBAAC,IAAD,CACE+C,KAAK,SACL/C,UAAU,uBACVoH,SAAO,EAAC5H,MAAM,QAEXX,KAAKN,MAAMqF,aAAe,oBAAsB,gBAKzD,kBAAC,IAAD,CAAgB5D,UAAU,2B,GAnHhBU,IAAMC,Y,8LC0BT0G,I,yDACnB,WAAY/I,GAAQ,IAAD,8BACjB,cAAMA,IAqGRgJ,oBAAuB,SAACC,GACtB,EAAKhI,SAAS,CACZgI,iBAxGe,EAqPnBC,qBAAuB,SAAChI,GACtB,IAAMiI,EAAS,OAAD,OAAQjI,EAAMkI,IAAIC,EAAlB,aAAwBnI,EAAMkI,IAAIE,EAAlC,aAAwCpI,EAAMkI,IAAIG,EAAlD,KACZ,EAAKtI,SAAS,CAACuI,YAAaL,KArP9B,EAAKlJ,MAAQ,CACXwJ,iBAAiB,EACjBC,cAAe,EACfC,iBAAiB,EACjBH,YAAa,aACbI,YAAa,GACbX,YAAaY,cAAYC,eAG3B,EAAKC,aAAe,EAAKA,aAAazJ,KAAlB,gBACpB,EAAK0J,gBAAkB,SAAAC,GAAG,OAAI,EAAKC,UAAYD,GAZ9B,E,yGAyBjB1J,KAAKP,MAAMmK,cAAcC,IAAYC,uBAAa9J,KAAKN,MAAMgJ,YAAYqB,uBACzE/J,KAAKU,SAAS,CAACgI,YAAYY,cAAYC,gBAEvCvJ,KAAK2J,UAAUK,cAEfC,SAASC,UAAY,SAAU7G,GAE7B,OADAA,EAAE8D,kBACK,GAGTgD,WACE,WACE,IAAMvE,EAAWwE,mCAAwBpK,KAAKN,MAAMgJ,YAAa,QAAS1I,KAAKN,MAAMuJ,aACrFjJ,KAAKU,SAAS,CACZgI,YAAa9C,IAGfqE,SAASC,UAAY,SAAU7G,GAC7B,OAAO,IAGVtD,KAAKC,MACN,O,2CAIiBqD,GACnBrD,KAAKU,SAAS,CAAE2I,YAAahG,EAAEC,OAAOC,U,wCAQtBF,GACF,UAAVA,EAAE3E,KACJsB,KAAK4J,kB,0CAKP5J,KAAKU,SAAS,CACZwI,iBAAkBlJ,KAAKN,MAAMwJ,oB,+BAIxBmB,GAAO,IAaN3B,EAAgB1I,KAAKN,MAArBgJ,YACF4B,EAAcT,IAAYC,uBAAapB,EAAYqB,sBACnDQ,EAAUD,EAAYE,UAAU,EAAGF,EAAYrH,OAAO,GAEtDwH,EAAS,UAAMF,EAAN,aAAkBF,EAAM1G,GAAxB,UAET+G,EAAiBC,IAAYF,GAC3BG,EAA6BF,EAA7BE,cAAeC,EAAcH,EAAdG,UACjBC,EAAeC,eAAaC,qBAAqBJ,EAAeC,GAChEI,EAAoB3B,cAAY4B,kBAAkBJ,GACxD9K,KAAKU,SAAS,CAACgI,YAAauC,M,yCAI5BjL,KAAKU,SAAS,CAACwI,iBAAiB,M,sCAUhCe,SAASC,UAAY,SAAU7G,GAE7B,OADAA,EAAE8D,kBACK,GAGThI,QAAQ0E,IAAI,sBAEZsG,WACE,WAAY,IAAD,OAEHgB,EAAYf,mCAAwBpK,KAAKN,MAAMgJ,YAAa,QAAS,cAC3E1I,KAAKU,SAAS,CACZgI,YAAayC,IAEZ,WACD,IAAMvF,EAAWwE,mCAAwB,EAAK1K,MAAMgJ,YAAa,QAAS,EAAKhJ,MAAMuJ,aACrF,EAAKvI,SAAS,CACZgI,YAAa9C,EACbwD,iBAAiB,IAInBa,SAASC,UAAY,SAAU7G,GAC7B,OAAO,OAIZtD,KAAKC,MACN,O,uCAMFA,KAAKU,SAAS,CAACyI,cAAenJ,KAAKN,MAAMyJ,iB,yCAGxBjC,GAUjB,OAPAlH,KAAKP,MAAM2L,WAGQ,cAAdlE,EAAMxI,KACTsB,KAAKqL,gBAGHC,iBAAeC,mBAAmBrE,IAAUA,EAAMsE,SAAyB,UAAdtE,EAAMxI,KAIrD,UAAdwI,EAAMxI,IAHD+M,+BAAqBvE,QAI5BlH,KAAK4J,kB,uCAOP5J,KAAKP,MAAMiM,mB,mCAGArI,GAAI,IAAD,OACdA,EAAE8D,iBAGF,IAAMwE,EAAO,IAAIC,SACjBD,EAAKE,OAAO,aAAc7L,KAAK8L,WAAWC,MAAM,IAChD7L,MAAM,GAAD,OAAIX,EAAJ,oBAAkC,CACrCY,OAAQ,OACRE,KAAMsL,IAEPrL,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAE,GACJ,GAAGA,EAAKC,OAAQ,CAAC,IAGX8J,EAFI7B,EAAgB,EAAKhJ,MAArBgJ,YACF4B,EAAcT,IAAYC,uBAAapB,EAAYqB,sBAKvDQ,EAAUD,EAAYE,UAAU,EAAGF,EAAYrH,QACjD,IAAM+I,EAAa,oBAAgBzM,EAAhB,2BAA6CiB,EAAKyL,SAAlD,kBAAoE1M,EAApE,2BAAiGiB,EAAKyL,SAAtG,MACbxB,EAAS,UAAMF,GAAN,OAAgByB,GAEzBtB,EAAiBC,IAAYF,GAC3BG,EAA6BF,EAA7BE,cAAeC,EAAcH,EAAdG,UACjBC,EAAeC,eAAaC,qBAAqBJ,EAAeC,GAChEI,EAAoB3B,cAAY4B,kBAAkBJ,GACxD,EAAKpK,SAAS,CAACgI,YAAauC,IAG5B,EAAKtB,UAAUK,cAGf,EAAK8B,WAAWvI,MAAM,S,qCAM1BpE,QAAQ0E,IAAI,wB,0CAIZ7D,KAAKU,SAAS,CAAC0I,iBAAkBpJ,KAAKN,MAAM0J,oB,wCAG5CpJ,KAAKU,SAAS,CAAC0I,iBAAiB,M,2CAKhCpJ,KAAK2J,UAAUK,gB,oCA4BFkC,GACb,IAAMC,EAAS,CAAEC,OAAO,EAAMF,SAE9BlM,KAAKP,MAAM4M,WAAU,EAAMrM,KAAKP,MAAM6M,WAAW3I,GAAIwI,K,+BAG7C,IAAD,OACP,OACE,6BACI,6BACE,kBAAC,SAAD,CACEI,KACE,6BACE,kBAAC,SAAD,CACE9K,IAAG,UAAKlC,EAAL,2BAAkCS,KAAKP,MAAM+M,aAAaC,cAA1D,YAA2EzM,KAAKP,MAAMiN,WACzFC,IAAK,OACL1L,KAAK,QACLiD,KAAK,oBAEP,yBAAK/C,UAAU,aACb,uBAAGA,UAAU,wBAAwBnB,KAAKP,MAAM+M,aAAa3F,UAC7D,uBAAG1F,UAAU,yBAAyBnB,KAAKP,MAAM+M,aAAaxF,OAA9D,MAAyEhH,KAAKP,MAAM+M,aAAazF,IAAjG,IAAuG/G,KAAKP,MAAM+M,aAAa1F,YAIrI8F,OACE,6BACE,kBAAC,IAAD,CACEzL,UAAU,uBACVR,MAAM,UACNb,QAASE,KAAK0L,eAAe3L,KAAKC,OAElC,yBAAK2M,IAAI,2CAA2CxL,UAAU,SAASM,IAAG,UAAKlC,EAAL,8BAMhF+B,MACE,6BACE,yBAAKH,UAAU,gBACb,kBAAC,IAAD,CACEA,UAAU,mBACVR,MAAM,UACNb,QAASE,KAAK6M,cAAc9M,KAAKC,MAAM,GACvCwB,SAA6C,oBAA5BxB,KAAKP,MAAM6M,WAAW3I,IAEvC,kBAAC,IAAD,CAAMmJ,KAAMC,IACV9L,KAAM,EACN+L,YAAU,EACVC,UAAQ,EACRC,OAAQ,OAIZ,kBAAC,IAAD,CACE/L,UAAU,mBACVR,MAAM,UACNb,QAASE,KAAK6M,cAAc9M,KAAKC,MAAM,GACvCwB,SAA6C,oBAA5BxB,KAAKP,MAAM6M,WAAW3I,IAEvC,kBAAC,IAAD,CAAMmJ,KAAMK,IACVlM,KAAM,EACN+L,YAAU,EACVC,UAAQ,EACRC,OAAQ,OAIZ,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAmBE,OAAK,EAACzM,MAAM,UAAUQ,UAAU,cACjD,kBAAC,IAAD,CAAM2L,KAAMO,IACVpM,KAAM,EACN+L,YAAU,EACVC,UAAQ,KAGZ,kBAAC,IAAD,CAAiBK,OAAK,GACpB,kBAAC,IAAD,CACExN,QAAS,WAAM,EAAKL,MAAM8N,oBAAmB,KAD/C,gBAKA,kBAAC,IAAD,CACEzN,QAAS,WAAM,EAAKL,MAAM+N,0BAAyB,KADrD,kBAMA,kBAAC,IAAD,CACE1N,QAAS,WAAM,EAAKL,MAAMgO,mBAAkB,IAC5CjM,SAA6C,oBAA5BxB,KAAKP,MAAM6M,WAAW3I,IAFzC,UAQA,kBAAC,IAAD,CAAiB+J,SAAO,IAExB,kBAAC,IAAD,CACE5N,QAASE,KAAKP,MAAMkO,QADtB,iBAaX3N,KAAKP,MAAM6M,WAAW3I,GACrB,6BACE,kBAAC,cAAD,CACExC,UAAU,eACVyM,UAAU,EACVC,eAAgB,MAChBC,WAAY9N,KAAKP,MAAM6M,WAAWyB,SAClCC,YAAY,IAEd,kBAAC,IAAD,CAAW7M,UAAU,qBACnB,kBAAC,IAAD,CAAK8M,MAAO,CAACC,MAAM,OAAQC,SAAS,aAQhC,uBACEhN,UAAU,wCACVrB,QAASE,KAAKoO,kBAAkBrO,KAAKC,QAQvC,kBAAC,IAAD,CACE2B,KAAK,UACLV,KAAK,KACLnB,QAASE,KAAKqO,eAAetO,KAAKC,MAClCmB,UAAU,mCAGZ,kBAAC,SAAD,CACEuI,IAAK1J,KAAKyJ,gBACVf,YAAa1I,KAAKN,MAAMgJ,YACxBvE,YAAY,uBACZmK,iBAAiB,eACjBC,iBAAkBvO,KAAKN,MAAMyJ,aAAe,GAAK,iBACjDqF,gBAAgB,cAChBC,aAAczO,KAAK0O,mBAAmB3O,KAAKC,MAC3CyI,oBAAqBzI,KAAKyI,oBAC1BkG,QAAS3O,KAAKqL,cAActL,KAAKC,MAEjC4O,QAAS,CACPC,QAAS,CAAC,SAAU,cAAe,WAAY,cAC/CC,OAAQ,CACJC,YAAY,EACZF,QAAS,CAAC,OAAQ,SAAU,cAEhCG,MAAO,CAAEC,eAAe,GACxBC,YAAa,qDACbC,SAAU,CACRN,QAAS,CAAC,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,QAK7C7O,KAAKN,MAAM0J,gBACZ,6BACE,kBAAC,gBAAD,CACEzI,MAAQX,KAAKN,MAAMuJ,YACnBmG,iBAAmBpP,KAAK2I,qBAAqB5I,KAAKC,QAEpD,4BAAQmB,UAAU,gBAAgBrB,QAASE,KAAKqP,mBAAmBtP,KAAKC,OAAxE,SACA,4BAAQmB,UAAU,eAAerB,QAASE,KAAKsP,gBAAgBvP,KAAKC,OAApE,UACA,yBAAKmB,UAAU,oBAAoBrB,QAASE,KAAKsP,gBAAgBvP,KAAKC,SAGxE,KAGCA,KAAKN,MAAMyJ,aACV,4BAAQhI,UAAU,sBAAsBrB,QAASE,KAAKuP,kBAAkBxP,KAAKC,OAC3E,uBAAGmB,UAAU,wBAEf,KAKF,2BAAOmH,QAAQ,aAAanH,UAAU,eACpC,uBACEA,UAAU,mCAId,2BACIuI,IAAK,SAACA,GAAU,EAAKoC,WAAapC,GAClCtF,SAAUpE,KAAKwJ,aAAazJ,KAAKC,MACjCkE,KAAK,OACLP,GAAG,aACH6L,OAAO,sBAGX,kBAAC,IAAW7K,OAAZ,KACE,yBACEnD,UAAWxB,KAAKN,MAAM2J,YACtBlI,UAAU,aACVrB,QAASE,KAAK4J,cAAc7J,KAAKC,OAIjC,yBAAKmB,UAAU,OAAOsO,UAAU,QAAQC,QAAQ,YAAYC,cAAY,OAAOC,KAAK,gBAAe,0BAAMC,KAAK,OAAOC,EAAE,0CAA+C,0BAAMD,KAAK,OAAOC,EAAE,wBAQtM,yBAAK3O,UAAU,qBACb,yBAAKA,UAAU,aACb,wCAAcnB,KAAKP,MAAM+M,aAAa3F,SAAtC,KAAqD,8BAEvD,yBAAK1F,UAAU,YACb,uBACEA,UAAU,gBACVrB,QAASE,KAAK0L,eAAe3L,KAAKC,OAFpC,uCAWR,kBAAC,IAAD,CACEiO,MAAOjO,KAAKN,MAAMwJ,gBAAiB,CAAEiF,SAAU,WAAY4B,OAAQ,OAAQzO,MAAO,OAAQ0O,QAAS,KAAQ,CAAE7B,SAAU,WAAY4B,OAAQ,OAAQzO,MAAO,OAAQ0O,QAAS,IAAKC,OAAO,MACvLC,SAAUlQ,KAAKmQ,SAASpQ,KAAKC,MAC7BoQ,cAAc,IAGhBpQ,KAAKN,MAAMwJ,gBACX,6BACE,yBAAK/H,UAAU,aAAarB,QAASE,KAAKqQ,iBAAiBtQ,KAAKC,SAEjE,U,GAtf0B8B,cCvBtBwO,I,OAZE,WACb,OACI,yBAAKnP,UAAU,4CACX,yBAAKwC,GAAG,WACJ,yBAAKA,GAAG,YAAYxC,UAAU,YAC9B,yBAAKwC,GAAG,YAAYxC,UAAU,YAC9B,yBAAKwC,GAAG,YAAYxC,UAAU,gB,qBCiBzBqH,I,yDACjB,WAAY/I,GAAQ,IAAD,8BACf,cAAMA,IAEDC,MAAQ,CACT6Q,SAAS,GAAD,OAAKhR,EAAL,2BAAkC,EAAKE,MAAM+Q,YAAY/D,eACjE5F,SAAU,EAAKpH,MAAM+Q,YAAY3J,SACjCE,IAAK,EAAKtH,MAAM+Q,YAAYzJ,IAC5BD,SAAU,EAAKrH,MAAM+Q,YAAY1J,SACjCE,OAAQ,EAAKvH,MAAM+Q,YAAYxJ,OAC/B0F,UAAW,EAAKjN,MAAMiN,WAG1B,EAAK+D,kBAAoB,EAAKA,kBAAkB1Q,KAAvB,gBACzB,EAAK2Q,oBAAsB,EAAKA,oBAAoB3Q,KAAzB,gBAbZ,E,wEAgBfC,KAAKU,SAAS,CACV6P,SAAS,GAAD,OAAKhR,EAAL,2BAAkCS,KAAKP,MAAM+Q,YAAY/D,mB,wCAGvDkE,GAAK,IAAD,OAClBA,EAAGxJ,iBAEH,IAAMwE,EAAO,IAAIC,SACjBD,EAAKE,OAAO,OAAQ7L,KAAK4Q,YAAY7E,MAAM,IAC3CJ,EAAKE,OAAO,WAAY7L,KAAKiM,SAAS1I,OAEtCrD,MAAM,GAAD,OAAIX,EAAJ,sBAAoC,CACvCY,OAAQ,OACRE,KAAMsL,IAEPrL,MAAK,SAAAC,GAAG,OAAGA,EAAIC,UACfF,MAAK,SAAAE,GACF,GAAGA,EAAKC,OAAQ,CACZxB,EAAa,eAAgB,CAACkG,MAAM3E,EAAK2E,QACzC,EAAK1F,MAAMoR,gBAIX,IACIrE,EADgBsE,KAAWtQ,EAAK2E,OACH4L,KAEjC,EAAKrQ,SAAS,CACV6P,SAAS,GAAD,OAAKhR,EAAL,2BAAkCiN,EAAaC,eACvDC,UAAWsE,KAAKC,aAGpBC,MAAM,qB,0CAYE7N,GAAI,IAAD,OACnBA,EAAE8D,iBADiB,MAEyBnH,KAAKN,MAAzCmH,EAFW,EAEXA,SAAUC,EAFC,EAEDA,SAAUC,EAFT,EAESA,IAAKC,EAFd,EAEcA,OACzBmK,EAAQnR,KAAKP,MAAM+Q,YAAnBW,IACRnR,KAAKU,SAAU,CACXuG,cAAc,IAGlB/G,MAAMX,EAAa,sBAAuB,CAC1CY,OAAQ,OACRC,QAAS,CACL,eAAgB,oBAEpBC,KAAMvB,KAAKQ,UAAU,CACjB6R,MACAtK,WACAC,WACAC,MACAC,aAED1G,MAAK,SAAAC,GAAG,OAAGA,EAAIC,UACjBF,MAAK,SAAAE,GACCA,EAAKC,QACJxB,EAAa,eAAgB,CAACkG,MAAM3E,EAAK2E,QACzC,EAAK1F,MAAMoR,gBACX,EAAKpR,MAAM8N,oBAAmB,GAC9BjG,sBAAoBpC,QAApB,UACO1E,EAAKsD,WAGZwD,sBAAoBlI,MAApB,UACOoB,EAAKsD,e,2CAOpB9D,KAAKP,MAAM8N,oBAAmB,K,uCAGjBlK,GACbrD,KAAKU,SAAS,CAAEmG,SAAUxD,EAAEC,OAAOC,U,2CAGlBF,GACjBrD,KAAKU,SAAS,CAAEoG,SAAUzD,EAAEC,OAAOC,U,sCAGvBA,GACZvD,KAAKU,SAAS,CAAEqG,IAAKxD,M,yCAGNF,GACfrD,KAAKU,SAAS,CAAEsG,OAAQ3D,EAAEC,OAAOC,U,+BAG3B,IAAD,OACL,OACI,6BACI,kBAAC,wBAAD,MACA,kBAAC,IAAD,CAAQpC,UAAS,UAAKnB,KAAKP,MAAM2R,mBAC7B,kBAAC,IAAD,KACI,kBAAC,IAAD,CAActR,QAASE,KAAKuN,mBAAmBxN,KAAKC,QACpD,kBAAC,IAAD,CAAcmB,UAAU,eAEpB,kBAAC,IAAD,KAEI,0BAAMuG,SAAU1H,KAAK0Q,qBACjB,yBAAKvP,UAAU,iBACX,yBACIM,IAAG,UAAKzB,KAAKN,MAAM6Q,SAAhB,YAA4BvQ,KAAKN,MAAMgN,WAC1CvL,UAAU,YACVwL,IAAI,gBAER,yBAAKxL,UAAU,iBACX,2BAAOmH,QAAQ,gBACf,2BACIoB,IAAK,SAACA,GAAU,EAAKkH,YAAclH,GACnCtF,SAAUpE,KAAKyQ,kBAAkB1Q,KAAKC,MACtCkE,KAAK,OACLP,GAAG,cACH6L,OAAO,sBAEX,2BAAO9F,IAAK,SAACA,GAAU,EAAKuC,SAAWvC,GACnCnG,MAAOvD,KAAKP,MAAM+Q,YAAY/D,cAC9BvI,KAAK,YAGb,wBAAI/C,UAAU,YAAYnB,KAAKP,MAAM+Q,YAAY3J,UACjD,wBAAI1F,UAAU,YAAd,UACQnB,KAAKP,MAAM+Q,YAAYxJ,OAD/B,aAC0ChH,KAAKP,MAAM+Q,YAAYzJ,IADjE,aACyE/G,KAAKP,MAAM+Q,YAAY1J,WAEhG,8BAEJ,6BAEI,kBAAC,IAAD,CACIa,MAAM,YACN+B,IAAK,SAACA,GAAU,EAAK7C,SAAW6C,GAChC9B,OAAK,EAAC1D,KAAK,OACXE,SAAUpE,KAAKoC,iBAAiBrC,KAAKC,MACrC6H,UAAQ,EAACzI,MAAM,QACf8F,QAAQ,QACR3B,MAAOvD,KAAKN,MAAMmH,SAClBiB,UAAQ,EACRtG,UAAQ,IAGZ,2BAAOL,UAAU,cAAjB,iBACA,4BACIA,UAAU,gCACVwC,GAAG,WACHf,KAAK,WACLW,MAAOvD,KAAKN,MAAMoH,SAClB1C,SAAUpE,KAAKyG,qBAAqB1G,KAAKC,OAEzC,wDAEIuG,EAAUwB,KAAI,SAACC,EAAQC,GACvB,OAAO,4BAAQ1E,MAAOyE,EAAQtJ,IAAKuJ,GAAID,OAK/C,2BAAO7G,UAAU,cAAjB,YACA,kBAAC,IAAD,CACIwC,GAAG,MACHf,KAAK,MACLsF,SAAUlI,KAAK0G,gBAAgB3G,KAAKC,MACpCmI,IAAK,GACLC,IAAK,GACL7E,MAAOvD,KAAKN,MAAMqH,IAClB5F,UAAU,SAGd,2BAAOA,UAAU,cAAjB,eACA,yBAAKA,UAAU,eACX,yBAAKA,UAAU,SACX,2BAAOwC,GAAG,UAAUf,KAAK,QAAQsB,KAAK,QAAQX,MAAM,OAAOa,SAAUpE,KAAK2G,mBAAmB5G,KAAKC,MAAOqI,QAA+B,SAAtBrI,KAAKN,MAAMsH,OAAmBxF,UAAQ,IACxJ,2BAAO8G,QAAQ,UAAUnH,UAAU,eAAnC,SAGJ,yBAAKA,UAAU,SACX,2BAAOwC,GAAG,UAAUf,KAAK,QAAQsB,KAAK,QAAQX,MAAM,SAASa,SAAUpE,KAAK2G,mBAAmB5G,KAAKC,MAAOqI,QAA+B,WAAtBrI,KAAKN,MAAMsH,OAAqBxF,UAAQ,IAC5J,2BAAQ8G,QAAQ,UAAUnH,UAAU,eAApC,YAIR,yBAAKA,UAAU,yBACf,kBAAC,IAAD,CACI+C,KAAK,SACLvD,MAAM,UACNM,KAAK,MAHT,SAQA,kBAAC,IAAD,CAAQN,MAAM,OAAOM,KAAK,KACtBnB,QAASE,KAAKuN,mBAAmBxN,KAAKC,OAD1C,qB,GA1NH8B,cCrBhBuP,I,gEACjB,WAAY5R,GAAQ,IAAD,sBAEf,IACI6R,GAFJ,cAAM7R,IACcA,MAAM8R,SACEC,MAAM,WAAW,GAH9B,OAIf,EAAK9R,MAAQ,CACT4R,aAAcA,GALH,E,iHAYftR,KAAKP,MAAMgS,0B,+BAGX,OAEI,6BACI,yBAAKtQ,UAAU,cACX,0BACIrB,QAASE,KAAKyR,sBAAsB1R,KAAKC,MACzCmB,UAAU,aAFd,KAMA,uBAAGD,KAAMlB,KAAKP,MAAM8R,SAAUG,SAAS,aAAavQ,UAAU,gBAC1D,uBAAGwQ,MAAM,oBAEb,yBAAKlQ,IAAKzB,KAAKP,MAAM8R,SAAU5E,IAAI,W,GA7BV7K,c,UCYvC8P,I,QAAQC,EADkBC,KAAOD,yBACDC,KAAOF,QAExBG,G,kDACjB,WAAYtS,GAAQ,IAAD,sBAEf,IAAMuS,GADN,cAAMvS,IACYA,MAAMwS,cAFT,OAGf,EAAKvS,MAAQ,CACTuS,cAAeD,GAGnB,EAAKrL,mBAAqB,EAAKA,mBAAmB5G,KAAxB,gBAPX,E,sEAUOsD,GACtBA,EAAE8D,mB,yCAIa9D,GACf,IAAI4O,EAAgBjS,KAAKN,MAAMuS,cAC/BA,EAAcjL,OAAS3D,EAAEC,OAAOC,MAChCvD,KAAKU,SAAS,CAAEuR,oB,2CAGC5O,GACjB,IAAI4O,EAAgBjS,KAAKN,MAAMuS,cAC/BA,EAAcnL,SAAWzD,EAAEC,OAAOC,MAClCvD,KAAKU,SAAS,CAAEuR,oB,sCAGJ1O,GACZ,IAAI0O,EAAgBjS,KAAKN,MAAMuS,cAC/BA,EAAcC,OAAS3O,EAAM,GAC7B0O,EAAcE,OAAS5O,EAAM,GAC7BvD,KAAKU,SAAS,CAAEuR,oB,iDAQhBjS,KAAKP,MAAM+N,0BAAyB,K,+BAIpC,OACI,6BACI,kBAAC,IAAD,CAAQrM,UAAS,UAAOnB,KAAKP,MAAM2S,kBAC/B,kBAAC,IAAD,KACI,kBAAC,IAAD,CAActS,QAAYE,KAAKwN,yBAAyBzN,KAAKC,QAE7D,kBAAC,IAAD,CAAcmB,UAAY,eACtB,kBAAC,IAAD,CAAcA,UAAY,sBACtB,4DAGJ,kBAAC,IAAD,KACI,0BAAMuG,SAAa1H,KAAKqS,0BAA0BtS,KAAKC,OACnD,6BACI,yBAAKmB,UAAY,cACb,2BAAOA,UAAY,cAAnB,cACA,4BAAQA,UAAY,gCAAgCwC,GAAK,YAAYf,KAAO,YAAYW,MAAUvD,KAAKP,MAAMwS,cAAcnL,SAAW1C,SAAapE,KAAKyG,qBAAqB1G,KAAKC,OAC9K,4BAAQuD,MAAQ,IAAhB,SACCgD,EAAUwB,KAAI,SAACC,EAAQC,GAEhB,OAAO,4BAAQ1E,MAAUyE,EAAStJ,IAAQuJ,GAAnC,IAA2CD,EAA3C,UAMvB,yBAAK7G,UAAY,cACb,2BAAOA,UAAY,cAAnB,eACA,kBAACyQ,GAAD,CAAOzJ,IAAQ,GAAKC,IAAQ,GAAKkK,aAAiB,CAACtS,KAAKP,MAAMwS,cAAcC,OAAQlS,KAAKP,MAAMwS,cAAcE,QAASI,aAAiB,SAAAhP,GAAK,gBAAOA,IAAUa,SAAapE,KAAK0G,gBAAgB3G,KAAKC,SAGxM,yBAAKmB,UAAY,cACb,2BAAOA,UAAY,cAAnB,YACA,yBAAKA,UAAY,eACb,yBAAKA,UAAY,SACb,2BAAOwC,GAAK,SACRf,KAAO,SACPsB,KAAO,QACPX,MAAQ,GACRa,SAAapE,KAAK2G,mBAAmB5G,KAAKC,MAC1CqI,QAAgD,KAApCrI,KAAKN,MAAMuS,cAAcjL,SAGzC,2BAAOsB,QAAU,SAASnH,UAAY,eAAtC,UAGJ,yBAAKA,UAAY,SACb,2BAAOwC,GAAK,SACRf,KAAO,SACPsB,KAAO,QACPX,MAAQ,OACRa,SAAapE,KAAK2G,mBAAmB5G,KAAKC,MAC1CqI,QAAgD,SAApCrI,KAAKN,MAAMuS,cAAcjL,SAEzC,2BAAOsB,QAAU,SAASnH,UAAY,eAAtC,WAGJ,yBAAKA,UAAY,SACb,2BAAOwC,GAAK,SAASf,KAAO,SACxBsB,KAAO,QACPX,MAAQ,SACRa,SAAapE,KAAK2G,mBAAmB5G,KAAKC,MAC1CqI,QAAgD,WAApCrI,KAAKN,MAAMuS,cAAcjL,SAEzC,2BAAOsB,QAAU,SAASnH,UAAY,eAAtC,eAKZ,yBAAKA,UAAY,yBAEb,kBAAC,IAAD,CACIR,MAAQ,OACRM,KAAO,KACPnB,QAAYE,KAAKwN,yBAAyBzN,KAAKC,OAHnD,qB,GAnHE8B,aCFzB0Q,I,yDACjB,WAAY/S,GAAQ,IAAD,8BACf,cAAMA,IACDC,MAAQ,CACT+S,WAAY,CAAC,OAAQ,kCAAmC,kBAAmB,oBAAqB,SAChGC,aAAc,GACdC,iBAAiB,GALN,E,yDAUNtP,GAET,GADAA,EAAE8D,iBACsC,oBAA7BnH,KAAKP,MAAM6M,WAAW6E,IAI7B,OAHA7J,sBAAoBlI,MAChB,8BAEG,EAEXc,MAAMX,EAAa,cAAe,CAC9BY,OAAQ,OACRC,QAAS,CACL,eAAgB,oBAEpBC,KAAMvB,KAAKQ,UAAU,CACjBsT,WAAY5S,KAAKP,MAAM+M,aACvBF,WAAYtM,KAAKP,MAAM6M,WACvBuG,OAAQ7S,KAAKN,MAAMgT,iBAExBpS,MAAK,SAAAC,GAAG,OAAGA,EAAIC,UACjBF,MAAK,SAAAE,GACCA,EAAKC,OACJ6G,sBAAoBpC,QAChB1E,EAAKsD,SAGTwD,sBAAoBlI,MAChBoB,EAAKsD,c,gDAOKT,GACA,UAAnBA,EAAEC,OAAOC,MACRvD,KAAKU,SAAS,CACVgS,aAAcrP,EAAEC,OAAOC,MACvBoP,iBAAiB,IAGrB3S,KAAKU,SAAS,CAACiS,iBAAiB,M,wCAItBtP,GACdrD,KAAKU,SAAS,CAACgS,aAAcrP,EAAEC,OAAOC,U,0CAItCvD,KAAKP,MAAMgO,mBAAkB,K,+BAGvB,IAAD,OACL,OACI,6BACI,kBAAC,IAAD,CAAStM,UAAS,WAAQnB,KAAKP,MAAMqT,gBAAnB,MACd,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAchT,QAAYE,KAAKyN,kBAAkB1N,KAAKC,QAEtD,kBAAC,IAAD,CAAcmB,UAAY,eACtB,kBAAC,IAAD,CAAcA,UAAY,sBACtB,kDAEJ,6BACA,kBAAC,IAAD,KACI,0BAAMuG,SAAa1H,KAAK+S,aAAahT,KAAKC,OACtC,6BACI,yBAAKmB,UAAY,cACZnB,KAAKN,MAAM+S,WAAW1K,KAAI,SAACC,EAAQC,GAE5B,OACI,yBAAK9G,UAAY,QAAQzC,IAAG,UAAKsJ,EAAL,eACxB,2BACIrE,GAAE,sBAAmBsE,GACrBrF,KAAO,eACPsB,KAAO,QACPX,MAASyE,EACTtJ,IAAOsJ,EACP5D,SAAa,EAAK4O,0BAA0BjT,KAAK,KAGrD,2BAAOuI,QAAO,sBAAmBL,GAAK9G,UAAY,eAAlD,IAAmE6G,EAAnE,UAOpB,yBAAK7G,UAAU,cACVnB,KAAKN,MAAMiT,gBACR,yBAAKxR,UAAU,4BACX,8BACIA,UAAU,eACVwC,GAAG,8BACHsP,KAAK,IACL7O,SAAWpE,KAAKkT,kBAAkBnT,KAAKC,MACvC8H,UAAQ,KAIhB,MAMR,yBAAK3G,UAAY,yBACb,kBAAC,IAAD,CACI+C,KAAK,SACLvD,MAAQ,OACRM,KAAO,MAHX,UAOA,kBAAC,IAAD,CACIN,MAAQ,OACRM,KAAO,KACPnB,QAAYE,KAAKyN,kBAAkB1N,KAAKC,OAH5C,qB,GA7HL8B,c,yCCRlBqR,G,4MACnBzT,MAAQ,G,uDAEN,OACE,kBAAC,KAAD,CAAOoD,KAAM9C,KAAKP,MAAMqD,MACtB,kBAAC,KAAMsQ,OAAP,KACE,kBAAC,KAAMC,MAAP,eAGF,kBAAC,KAAMC,KAAP,KACE,wBAAInS,UAAU,eACZ,kBAAC,KAAD,CAAWoS,MAAM,WAEnB,wBAAIpS,UAAU,eAAenB,KAAKP,MAAM+T,oB,GAbV1R,aCAnB2R,G,4MACnB/T,MAAQ,G,uDAEN,OACE,kBAAC,KAAD,CAAOoD,KAAM9C,KAAKP,MAAMqD,MACtB,kBAAC,KAAMwQ,KAAP,KACE,wBAAInS,UAAU,eACZ,kBAAC,KAAD,CAAWoS,MAAM,aAEnB,wBAAIpS,UAAU,eAAd,oB,GATgCW,a,kGCJ3B4R,G,QAFAC,EAAGC,QAAH,UAAcrU,IC2BdsU,G,WA3Bb,aAAe,oBACb7T,KAAK8T,OAAS,G,iDAGX5M,GAAiB,IAAD,uBAAN6M,EAAM,iCAANA,EAAM,kBAInB,OAHI/T,KAAK8T,OAAO5M,IACdlH,KAAK8T,OAAO5M,GAAO8M,SAAQ,SAACC,GAAD,OAAQA,EAAE,WAAF,EAAMF,MAEpC/T,O,yBAGNkH,EAAO+M,GAGR,OAFIjU,KAAK8T,OAAO5M,GAAQlH,KAAK8T,OAAO5M,GAAOG,KAAK4M,GAC3CjU,KAAK8T,OAAO5M,GAAS,CAAC+M,GACpBjU,O,0BAGLkH,EAAO+M,GACT,GAAI/M,GAASgN,KAAEC,WAAWF,GAAK,CAC7B,IAAMG,EAAYpU,KAAK8T,OAAO5M,GACxBmN,EAAQD,EAAUE,WAAU,SAACC,GAAD,OAASA,IAAQN,KACnDG,EAAUI,OAAOH,EAAO,QACnBrU,KAAK8T,OAAO5M,GAAS,GAC5B,OAAOlH,S,KCqCIyU,G,sKArDJ,IAAD,OAuBN,OAdAC,UAAUC,aACPC,aATiB,CAClB1I,MAAO,CACL2I,WAAY,OACZC,OAAQ,CAAE3M,IAAK,IAAK4M,MAAO,IAAK3M,IAAK,OAEvCgE,OAAO,IAKN9L,MAAK,SAAC0U,GACL,EAAKA,OAASA,EACd,EAAKC,KAAK,SAAUD,MAErBE,OAAM,SAAClW,GACFA,aAAemW,aACjBjE,MAAM,wCAEN/R,QAAQ0E,IAAI7E,MAIXgB,O,6BAQFkE,EAAMkR,GACX,IAAMC,EAAMC,UAAUrS,OAOtB,OANIjD,KAAKgV,QACPhV,KAAKgV,OAAL,aAAkB9Q,EAAlB,aAAkC8P,SAAQ,SAACuB,GACzC,IAAM7V,EAAgB,IAAR2V,EAAYD,GAAMG,EAAMC,QACtCtB,KAAEuB,IAAIF,EAAO,UAAW7V,MAGrBM,O,6BAUP,OAHIA,KAAKgV,QACPhV,KAAKgV,OAAOU,YAAY1B,SAAQ,SAACuB,GAAD,OAAWA,EAAMI,UAE5C3V,S,GArDe6T,ICDpB+B,GAAY,CACdC,WAAY,CAAC,CACTC,IAAK,wBACLC,WAAY,oBACZC,SAAU,6BAkGHC,G,kDAzFX,WAAYC,GAAW,IAAD,8BAClB,gBACKC,GAAK,IAAIC,kBAAkBR,IAChC,EAAKO,GAAGE,eAAiB,SAACnP,GAAD,OAAWwM,GAAOuB,KAAK,OAAQ,CACpD1T,GAAI,EAAK2U,SACTI,UAAWpP,EAAMoP,aAErB,EAAKH,GAAGI,QAAU,SAACrP,GAAD,OAAW,EAAK+N,KAAK,aAAc/N,EAAMsP,QAAQ,KAEnE,EAAKC,YAAc,IAAIhC,GACvB,EAAKyB,SAAWA,EAVE,E,kDAkBhBQ,EAAUvK,GAAS,IAAD,OAYpB,OAXAnM,KAAKyW,YACArB,GAAG,UAAU,SAACJ,GACXA,EAAOU,YAAY1B,SAAQ,SAACuB,GACxB,EAAKY,GAAGQ,SAASpB,EAAOP,MAE5B,EAAKC,KAAK,cAAeD,GACrB0B,EAAUhD,GAAOuB,KAAK,UAAW,CAAE1T,GAAI,EAAK2U,WAC3C,EAAKU,iBAEbC,MAAM1K,GAEJnM,O,2BAON8W,GAQD,OAPIA,GACApD,GAAOuB,KAAK,MAAO,CAAE1T,GAAIvB,KAAKkW,WAElClW,KAAKyW,YAAYd,OACjB3V,KAAKmW,GAAGY,QACR/W,KAAKmW,GAAK,KACVnW,KAAKgX,MACEhX,O,oCAOP,OAHAA,KAAKmW,GAAGS,cACHtW,KAAKN,KAAKiX,eAAelX,KAAKC,OAC9BkV,OAAM,SAAClW,GAAD,OAASG,QAAQ0E,IAAI7E,MACzBgB,O,qCAOP,OAHAA,KAAKmW,GAAGe,eACH5W,KAAKN,KAAKiX,eAAelX,KAAKC,OAC9BkV,OAAM,SAAClW,GAAD,OAASG,QAAQ0E,IAAI7E,MACzBgB,O,qCAGImX,GAGX,OAFAnX,KAAKmW,GAAGiB,oBAAoBD,GAC5BzD,GAAOuB,KAAK,OAAQ,CAAE1T,GAAIvB,KAAKkW,SAAUmB,IAAKF,IACvCnX,O,2CAMUqX,GACjB,IAAMC,EAAS,IAAIC,sBAAsBF,GAEzC,OADArX,KAAKmW,GAAGqB,qBAAqBF,GACtBtX,O,sCAMKsW,GACZ,GAAIA,EAAW,CACX,IAAMmB,EAAe,IAAIC,gBAAgBpB,GACzCtW,KAAKmW,GAAGwB,gBAAgBF,GAE5B,OAAOzX,S,GA1Fc6T,I,6BCPvB+D,I,QAAiB,SAACjW,EAAM6T,GAAP,OAAmBqC,KAAW,iBAAD,OAAkBlW,GAAQ,CAAEmW,SAAUtC,MA4F3EuC,OA1Ff,YAAkF,IAA5DC,EAA2D,EAA3DA,QAASC,EAAkD,EAAlDA,SAAU9L,EAAwC,EAAxCA,OAAQsK,EAAgC,EAAhCA,YAAahW,EAAmB,EAAnBA,OAAQyX,EAAW,EAAXA,QAC9DC,EAAYC,iBAAO,MACnBC,EAAaD,iBAAO,MAFqD,EAGrDE,mBAASnM,EAAOD,OAHqC,oBAGxEA,EAHwE,KAGjEqM,EAHiE,OAIrDD,mBAASnM,EAAOC,OAJqC,oBAIxEA,EAJwE,KAIjEoM,EAJiE,OAKvCF,oBAAS,GAL8B,oBAKvEG,EALuE,KAK1DC,EAL0D,KAO/EC,qBAAU,WACJR,EAAUS,SAAWZ,IAASG,EAAUS,QAAQC,UAAYb,GAC5DK,EAAWO,SAAWX,IAAUI,EAAWO,QAAQC,UAAYZ,KACnE,CAACD,EAASC,IAEZU,qBAAU,WACJlC,IACFA,EAAYqC,OAAO,QAAS5M,GAC5BuK,EAAYqC,OAAO,QAAS1M,OAQhC,IAAM2M,EAAoB,SAACC,GACN,UAAfA,IACFT,GAAUrM,GACVuK,EAAYqC,OAAO,UAEF,UAAfE,IACFR,GAAUpM,GACVqK,EAAYqC,OAAO,WAQvB,OACE,yBAAK3X,UAAW0W,KAAW,cAAepX,IACxC,yBAAKU,UAAU,iBACb,2BAAOwC,GAAG,YAAYxC,UAAS,UAAKsX,EAAa,YAAY,aAAe/O,IAAKyO,EAAWc,UAAQ,IAEpG,yBACE9X,UAAS,+BAA0BsX,EAAa,WAAW,YAC3D3Y,QAAS,WAVf4Y,GAAgBD,KAYV,yBAAKhX,IAAG,UAAKlC,EAAL,mBAA0BkZ,EAAa,MAAQ,MAA/C,YAIZ,yBAAKtX,UAAU,cACb,2BAAOwC,GAAG,aAAa+F,IAAK2O,EAAYY,UAAQ,EAACC,OAAK,KAGxD,yBAAK/X,UAAU,iBACb,4BACEzC,IAAI,WACJwF,KAAK,SACL/C,UAAWyW,GAAe,WAAY1L,GACtCpM,QAAS,kBAAMiZ,EAAkB,YAEnC,4BACEra,IAAI,WACJwF,KAAK,SACL/C,UAAWyW,GAAe,gBAAiBxL,GAC3CtM,QAAS,kBAAMiZ,EAAkB,YAEnC,4BACE7U,KAAK,SACL/C,UAAU,gCACVrB,QAAS,kBAAMoY,GAAQ,S,QC/BlBiB,OAzCf,YAA0F,IAArE1Y,EAAoE,EAApEA,OAAQ2Y,EAA4D,EAA5DA,SAAU/M,EAAkD,EAAlDA,UAAWgN,EAAuC,EAAvCA,WAAYC,EAA2B,EAA3BA,YAAaC,EAAc,EAAdA,WACnEC,EAAkB,SAACtN,GACvB,IAAMC,EAAS,CAAEC,OAAO,EAAMF,SAC9B,OAAO,kBAAMG,GAAU,EAAO+M,EAAUjN,KAG1C,OACE,yBAAKhL,UAAW0W,KAAW,aAAcpX,IACvC,yBAAKU,UAAU,iBACb,yBAAKM,IAAG,UAAKlC,EAAL,2BAAkCga,GAAc5M,IAAI,kBAE9D,2BACE,0BAAMxL,UAAU,UAAhB,UAA6BmY,KAE/B,0BAAMnY,UAAU,YAAhB,oBACA,4BACE+C,KAAK,SACL/C,UAAU,yBACVrB,QAAS0Z,GAAgB,KAE3B,4BACEtV,KAAK,SACL/C,UAAU,yBACVrB,QAAS0Z,GAAgB,KAE3B,4BACEtV,KAAK,SACL/C,UAAU,gCACVrB,QAASuZ,MCWXna,GAAMT,EAAe,gBAC3B,GAAGS,IAAOA,GAAIiG,MACV,IACIqH,GADgBsE,KAAW5R,GAAIiG,OACF4L,K,IAivBtB0I,G,kDA3uBb,aAAe,IAAD,uBACZ,gBAFF/F,OAAS,KAIP,IAAMxU,EAAMT,EAAe,gBAC3B,GAAGS,GAAOA,EAAIiG,MACV,IACIqH,EADgBsE,KAAW5R,EAAIiG,OACF4L,KANzB,OASZ,EAAKrR,MAAQ,CACXga,iBAAiB,EACjBC,MAAO,GACPC,aAAc,GACd7I,KAAM,KACN8I,kBAAmB,EACnBC,iBAAkB,GAClBC,gBAAiB,GACjBC,gBAAiB,GACjB5a,OAAO,EACPoU,aAAc,GACdlH,WAAY,GACZ2N,eAAgB,CAACzN,EAAa2E,KAC9B3E,aAAcA,EACdyF,cAAe,CACbnL,SAAU,GACVE,OAAQ,GACRkL,OAAQ,GACRC,OAAQ,IAEV/G,UAAU,EACV8O,qBAAqB,EACrBC,yBAAyB,EACzBzN,UAAWsE,KAAKC,MAIhBmJ,WAAY,GACZC,UAAW,GACXjB,SAAU,GACVnB,SAAU,KACVD,QAAS,KAET7L,OAAQ,MAMV,EAAKgK,GAAK,GAEV,EAAKmE,iBAAmB,EAAKjO,UAAUtM,KAAf,gBACxB,EAAKwa,eAAiB,EAAKrC,QAAQnY,KAAb,gBACtB,EAAKya,kBAAoB,EAAKnB,WAAWtZ,KAAhB,gBApDb,E,gEAgEZC,KAAKC,gBAELD,KAAKya,uBACLza,KAAK0a,mBACL1a,KAAK2a,yB,2CAML,IAFA,IAAIC,EAAS3Q,SAAS4Q,qBAAqB,OACvCC,EAAO9a,KACFiI,EAAI,EAAIA,EAAI2S,EAAO3X,OAAQgF,IAClC2S,EAAO3S,GAAG8S,iBAAiB,SAAU,WAChC/a,KAAKgb,aAAa,gBACnB7b,QAAQ0E,IAAI,+BAAgC7D,KAAKib,WAAWC,aAAa,OAAO3X,OAEhFuX,EAAKpa,SAAS,CACZwZ,qBAAqB,EACrBiB,cAAenb,KAAKib,WAAWC,aAAa,OAAO3X,c,sCAQ5C,IAAD,OACRrE,EAAMT,EAAe,gBAE3ByB,MAAMX,EAAa,oBAAqB,CACtCY,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMvB,KAAKQ,UAAU,CACnB6F,MAAOjG,EAAIiG,UAGd7E,MAAK,SAAAC,GAAG,OAAGA,EAAIC,UACfF,MAAK,SAAAE,GACAA,EAAKC,SACP7B,aAAawc,QACb,EAAK3b,MAAM2H,QAAQC,KAAK,W,6CAO5BrH,KAAK0T,OAASA,K,kCAQH,IAAD,OACV2H,KAAMC,aAAaC,QAAQC,KACzB,SAAArP,GAEE,OADA,EAAKzL,SAAS,CAAE+a,SAAS,IAClBtP,KAET,SAAA/M,GAME,OALA,EAAKsB,SAAS,CAAE+a,SAAS,IACzB,EAAK/a,SAAS,CACZ8S,aAAa,uDACbpU,OAAO,IAEFsc,QAAQC,OAAOvc,MAG1Bic,KAAMC,aAAaM,SAASJ,KAC1B,SAAAI,GAEE,OADA,EAAKlb,SAAS,CAAE+a,SAAS,IAClBG,KAET,SAAAxc,GAME,OALA,EAAKsB,SAAS,CAAE+a,SAAS,IACzB,EAAK/a,SAAS,CACZ8S,aAAa,yCACbpU,OAAO,IAEFsc,QAAQC,OAAOvc,Q,6CAU1BkI,sBAAoBlI,MAClB,4DACA,Y,uCASEY,KAAKN,MAAMqR,OACb/Q,KAAK0T,OAAOuB,KAAK,UAAWjV,KAAKN,MAAMqR,MACvCzJ,sBAAoBpC,QAAQ,0BAA2B,mB,yCASzDlF,KAAK0T,OAAOuB,KAAK,cAAejV,KAAKN,MAAM8M,gB,uCAQ3C,IAAIqP,EAAkB,CAClB5B,eAAgBja,KAAKN,MAAMua,eAC3BhI,cAAejS,KAAKN,MAAMuS,cAC1BzF,aAAcxM,KAAKN,MAAM8M,aACzBsP,eAAgB9b,KAAKN,MAAM4M,YAE/BtM,KAAK0T,OAAOuB,KAAK,cAAe4G,GAEC,cAA9B7b,KAAKN,MAAM4M,WAAW6E,KACvBnR,KAAK0T,OAAOuB,KAAK,MAAO,CAAE1T,GAAIvB,KAAKN,MAAM4M,WAAW6E,MAEtDnR,KAAKU,SAAS,CAAE2Z,UAAW,O,2CAGP,IAAD,OACnBra,KAAKU,SAAS,CACZyZ,yBAAyB,EACzB7N,WAAY,GACZsN,aAAc,KACd,WACA,EAAKlG,OAAOuB,KAAK,6BAA8B,EAAKvV,MAAM8M,mB,kDAM5D5N,aAAawc,QACbpb,KAAKU,SAAS,CAACyZ,yBAAyB,IAExCna,KAAKP,MAAM2H,QAAQC,KAAK,O,uCAGTiF,GAAa,IAAD,OAEvB2N,EAAiBja,KAAKN,MAAMua,eAChCA,EAAe5S,KAAKiF,EAAW6E,KAC/BnR,KAAKU,SAAS,CAACuZ,mBAEf,IAAIL,EAAe,CACfjW,GAAI2I,EAAW6E,IACfvO,KAAM0J,EAAWzF,SACjB4F,cAAeH,EAAWG,cAC1BzF,OAAQsF,EAAWtF,OACnBF,SAAUwF,EAAWxF,SACrBC,IAAKuF,EAAWvF,KAIpB/G,KAAKU,SAAS,CAAEkZ,eAAatN,eAAc,WACzC,IAAIxI,EAAU,CACZvC,GAAI,EAAK7B,MAAM8M,aAAa2E,IAC5BrN,QAAS,CACPI,KAAM,OACN6X,MAAO,IAAI/K,KACXgL,KAAK,uDAAD,OAAyD,EAAKtc,MAAM4M,WAAWzF,SAA/E,eAA8F,EAAKnH,MAAM4M,WAAWtF,OAApH,YAA8H,EAAKtH,MAAM4M,WAAWvF,IAApJ,YAA2J,EAAKrH,MAAM4M,WAAWxF,SAAjL,WACJ3F,UAAW,WAEb8a,KAAM,EAAKvc,MAAM4M,WAAW6E,KAE9B,EAAKuC,OAAOuB,KAAK,UAAWnR,MAI9B9D,KAAK0T,OAAOuB,KAAK,sBAAuBjV,KAAKN,MAAM4M,c,qCAInDhF,sBAAoBlI,MAApB,wEAGAY,KAAKU,SAAS,CAAC4L,WAAY,KAC3BtM,KAAKU,SAAS,CAAEkZ,aAAc,O,wCAI9Bza,QAAQ0E,IAAI,oCACZyD,sBAAoBlI,MAApB,sEAGAY,KAAKU,SAAS,CAAC4L,WAAY,KAC3BtM,KAAKU,SAAS,CAAEkZ,aAAc,O,iCAIG,cAA9B5Z,KAAKN,MAAM4M,WAAW6E,KACvBnR,KAAK0T,OAAOuB,KAAK,MAAO,CAAE1T,GAAIvB,KAAKN,MAAM4M,WAAW6E,MAEtDnR,KAAKU,SAAS,CAAE2Z,UAAW,KAG3Bra,KAAKU,SAAS,CAAC4L,WAAY,KAC3BtM,KAAKU,SAAS,CAAEkZ,aAAc,O,6CAOR,IAAD,OACrB5Z,KAAK0T,OAAO0B,GAAG,UAAWpV,KAAKkc,kBAAkBnc,KAAKC,OACtDA,KAAK0T,OAAO0B,GAAG,YAAapV,KAAKmc,eAAepc,KAAKC,OACrDA,KAAK0T,OAAO0B,GAAG,aAAcpV,KAAKoc,qBAAqBrc,KAAKC,OAE5DA,KAAK0T,OAAO0B,GAAG,qBAAsBpV,KAAKqc,mBAAmBtc,KAAKC,OAClEA,KAAK0T,OAAO0B,GAAG,cAAepV,KAAKsc,iBAAiBvc,KAAKC,OACzDA,KAAK0T,OAAO0B,GAAG,cAAepV,KAAKuc,aAAaxc,KAAKC,OACrDA,KAAK0T,OAAO0B,GAAG,iBAAkBpV,KAAKwc,gBAAgBzc,KAAKC,OAC3DA,KAAK0T,OAAO0B,GAAG,SAAUpV,KAAKyc,SAAS1c,KAAKC,OAC5CA,KAAK0T,OAAO0B,GAAG,YAAapV,KAAK0c,mBAAmB3c,KAAKC,OACzDA,KAAK0T,OAAO0B,GAAG,oBAAqBpV,KAAK2c,mBAAmB5c,KAAKC,OACjEA,KAAK0T,OAAO0B,GAAG,gBAAiBpV,KAAK4c,eAAe7c,KAAKC,OACzDA,KAAK0T,OAAO0B,GAAG,UAAWpV,KAAK6c,SAAS9c,KAAKC,OAG7CA,KAAK0T,OAOF0B,GAAG,WAAW,YAAyB,IAAhBgE,EAAe,EAArB6C,KAChB,EAAKvb,SAAS,CAAE2Z,UAAW,SAAUjB,gBAEtChE,GAAG,QAAQ,SAACzJ,GACPA,EAAK0L,KACP,EAAKlB,GAAGqB,qBAAqB7L,EAAK0L,KACZ,UAAlB1L,EAAK0L,IAAInT,MAAkB,EAAKiS,GAAGe,gBAClC,EAAKf,GAAGwB,gBAAgBhM,EAAK2K,cAErClB,GAAG,MAAOpV,KAAKkY,QAAQnY,KAAKC,MAAM,IAClCiV,KAAK,U,wFAiBQnR,GAChB,IAAI8V,EAAe5Z,KAAKN,MAAMka,aAC1BkD,EAAchZ,EAAQA,QACtBiZ,EAAkBD,EAAYd,KAElC,GAAuB,cAApBe,EACD,OAAO,EAQT,IAJA,IACIC,EAAMF,EAAYd,KAElBiB,EAAK,YAAOD,EAAIE,SAHP,mHAILjV,EAAI,EAAIA,EAAIgV,EAAMha,OAASgF,IAAM,CACvC,IACIkV,EADYlT,SAASmT,cAAT,0BAA0Cja,OAAO8Z,EAAMhV,IAAIuJ,MAAM,KAAK6L,KAAK,IAA3E,QACUC,UAC1BP,EAAkBA,EAAgBQ,QAAQpa,OAAO8Z,EAAMhV,IAAK9E,OAAOga,IAIrEJ,EAAkBA,EAAgBvL,MAAM,QAAQ6L,KAAK,iCAGjDvZ,EAAQmY,OAASjc,KAAKN,MAAM8M,aAAa2E,KAC3C2L,EAAY3O,SAAW,QACvB2O,EAAYU,aAAe,WAAQ,OAAOC,KAAW,oDAAD,OAAqDV,EAArD,YAGpDD,EAAYY,OAAZ,UAAwBne,EAAxB,2BAAqDS,KAAKN,MAAM8M,aAAaC,iBAE7EqQ,EAAY3O,SAAW,OACvB2O,EAAYU,aAAe,WAAQ,OAAOC,KAAW,mDAAD,OAAoDV,EAApD,YAGpDD,EAAYY,OAAZ,UAAwBne,EAAxB,2BAAqDS,KAAKN,MAAM4M,WAAWG,gBAI7EqQ,EAAY5L,OAAQ,EACpB4L,EAAYf,KAAO,IAAI/K,KAClB4I,EAAa7L,UAGmD,IAAhE6L,EAAa7L,SAAS6L,EAAa7L,SAAS9K,OAAO,GAAGiO,OACvD0I,EAAa7L,SAAS4P,MAHxB/D,EAAa7L,SAAW,GAO1B,IAAIA,EAAW/N,KAAKN,MAAMka,aAAa7L,SACvC,GAAsB,oBAAZA,GAA2BA,EAAS9K,OAAS,GAClD8K,EAASA,EAAS9K,OAAO,GAAGkL,WAAa2O,EAAY3O,SAAU,CAChE,IAAIyP,EAAkB7P,EAASA,EAAS9K,OAAO,GAC/C2a,EAAgBF,OAAS,GACzBE,EAAgB7B,KAAO,GACvBnC,EAAa7L,SAAS4P,MACtB/D,EAAa7L,SAAS1G,KAAKuW,GAG/BhE,EAAa7L,SAAS1G,KAAKyV,GAC3B9c,KAAKU,SAAS,CAAEkZ,iBAKhB,IAAIiE,EAAU5T,SAASmT,cAAc,uBACrCje,QAAQ0E,IAAI,wBAAyBga,EAAQ,cAAeA,GAC7C,OAAZA,IACDA,EAAQC,UAAYD,EAAQE,gB,oCAUlB1a,GACZ,IAAI0N,EAAO1N,EAAE0N,KACb/Q,KAAK0T,OAAOuB,KAAK,UAAWlE,GAC5B,IAAI6I,EAAe5Z,KAAKN,MAAMia,MAAMqE,QAAO,SAAAC,GAAC,OAAIA,EAAEta,KAAOoN,EAAKpN,MAC9D3D,KAAKU,SAAS,CAAEqQ,OAAM2I,iBAAiB,EAAOE,mB,oCASlCvW,GAEZ,IADA,IAAIsW,EAAQ3Z,KAAKN,MAAMka,aACdvF,EAAQ,EAAGA,EAAQsF,EAAM1W,OAAQoR,IACxC,GAAIsF,EAAMtF,GAAO1Q,KAAON,EAAE0N,KAAKpN,GAG7B,OAFAgW,EAAMtF,GAAO6J,OAAS,OACtBle,KAAKU,SAAS,CAAEmZ,kBAAmBxF,EAAOuF,aAAcD,M,oCAahDqC,GACZ,IAAIlY,EAAU,CACZvC,GAAIvB,KAAKN,MAAM4M,WAAW6E,IAC1BrN,QAAS,CACPI,KAAM,OACN8X,KAAMA,EACND,MAAO,IAAI/K,KACX7P,UAAW,WAEb8a,KAAMjc,KAAKN,MAAM8M,aAAa2E,KAEhCnR,KAAK0T,OAAOuB,KAAK,UAAWnR,K,oCAShBqa,GACZne,KAAKU,SAAS,CAAC8L,aAAc2R,M,yCAGZ1d,GACjBT,KAAKU,SAAS,CAACoZ,iBAAkBrZ,M,+CAGVA,GACvBT,KAAKU,SAAS,CAACqZ,gBAAiBtZ,M,wCAEhBA,GAChBT,KAAKU,SAAS,CAACsZ,gBAAiBvZ,M,8CAGhCT,KAAKU,SAAS,CAACwZ,qBAAqB,M,iCAIpCla,KAAK0T,OAAOuB,KAAK,YAAajV,KAAKN,MAAM4M,c,2CAGrB,IAAD,OACnBtM,KAAKU,SAAS,CAAC0K,UAAU,IAEzB,IAAIwO,EAAe5Z,KAAKN,MAAMka,aAC1B7L,EAAW6L,EAAa7L,SACxB+O,EAAc,GACI,oBAAZ/O,KACiC,IAAtCA,EAASA,EAAS9K,OAAO,GAAGiO,OAAsC,IAApBnD,EAAS9K,QACxD6Z,EAAY3O,SAAW,OACvB2O,EAAYU,aAAe,WAAQ,OAAO,kBAAC,GAAD,OAC1CV,EAAYY,OAAZ,UAAwBne,EAAxB,2BAAqDS,KAAKN,MAAM4M,WAAWG,eAC3EqQ,EAAY3b,UAAY,UACxB2b,EAAY5L,OAAQ,EAEf0I,EAAa7L,WAChB6L,EAAa7L,SAAW,IAE1B6L,EAAa7L,SAAS1G,KAAKyV,GAC3B9c,KAAKU,SAAS,CAAEkZ,iBAEhB5Z,KAAKoe,sBAAwBjU,YAAW,YAE6B,KADnEyP,EAAe,EAAKla,MAAMka,cACV7L,SAAS6L,EAAa7L,SAAS9K,OAAO,GAAGiO,QACvD0I,EAAa7L,SAAS4P,MACtB,EAAKjd,SAAS,CAAEkZ,oBAEjB,MAEqC,GAArC7L,EAASA,EAAS9K,OAAO,GAAGiO,QAC7BlR,KAAKU,SAAS,CAACkZ,aAAc5Z,KAAKN,MAAMka,eAExCyE,aAAare,KAAKoe,uBAClBC,aAAare,KAAKse,qBAElBte,KAAKse,oBAAsBnU,YAAW,YAE+B,KADnEyP,EAAe,EAAKla,MAAMka,cACV7L,SAAS6L,EAAa7L,SAAS9K,OAAO,GAAGiO,QACvD0I,EAAa7L,SAAS4P,MACtB,EAAKjd,SAAS,CAAEkZ,oBAEjB,S,2CASwB,cAA9B5Z,KAAKN,MAAM4M,WAAW6E,KACvBnR,KAAK0T,OAAOuB,KAAK,MAAO,CAAE1T,GAAIvB,KAAKN,MAAM4M,WAAW6E,MAEtDnR,KAAKU,SAAS,CAAE2Z,UAAW,KAEE,KAA1Bra,KAAKN,MAAM4M,YAA+D,qBAAnCtM,KAAKN,MAAM4M,WAAWzF,UAC9DS,sBAAoBlI,MAApB,UACKY,KAAKN,MAAM4M,WAAWzF,SAD3B,uCAKF7G,KAAKU,SAAS,CAAC4L,WAAY,KAC3BtM,KAAKU,SAAS,CAAEkZ,aAAc,KAC9B5Z,KAAK0T,OAAOuB,KAAK,+B,sCAIjB,IAAM/V,EAAMT,EAAe,gBAC3B,GAAGS,GAAOA,EAAIiG,MACV,IACIqH,EADgBsE,KAAW5R,EAAIiG,OACF4L,KAErC/Q,KAAKU,SAAS,CAAC8L,aAAcA,EAAcE,UAAUsE,KAAKC,U,wCAI1DjR,KAAKU,SAAS,CACZoZ,kBAAkB,EAClBC,iBAAiB,EACjBC,iBAAgB,M,+BAKlBha,KAAK0T,OAAOuB,KAAK,UAAWzI,M,iCAI5B5N,aAAawc,QACbpb,KAAKP,MAAM2H,QAAQC,KAAK,O,uCAIS,cAA9BrH,KAAKN,MAAM4M,WAAW6E,KACvBnR,KAAK0T,OAAOuB,KAAK,MAAO,CAAE1T,GAAIvB,KAAKN,MAAM4M,WAAW6E,MAEtDnR,KAAKU,SAAS,CAAE2Z,UAAW,KAE3B/S,sBAAoBlI,MAApB,UACKY,KAAKN,MAAM4M,WAAWzF,SAD3B,cAIA,IAAIoT,EAAiBja,KAAKN,MAAMua,eAC5BsE,EAActE,EAAeuE,QAAQxe,KAAKN,MAAM4M,WAAW6E,KAC7D8I,EAAezF,OAAO+J,EAAaA,EAAY,GAEjDve,KAAKU,SAAS,CACZ4L,WAAY,GACZsN,aAAc,GACdK,eAAgBA,IAElBja,KAAK0T,OAAOuB,KAAK,2B,gCAGTyB,EAAU+H,EAActS,GAAS,IAAD,OACxChN,QAAQ0E,IAAI,kBAAmB6S,EAAU+H,EAActS,GAEvDnM,KAAKU,SAAS,CAACyL,WACfnM,KAAKmW,GAAK,IAAIF,GAAewI,GAC1BrJ,GAAG,eAAe,SAAC3T,GAClB,IAAMmE,EAAW,CAAEwU,WAAY,SAAUnC,SAAUxW,GAC9CiV,IAAU9Q,EAASyU,UAAY,IACpC,EAAK3Z,SAASkF,MAEfwP,GAAG,cAAc,SAAC3T,GAAD,OAAS,EAAKf,SAAS,CAAEsX,QAASvW,OACnDoV,MAAMH,EAAUvK,K,mCAGP,IACJiN,EAAapZ,KAAKN,MAAlB0Z,SACRpZ,KAAK0T,OAAOuB,KAAK,MAAO,CAAE1T,GAAI6X,IAC9BpZ,KAAKU,SAAS,CAAE2Z,UAAW,O,8BAGrBvD,GACF5C,KAAEC,WAAWnU,KAAKmW,GAAGR,OACvB3V,KAAKmW,GAAGR,KAAKmB,GAEf9W,KAAKmW,GAAK,GAEVnW,KAAKU,SAAS,CACZ0Z,WAAY,GACZC,UAAW,GACXpC,SAAU,KACVD,QAAS,KACT7L,OAAQ,S,+BAKH,MAE8CnM,KAAKN,MAAlD2a,EAFD,EAECA,UAFD,EAEYD,WAFZ,EAEwBnC,SAFxB,EAEkCD,QACzC,OACE,6BAGE,kBAAC,GAAD,CACExL,aAAcxM,KAAKN,MAAM8M,aACzBE,UAAW1M,KAAKN,MAAMgN,UACtB9C,cAAe5J,KAAK0e,cAAc3e,KAAKC,MACvCsM,WACEtM,KAAKN,MAAMka,aAEbrM,mBAAoBvN,KAAKuN,mBAAmBxN,KAAKC,MACjDwN,yBAA0BxN,KAAKwN,yBAAyBzN,KAAKC,MAC7DyN,kBAAmBzN,KAAKyN,kBAAkB1N,KAAKC,MAC/C0L,eAAgB1L,KAAK0L,eAAe3L,KAAKC,MACzCoL,SAAUpL,KAAKoL,SAASrL,KAAKC,MAC7BqM,UAAWrM,KAAKsa,iBAChB3M,OAAQ3N,KAAK2N,OAAO5N,KAAKC,QAG3B,kBAAC,GAAD,CACE8C,KAAM9C,KAAKN,MAAMN,MACjBoU,aAAcxT,KAAKN,MAAM8T,eAG3B,kBAAC,GAAD,CAAc1Q,KAAM9C,KAAKN,MAAM+b,UAC/B,kBAAC,wBAAD,MAEA,kBAAC,GAAD,CACEjL,YAAaxQ,KAAKN,MAAM8M,aACxBmS,UAAW3e,KAAKN,MAAMgN,UACtBkS,gBAAiB5e,KAAK6e,cAAc9e,KAAKC,MACzCuN,mBAAoBvN,KAAKuN,mBAAmBxN,KAAKC,MACjDoR,iBAAgB,4BAAwBpR,KAAKN,MAAMoa,kBACnDjJ,cAAe7Q,KAAK6Q,cAAc9Q,KAAKC,QAEzC,kBAAC,GAAD,CACEoS,gBAAe,2BAAuBpS,KAAKN,MAAMqa,iBACjD9H,cAAejS,KAAKN,MAAMuS,cAC1BzE,yBAA0BxN,KAAKwN,yBAAyBzN,KAAKC,QAG/D,kBAAC,GAAD,CACE8S,gBAAe,2BAAuB9S,KAAKN,MAAMsa,iBACjDvM,kBAAmBzN,KAAKyN,kBAAkB1N,KAAKC,MAC/CwM,aAAcxM,KAAKN,MAAM8M,aACzBF,WAAYtM,KAAKN,MAAM4M,aAGvBtM,KAAKN,MAAMsa,iBAAmBha,KAAKN,MAAMoa,kBAAoB9Z,KAAKN,MAAMqa,gBACxE,6BACE,yBAAK5Y,UAAU,eAAerB,QAASE,KAAK8e,gBAAgB/e,KAAKC,SAElE,KAEFA,KAAKN,MAAMwa,oBACV,kBAAC,GAAD,CACE3I,SAAUvR,KAAKN,MAAMyb,cACrB1J,sBAAuBzR,KAAKyR,sBAAsB1R,KAAKC,QAEvD,MAGFkU,KAAE6K,QAAQ/e,KAAKN,MAAMyM,SACrB,kBAAC,GAAD,CACE1L,OAAQT,KAAKN,MAAM0a,WACnBnC,SAAUjY,KAAKN,MAAMuY,SACrBD,QAAShY,KAAKN,MAAMsY,QACpB7L,OAAQnM,KAAKN,MAAMyM,OACnBsK,YAAazW,KAAKmW,GAAGM,YACrByB,QAASlY,KAAKua,iBAIjBva,KAAKN,MAAM4M,WACV,kBAAC,GAAD,CACE7L,OAAQ4Z,EACRhO,UAAWrM,KAAKsa,iBAChBjB,WAAYrZ,KAAKwa,kBACjBpB,SAAUpZ,KAAKN,MAAM4M,WAAW6E,IAChCmI,YAAatZ,KAAKN,MAAM4M,WAAWzF,SACnC0S,WAAYvZ,KAAKN,MAAM4M,WAAWG,gBAEnC,KAEFzM,KAAKN,MAAMya,wBACV,6BACE,yBAAKhZ,UAAU,cACf,yBAAKA,UAAU,gBACb,gGACA,yBAAKA,UAAU,kBACb,kBAAC,IAAD,CACEF,KAAK,KACLN,MAAM,UACNb,QAASE,KAAKgf,0BAA0Bjf,KAAKC,OAH/C,cAWR,U,GAruBU8B,aC+CHmd,I,0DAvFb,WAAYxf,GAAQ,IAAD,8BACjB,cAAMA,IAEDC,MAAQ,CACTgD,MAAO,GACPD,SAAU,GACVyc,kBAAkB,GANL,E,8DAUD7b,GAChBlE,QAAQ0E,IAAI,eAAgB7D,KAAKN,MAAMgD,OACvC1C,KAAKU,SAAS,CAAEgC,MAAOW,EAAEC,OAAOC,U,2CAGbF,GACjBrD,KAAKU,SAAS,CAAE+B,SAAUY,EAAEC,OAAOC,U,mCAI1B2D,GAAQ,IAAD,OAClBA,EAAMC,iBADY,MAEUnH,KAAKN,MAAzBgD,EAFU,EAEVA,MAAOD,EAFG,EAEHA,SAEfzC,KAAKU,SAAU,CACbwe,kBAAkB,IAGpBhf,MAAMX,EAAa,oBAAqB,CACtCY,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMvB,KAAKQ,UAAU,CACnBoD,QACAD,eAEDnC,MAAK,SAAAC,GAAG,OAAGA,EAAIC,UACfF,MAAK,SAAAE,GACJrB,QAAQ0E,IAAI,sBAAuBrD,GAChCA,EAAK0E,QACN,EAAKzF,MAAM2H,QAAQC,KAAK,iBAEtBC,sBAAoBlI,MAApB,UACOoB,EAAKsD,e,+BAMpB,OACI,kBAAC,IAAD,KACI,kBAAC,wBAAD,MACF,kBAAC,IAAD,CAAQyD,GAAG,KAAKvB,GAAG,IAAIwB,GAAG,IAAIC,GAAG,IAAItG,UAAU,+BAC7C,0BAAMuG,SAAU1H,KAAK4G,aAAa7G,KAAKC,OACrC,kBAAC,IAAD,KACA,yBAAKmB,UAAU,0BACb,wBAAIA,UAAU,uBAAsB,4DAEtC,kBAAC,IAAD,CAAaA,UAAU,QAErB,kBAAC,IAAD,CAAUwG,MAAM,aAAaC,OAAK,EAAC1D,KAAK,QAAQE,SAAUpE,KAAKkC,kBAAkBnC,KAAKC,MAAO6H,UAAQ,EAACzI,MAAM,QAAQ8F,QAAQ,QAAQ4C,UAAQ,IAE5I,kBAAC,IAAD,CAAUF,OAAK,EAAC1D,KAAK,WAAWE,SAAUpE,KAAKmf,qBAAqBpf,KAAKC,MAAO6H,UAAQ,EAACzI,MAAM,QAAQ8F,QAAQ,QAAQ4C,UAAQ,IAE/H,yBAAK3G,UAAU,yBACb,kBAAC,IAAD,CACE+C,KAAK,SACL/C,UAAU,uBACVoH,SAAO,EAAC5H,MAAM,QAEXX,KAAKN,MAAMqF,aAAe,oBAAsB,YAKzD,kBAAC,IAAD,CAAgB5D,UAAU,2B,GA7EhBU,IAAMC,YC2cfsd,I,0DA1cb,WAAY3f,GAAQ,IAAD,8BACjB,cAAMA,IAEDC,MAAQ,CACT2f,cAAc,EACdC,iBAAiB,EACjBC,kBAAkB,EAClBC,eAAe,GAGnB,EAAKC,kBAAoB,EAAKA,kBAAkB1f,KAAvB,gBAVR,E,gEAcfC,KAAK0f,cACL1f,KAAK2f,iB,2CAIP,IAAMC,EAAW3V,SAASmT,cAAc,mBAClCyC,EAAW5V,SAASmT,cAAc,YAExCwC,EAAQ7E,iBAAiB,SAAS,SAAC1X,GACjCA,EAAE8D,iBACF0Y,EAASC,UAAUhH,OAAO,gB,oCAIf,IAAD,OAEZ5Y,MAAMX,EAAa,oBAAqB,CACtCY,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMvB,KAAKQ,UAAU,MAGpBgB,MAAK,SAAAC,GAAG,OAAGA,EAAIC,UACfF,MAAK,SAAAE,GACDA,EAAK0E,QACN,EAAKxE,SAAS,CAACiZ,MAAOnZ,EAAKmZ,QAEzBrS,sBAAoBlI,MAApB,UACOoB,EAAKsD,e,qCAMN,IAAD,OACX5D,MAAMX,EAAa,sBAAuB,CACtCY,OAAQ,OACRC,QAAS,CACL,eAAiB,oBAErB2f,KAAMjhB,KAAKQ,UAAU,MAGtBgB,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAClBF,MAAK,SAAAE,GACCA,EAAK0E,SACN,EAAKxE,SAAS,CACVgC,MAAOlC,EAAKwf,MAAMtd,a,wCAQdqO,GAChB/Q,KAAKU,SAAS,CACV2e,cAAc,EACdC,iBAAiB,EACjBW,aAAclP,M,qCAKhB/Q,KAAKU,SAAS,CACZ2e,cAAc,EACdC,iBAAiB,EACjBC,kBAAkB,M,yCAKtBvf,KAAKU,SAAS,CACV2e,cAAc,EACdC,iBAAiB,EACjBC,kBAAkB,M,wCAINlc,GAChBrD,KAAKU,SAAS,CAACgC,MAAOW,EAAEC,OAAOC,U,2CAGZF,GACnBrD,KAAKU,SAAS,CAAC+B,SAAUY,EAAEC,OAAOC,U,kDAGRF,GAC1BrD,KAAKU,SAAS,CAACwf,gBAAiB7c,EAAEC,OAAOC,U,mCAG7B,IAAD,OACXpE,QAAQ0E,IAAI,SAAU7D,KAAKN,MAAMia,OACjCzZ,MAAMX,EAAa,yBAA0B,CACzCY,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMvB,KAAKQ,UAAU,CACjByR,KAAM/Q,KAAKN,MAAMugB,iBAEpB3f,MAAK,SAAAC,GAAG,OAAGA,EAAIC,UACfF,MAAK,SAAAE,GACJ,GAAGA,EAAK0E,QAAS,CACfoC,sBAAoBpC,QAApB,UAA+B1E,EAAKsD,UACpC,IAAImc,EAAezf,EAAKuQ,KACxB,EAAKrQ,SAAS,CAACuf,iBAEf,EAAKvgB,MAAMia,MAAM5R,KAAI,SAACgJ,EAAM9I,GACxB,GAAG8I,EAAKI,MAAQ8O,EAAa9O,IAAK,CAC9B,IAAIwI,EAAQ,EAAKja,MAAMia,MAGvB,OAFAA,EAAM1R,GAAKgY,EACX,EAAKvf,SAAS,CAACiZ,WACR,EAEX,OAAO,UAITrS,sBAAoBlI,MAApB,UACOoB,EAAKsD,e,qCAMR,IAAD,EAC8B9D,KAAKN,MAA1CgD,EADO,EACPA,MAAOD,EADA,EACAA,SAAUyd,EADV,EACUA,gBACvBhgB,MAAMX,EAAa,4BAA6B,CAC5CY,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMvB,KAAKQ,UAAU,CACjBoD,QACAD,WACAyd,sBAEH5f,MAAK,SAAAC,GAAG,OAAGA,EAAIC,UACfF,MAAK,SAAAE,GACDA,EAAK0E,QACNoC,sBAAoBpC,QAApB,UAA+B1E,EAAKsD,UAElCwD,sBAAoBlI,MAApB,UACOoB,EAAKsD,e,sCAOpB9D,KAAKU,SAAS,CAAC8e,eAAgBxf,KAAKN,MAAM8f,kB,+BAEpC,IAAD,OACP,OACI,6BACI,kBAAC,wBAAD,MAEA,2BAAO7b,GAAG,kBAAkBxC,UAAYnB,KAAKN,MAAM8f,cAAmC,iBAAnB,kBAC/D,yBAAKre,UAAU,kBAEf,wBAAIA,UAAU,eACd,4BACI,uBAAGD,KAAK,KAAMpB,QAASE,KAAKqf,aAAatf,KAAKC,OAC1C,uBAAGmB,UAAU,gBADjB,gBAIJ,4BACI,uBAAGD,KAAK,KAAKpB,QAASE,KAAKuf,iBAAiBxf,KAAKC,OAC7C,uBAAGmB,UAAU,eADjB,cAOR,yBAAKwC,GAAG,UAAUxC,UAAWnB,KAAKN,MAAM8f,cAAgB,iBAAmB,kBAEvE,yBAAK7b,GAAG,kBACJ,yBAAKxC,UAAU,yBACf,yBAAKA,UAAU,mBACX,yBAAKA,UAAU,iBACf,uBAAGD,KAAK,KAAKC,UAAU,eAAewC,GAAG,kBACrC,uBACIxC,UAAU,aACVrB,QAASE,KAAKwf,cAAczf,KAAKC,aAUhDA,KAAKN,MAAM2f,aACR,6BAASle,UAAU,+BACf,yBAAKA,UAAU,OACX,yBAAKA,UAAU,uDAEXnB,KAAKN,MAAMia,MACP,yBAAKxY,UAAU,oBACX,2BAAOgf,QAAQ,2FAA2Fhf,UAAU,oCACpH,+BACI,4BACI,mCACA,sCACA,yCACA,mCACA,wCACA,sCACA,0CACA,+CACA,uCACA,wCAGR,+BAEInB,KAAKN,MAAMia,MAAM5R,KAAI,SAACgJ,EAAM9I,GACxB,OACI,4BACI,4BAAKA,EAAE,GACP,4BAAI,yBAAKxG,IAAG,UAAKlC,EAAL,2BAAkCwR,EAAKtE,eAAiBE,IAAI,gBAAxE,OACA,4BAAKoE,EAAKlK,UACV,4BAAKkK,EAAKhK,KACV,4BAAKgK,EAAKjK,UACV,4BAAKiK,EAAK/J,QACV,4BAAK+J,EAAKqP,YACV,4BAAKrP,EAAKsP,eACV,4BAAKtP,EAAKuP,UAAW,WAAa,WAClC,4BACI,kBAAC,IAAD,CACIpc,KAAK,SACL/C,UAAU,uBACVF,KAAK,KACLN,MAAM,UACNb,QAAS,kBAAI,EAAK2f,kBAAkB1O,KALxC,kBAoBxB,yBAAK5P,UAAU,qBACX,yBAAKA,UAAU,YACf,yBAAKwC,GAAG,gBAAR,eAUtB,KAGD3D,KAAKN,MAAM6f,iBACR,6BAASpe,UAAU,oBACf,kBAAC,IAAD,CAAQoG,GAAG,KAAKvB,GAAG,IAAIwB,GAAG,IAAIC,GAAG,IAAItG,UAAU,8BAC3C,0BAAMuG,SAAU1H,KAAK4G,aAAa7G,KAAKC,OACvC,kBAAC,IAAD,KACA,yBAAKmB,UAAU,0BACX,wBAAIA,UAAU,uBAAsB,qDAExC,kBAAC,IAAD,CAAaA,UAAU,QAEnB,kBAAC,IAAD,CAAUwG,MAAM,aAAaC,OAAK,EAAC1D,KAAK,QAAQX,MAAQvD,KAAKN,MAAMgD,MAAO1C,KAAKN,MAAMgD,MAAO,GAAI0B,SAAUpE,KAAKkC,kBAAkBnC,KAAKC,MAAO6H,UAAQ,EAACzI,MAAM,QAAQ8F,QAAQ,QAAQ4C,UAAQ,IAE5L,kBAAC,IAAD,CAAUF,OAAK,EAAC1D,KAAK,WAAWyD,MAAM,WAAWvD,SAAUpE,KAAKmf,qBAAqBpf,KAAKC,MAAO6H,UAAQ,EAACzI,MAAM,QAAQ8F,QAAQ,QAAQ4C,UAAQ,IAEhJ,kBAAC,IAAD,CAAUF,OAAK,EAAC1D,KAAK,WAAWyD,MAAM,mBAAmBvD,SAAUpE,KAAKugB,4BAA4BxgB,KAAKC,MAAO6H,UAAQ,EAACzI,MAAM,QAAQ8F,QAAQ,QAAQ4C,UAAQ,IAE/J,yBAAK3G,UAAU,yBACf,kBAAC,IAAD,CACI+C,KAAK,SACL/C,UAAU,uBACVoH,SAAO,EAAC5H,MAAM,QAHlB,YAUJ,kBAAC,IAAD,CAAgBQ,UAAU,uBAOpC,KAGDnB,KAAKN,MAAM4f,gBACR,6BAASne,UAAU,oBACf,kBAAC,IAAD,CAAQoG,GAAG,KAAKvB,GAAG,KAAKwB,GAAG,IAAIC,GAAG,IAAItG,UAAU,6BAC5C,0BAAMuG,SAAU1H,KAAK4G,aAAa7G,KAAKC,OACvC,kBAAC,IAAD,KACI,yBAAKmB,UAAU,oBACX,yBAAKM,IAAG,UAAKlC,EAAL,2BAAkCS,KAAKN,MAAMugB,aAAaxT,eAAiBE,IAAI,aACvF,4BAAK3M,KAAKN,MAAMugB,aAAapZ,WAGjC,yBAAK1F,UAAU,uBACX,yBAAKA,UAAU,iBACX,iEAEJ,yBAAKA,UAAU,gBACX,yBAAKA,UAAU,oBACX,yBAAKA,UAAU,oBACX,uBAAGA,UAAU,oBAAoBwO,cAAY,SADjD,UAIA,yBAAKxO,UAAU,qBACX,8BAAOnB,KAAKN,MAAMugB,aAAajZ,UAIvC,yBAAK7F,UAAU,oBACX,yBAAKA,UAAU,oBACX,uBAAGA,UAAU,eADjB,aAIA,yBAAKA,UAAU,qBACX,8BAAOnB,KAAKN,MAAMugB,aAAapZ,YAIvC,yBAAK1F,UAAU,oBACX,yBAAKA,UAAU,oBACX,uBAAGA,UAAU,sBAAsBwO,cAAY,SADnD,OAIA,yBAAKxO,UAAU,qBACX,8BAAOnB,KAAKN,MAAMugB,aAAalZ,OAIvC,yBAAK5F,UAAU,oBACX,yBAAKA,UAAU,oBACX,uBAAGA,UAAU,0BADjB,YAIA,yBAAKA,UAAU,qBACX,8BAAOnB,KAAKN,MAAMugB,aAAanZ,YAIvC,yBAAK3F,UAAU,oBACX,yBAAKA,UAAU,oBACX,uBAAGA,UAAU,eAAewO,cAAY,SAD5C,cAIA,yBAAKxO,UAAU,qBACX,8BAAOnB,KAAKN,MAAMugB,aAAaG,cAIvC,yBAAKjf,UAAU,oBACX,yBAAKA,UAAU,oBACX,uBAAGA,UAAU,YAAYwO,cAAY,SADzC,WAIA,yBAAKxO,UAAU,qBACX,yBAAKA,UAAU,iBACX,2BACI+C,KAAK,WACLP,GAAG,cACHxC,UAAU,SACViD,SAAUpE,KAAKwgB,WAAWzgB,KAAKC,MAC/BqI,SAAUrI,KAAKN,MAAMugB,aAAaK,YAEtC,2BAAOG,IAAI,cAActf,UAAU,WAAnC,MACA,2BAAOsf,IAAI,cAActf,UAAU,UAAnC,UAKZ,yBAAKA,UAAU,oBACX,yBAAKA,UAAU,oBACX,uBAAGA,UAAU,aAAawO,cAAY,SAD1C,iBAIA,yBAAKxO,UAAU,qBACX,8BAAOnB,KAAKN,MAAMugB,aAAaI,kBAK3C,yBAAKlf,UAAU,gBACX,8CAEJ,yBAAKA,UAAU,eACVnB,KAAKN,MAAMugB,aAAaS,cAAc3Y,KAAI,SAACC,EAAQC,GAChD,OACI,yBAAK9G,UAAU,mBAEV,EAAKzB,MAAMia,MAAM5R,KAAI,SAACgJ,GACnB,OAAGA,EAAKI,MAAQnJ,EAAO2Y,YAEf,yBAAKxf,UAAU,mBACX,yBAAKM,IAAG,UAAKlC,EAAL,2BAAkCwR,EAAKtE,eAAiBE,IAAI,iBAAqB,8BAAOoE,EAAKlK,WAI1G,QAGX,yBAAK1F,UAAU,qBACX,8BAAO6G,EAAO6K,mBAcpD,W,GAlcQhR,IAAMC,YCC1B8e,GAAW,WACf,IAAM1hB,EAAMT,EAAe,gBAE3B,SAAGS,IAAOA,EAAIiG,QAMV0b,GAAe,SAAC,GAAD,IAAc/e,EAAd,EAAGgf,UAAyBC,EAA5B,oCACnB,kBAAC,IAAD,iBAAWA,EAAX,CAAiBC,OAAQ,SAACvhB,GAAD,OACvBmhB,KACI,kBAAC,IAAD,CAAUrf,GAAG,UACb,kBAACO,EAAcrC,QAIjBwhB,GAAmB,SAAC,GAAD,IAAcnf,EAAd,EAAGgf,UAAyBC,EAA5B,oCACvB,kBAAC,IAAD,iBAAWA,EAAX,CAAiBC,OAAQ,SAACvhB,GAAD,OACvBmhB,KACI,kBAAC9e,EAAcrC,GACf,kBAAC,IAAD,CAAU8B,GAAG,WAoBN2f,G,uKAbX,OACE,kBAAC,IAAD,KACE,kBAAC,GAAD,CAAcC,OAAK,EAACrU,KAAK,IAAIgU,UAAWM,IACxC,kBAAC,GAAD,CAActU,KAAK,YAAYgU,UAAYtb,IAC3C,kBAAC,GAAD,CAAcsH,KAAK,SAASgU,UAAYta,IACxC,kBAAC,GAAD,CAAkBsG,KAAK,QAAQgU,UAAYO,KAC3C,kBAAC,IAAD,CAAOF,OAAK,EAACrU,KAAK,SAASgU,UAAY7B,KACvC,kBAAC,IAAD,CAAOnS,KAAK,gBAAgBgU,UAAa1B,U,GAV5Bvd,IAAMC,WCvBZ2X,G,uKARX,OACE,kBAAC,IAAD,KACE,kBAAC,GAAD,W,GALU3X,aCMZwf,GAAcC,QACW,cAA7BC,OAAO1a,SAAS2a,UAEe,UAA7BD,OAAO1a,SAAS2a,UAEhBD,OAAO1a,SAAS2a,SAASC,MACvB,2DA6BN,SAASC,GAAgBC,GACvBlN,UAAUmN,cACPC,SAASF,GACTthB,MAAK,SAAAyhB,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBviB,QACfgV,UAAUmN,cAAcO,WAK1BjjB,QAAQ0E,IAAI,6CAKZ1E,QAAQ0E,IAAI,4CAMrBqR,OAAM,SAAA9V,GACLD,QAAQC,MAAM,4CAA6CA,MC5DjEijB,IAASrB,OAAQ,kBAAC,GAAD,MAAU/W,SAASqY,eAAe,SDUpC,WACb,GAA6C,kBAAmB5N,UAAW,CAGzE,GADkB,IAAI6N,IAAIC,GAAwBhB,OAAO1a,UAC3C2b,SAAWjB,OAAO1a,SAAS2b,OAIvC,OAGFjB,OAAOzG,iBAAiB,QAAQ,WAC9B,IAAM6G,EAAK,UAAMY,GAAN,sBAENlB,GAwCX,SAAiCM,GAE/B1hB,MAAM0hB,GACHthB,MAAK,SAAAsb,GAGkB,MAApBA,EAASnb,SACuD,IAAhEmb,EAASxb,QAAQsiB,IAAI,gBAAgBlE,QAAQ,cAG7C9J,UAAUmN,cAAcc,MAAMriB,MAAK,SAAAyhB,GACjCA,EAAaa,aAAatiB,MAAK,WAC7BkhB,OAAO1a,SAAS+b,eAKpBlB,GAAgBC,MAGnB1M,OAAM,WACL/V,QAAQ0E,IACN,oEAzDAif,CAAwBlB,GAHxBD,GAAgBC,OCxBxBmB,I","file":"static/js/main.6ca613bb.chunk.js","sourcesContent":["export function getFromStorage(key) {\r\n    if (!key) {\r\n        return null;\r\n    }\r\n    try {\r\n        const valueStr = localStorage.getItem(key);\r\n        if (valueStr) {\r\n            return JSON.parse(valueStr);\r\n        }\r\n        return null;\r\n    } catch (err) {\r\n        return null;\r\n    }\r\n}\r\nexport function setInStorage(key, obj) {\r\n    if (!key) {\r\n        console.error('Error: Key is missing');\r\n    }\r\n    try {\r\n        localStorage.setItem(key, JSON.stringify(obj));\r\n    } catch (err) {\r\n        console.error(err);\r\n    }\r\n}","// export const RESTAPIUrl = 'http://192.168.100.118:5000';\r\n// export const SOCKET_URI = 'http://192.168.100.118:5000';\r\n\r\nexport const RESTAPIUrl = 'https://anonymous-video-chat.herokuapp.com';\r\nexport const SOCKET_URI = 'https://anonymous-video-chat.herokuapp.com';","import React from 'react';\r\nimport { MDBNavbar, MDBNavbarBrand, MDBNavbarNav, MDBNavbarToggler, MDBCollapse, MDBNavItem, MDBNavLink, MDBContainer, MDBMask, MDBView, MDBBtn, MDBIcon } from 'mdbreact';\r\nimport { RESTAPIUrl} from \"../../config/config\";\r\nimport './HomePage.css';\r\n\r\nclass FullPageIntroWithFixedTransparentNavbar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      collapse: false,\r\n      isWideEnough: false,\r\n      restricted: false\r\n    };\r\n    this.onClick = this.onClick.bind(this);\r\n  }\r\n  \r\n  componentDidMount() {\r\n    this.verifyAccount();\r\n  }\r\n\r\n  verifyAccount() {    \r\n    fetch(RESTAPIUrl + '/api/guest/ipverify', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n      }),\r\n    })\r\n    .then(res =>res.json())\r\n    .then(json => {\r\n      if(!json.status) {\r\n        this.setState({restricted: true});\r\n      }else {\r\n        this.setState({restricted: false});\r\n      }\r\n    })\r\n  }\r\n\r\n  onClick() {\r\n    this.setState({\r\n      collapse: !this.state.collapse,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <header>\r\n            \r\n            <MDBNavbar color=\"bg-primary\" fixed=\"top\" dark expand=\"md\" scrolling transparent>\r\n              <MDBContainer size=\"md\">            \r\n                <MDBNavbarBrand href=\"/\">\r\n                  <strong className=\"navbar-title\">Chat With Stranger</strong>\r\n                </MDBNavbarBrand>\r\n                {!this.state.isWideEnough && <MDBNavbarToggler onClick={this.onClick} />}\r\n                <MDBCollapse isOpen={this.state.collapse} navbar>\r\n                  <MDBNavbarNav right>\r\n                    <MDBNavItem>\r\n                      <MDBNavLink \r\n                        to=\"/guest\"\r\n                        disabled={this.state.restricted}\r\n                      >\r\n                        GUEST\r\n                      </MDBNavLink>\r\n                    </MDBNavItem>                   \r\n                  </MDBNavbarNav>\r\n                </MDBCollapse>\r\n              </MDBContainer>\r\n            </MDBNavbar>\r\n            \r\n\r\n          <MDBView src={process.env.PUBLIC_URL + '/background.jpg'}>\r\n            <MDBMask overlay=\"purple-light\" className=\"flex-center flex-column text-white text-center\">\r\n              <strong><h2>Random Video, Text & Audio Chat with Strangers</h2></strong><br></br>\r\n              <h5>It provides free random chat with cool people in private chat rooms.</h5>\r\n              <p>Chat with strangers & send pictures, videos in private free chat rooms. Meet & talk to strangers from all over the world.</p><br />      \r\n              <div className=\"btn-group\">\r\n                <MDBNavLink \r\n                  to={ !this.state.restricted? \"/guest\" : '/#'}\r\n                >\r\n                  <MDBBtn \r\n                    color=\"secondary\" \r\n                    size=\"lg\"\r\n                    disabled={this.state.restricted}\r\n                  >\r\n                    <MDBIcon icon=\"user-shield\" className=\"mr-1\" size=\"lg\" /> Chat as a guest\r\n                  </MDBBtn>\r\n                </MDBNavLink>                    \r\n              </div>\r\n              {this.state.restricted ? <p className=\"verify-alert\" >Your ip address is restricted from this chat</p> : null}\r\n            </MDBMask>\r\n          </MDBView>\r\n        </header>\r\n\r\n        <main>\r\n          <MDBContainer className=\"text-center my-5\">\r\n            <p align=\"justify\">Texting strangers might come naturally to some but others may have goose bumps when they are trying to text strangers. When you text strangers you are opening a window into a great text chat with strangers. The first few texts are the most difficult ones, once you have started texting and managed to move past opening texts the rest is easy peasy lemon squeezy. Sending a text to strangers is just like letter writing which was back then known as making pen pals. However, these days text to strangers chat room is a modern way of connecting with strangers. When you text strangers you are at the first step of a great conversation that could blossom into a good friendship or even a relationship. There are many examples in the world where people have found their soulmates when they were random texting strangers online. Many people online text with strangers in order to find some company and to talk to someone. When you send a text to strangers what happens next is a total mystery. It might end abruptly a couple of times whereas other times it might turn into a beautiful conversation and a pleasant experience.</p>\r\n          </MDBContainer>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FullPageIntroWithFixedTransparentNavbar;","import React, { Component } from 'react';\r\nimport './Signup.css';\r\nimport {\r\n    FormGroup,\r\n    FormControl,\r\n    HelpBlock,  \r\n    Button,\r\n    Alert,\r\n} from 'react-bootstrap';\r\nimport 'whatwg-fetch';\r\nimport { RESTAPIUrl } from '../../config/config';\r\n\r\nclass SignUp extends Component {\r\n    \r\n    constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    \r\n    this.handleChangeEmail = this.handleChangeEmail.bind(this);\r\n        \r\n    this.handleChangeConfirm = this.handleChangeConfirm.bind(this);\r\n        \r\n    this.handleChangeName = this.handleChangeName.bind(this);\r\n        \r\n    this.handleDismiss = this.handleDismiss.bind(this);\r\n        \r\n    this.handleShow = this.handleShow.bind(this);\r\n        \r\n        \r\n    this.signUpClicked = this.signUpClicked.bind(this);\r\n        \r\n    this.displayAlert = this.displayAlert.bind(this);\r\n\r\n    this.state = {\r\n      password: '',\r\n      email: '',\r\n      confPass: '',\r\n      name: '',\r\n      signInLoading: false,\r\n      show: false,\r\n      signupStatus: 'success',\r\n      signUpMessage: 'You have signed up successfully. Proceed to login.',\r\n        \r\n    };\r\n  }\r\n    \r\n  validateEmail() {\r\n    if(this.state.email.length ===0) return null;\r\n      // eslint-disable-next-line\r\n    var re = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n    return re.test(String(this.state.email).toLowerCase())?'success':'error';\r\n  }\r\n\r\n  getValidationState() {\r\n    const length = this.state.password.length;\r\n    if (length > 8) return 'success';\r\n    else if (length > 5) return 'warning';\r\n    else if (length > 0) return 'error';\r\n    return null;\r\n  }\r\n    \r\n  getValidationStateConf() {\r\n    const length = this.state.confPass.length;\r\n    if(length === 0 ) return null;\r\n      \r\n    else if( this.state.password === this.state.confPass ) return 'success';\r\n    \r\n    else return 'error';\r\n      \r\n    \r\n  }\r\n\r\n  handleChange(e) {\r\n    this.setState({ password: e.target.value });\r\n  }\r\n    \r\n  handleChangeEmail(e) {\r\n    this.setState({ email: e.target.value });\r\n  }\r\n\r\n  handleChangeConfirm(e) {\r\n    this.setState({ confPass: e.target.value });\r\n  }\r\n\r\n  handleChangeName(e) {\r\n    this.setState({ name: e.target.value });\r\n  }\r\n    \r\n  handleDismiss() {\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  handleShow() {\r\n    this.setState({ show: true });\r\n  }\r\n    \r\n  displayAlert() {\r\n      return (\r\n          <Alert bsStyle={this.state.signupStatus} onDismiss={this.handleDismiss} id=\"alertBox\">\r\n              \r\n              <p>\r\n                { this.state.signUpMessage }\r\n              </p>\r\n              \r\n            </Alert>\r\n\r\n      );\r\n  }\r\n\r\n    \r\n  signUpClicked(e) {\r\n      this.setState({ signInLoading : true });\r\n      //console.log(e);\r\n      const newUser = {\r\n        password: this.state.password,\r\n        name: this.state.name,\r\n        email: this.state.email,\r\n      };\r\n      \r\n      fetch( RESTAPIUrl+\"/api/account/signup\", {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(newUser),\r\n        })\r\n        .then(res => res.json())\r\n        .then(json => {\r\n            console.log('json', json);\r\n        \r\n        if(json.message === \"Signed Up\") {\r\n            this.setState({\r\n                signInLoading: false,\r\n                show: true,\r\n                signupStatus: 'success',\r\n                signUpMessage: 'You have signed up successfully. Proceed to login.',\r\n                name: '',\r\n                password: '',\r\n                confPass: '',\r\n                email: '',\r\n                \r\n            });\r\n        } else if ( json.message === 'Error: Account Already Exists') {\r\n            this.setState({\r\n                signInLoading: false,\r\n                show: true,\r\n                signupStatus: 'warning',\r\n                signUpMessage: 'Account already Exists. Procced to login',  \r\n                name: '',\r\n                password: '',\r\n                confPass: '',\r\n                email: '',\r\n            });\r\n        } else if( json.message === 'Error: Server Error') {\r\n            this.setState({\r\n                signInLoading: false,\r\n                show: true,\r\n                signupStatus: 'danger',\r\n                signUpMessage: 'Unexpected error. Please try again later.',\r\n                name: '',\r\n                password: '',\r\n                confPass: '',\r\n                email: '',\r\n                \r\n            });\r\n        }\r\n        \r\n            \r\n        })\r\n      \r\n  }\r\n\r\n    \r\n  \r\n    \r\n    render() {\r\n        return (\r\n            <div>\r\n              <form>\r\n                <FormGroup\r\n                    controlId=\"signUpName\">\r\n                    <FormControl\r\n                        type=\"text\"\r\n                        value={this.state.name}\r\n                        placeholder=\"Name\"\r\n                        onChange={this.handleChangeName}\r\n\r\n                        />\r\n\r\n                    </FormGroup>\r\n\r\n\r\n                <FormGroup\r\n                    controlId=\"signUpEmail\"\r\n                    validationState={this.validateEmail()}\r\n                    >\r\n\r\n                    <FormControl\r\n                        type=\"email\"\r\n                        value={this.state.email}\r\n                        placeholder=\"Email\"\r\n                        onChange={this.handleChangeEmail}\r\n                        />\r\n                    <FormControl.Feedback />    \r\n\r\n                </FormGroup>    \r\n\r\n\r\n                <FormGroup\r\n                  controlId=\"formBasicTextSignupPass\"\r\n                  validationState={this.getValidationState()}\r\n                >\r\n\r\n                  <FormControl\r\n                    type=\"password\"\r\n                    value={this.state.password}\r\n                    placeholder=\"Password\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                  <FormControl.Feedback />\r\n                  <HelpBlock id=\"passwordHelp\">Password must be minimum 8 characters long</HelpBlock>\r\n                </FormGroup>\r\n\r\n                <FormGroup\r\n                  controlId=\"formBasicTextSignupConfPass\"\r\n                  validationState={this.getValidationStateConf()}\r\n                >\r\n\r\n                  <FormControl\r\n                    type=\"password\"\r\n                    value={this.state.confPass}\r\n                    placeholder=\"Confirm Password\"\r\n                    onChange={this.handleChangeConfirm}\r\n                  />\r\n                  <FormControl.Feedback />\r\n\r\n                </FormGroup>\r\n\r\n                <Button\r\n                  block\r\n                  bsStyle=\"warning\"\r\n                  disabled = {this.state.signInLoading}\r\n                  onClick = {this.state.signInLoading ? null : this.signUpClicked}\r\n                  >\r\n                    {this.state.signInLoading ? 'Processing...' : 'Sign Up'}\r\n              </Button>\r\n\r\n\r\n              </form>\r\n                \r\n              { this.state.show ? this.displayAlert() : null}\r\n\r\n\r\n              \r\n        </div>\r\n          \r\n        );\r\n        \r\n    }\r\n}\r\n\r\nexport default SignUp;\r\n\r\n","import React, { Component } from 'react';\r\nimport './Login.css';\r\nimport {\r\n    FormGroup,\r\n    FormControl,\r\n    Button,\r\n    Alert,\r\n} from 'react-bootstrap';\r\nimport 'whatwg-fetch';\r\nimport {\r\n  setInStorage,\r\n} from '../../utils/storage';\r\nimport { RESTAPIUrl } from '../../config/config';\r\n\r\n\r\nclass LogIn extends Component {\r\n    \r\n    constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    \r\n    this.handleChangeEmail = this.handleChangeEmail.bind(this);\r\n    \r\n    this.logInClicked = this.logInClicked.bind(this);\r\n        \r\n    this.handleDismiss = this.handleDismiss.bind(this);\r\n        \r\n    this.handleShow = this.handleShow.bind(this); \r\n    \r\n        \r\n    this.displayAlert = this.displayAlert.bind(this);\r\n\r\n    this.state = {\r\n      password: '',\r\n      email: '',\r\n      logInLoading: false,\r\n      signInError: '',\r\n      show: false,\r\n      logInStatus: 'danger',\r\n        \r\n    };\r\n  }\r\n    \r\n  validateEmail() {\r\n    if(this.state.email.length ===0) return null;\r\n      // eslint-disable-next-line\r\n    var re = /^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i;\r\n    return re.test(String(this.state.email).toLowerCase())?'success':'error';\r\n  }\r\n\r\n  getValidationState() {\r\n    const length = this.state.password.length;\r\n    if (length > 8) return 'success';\r\n    else if (length > 5) return 'warning';\r\n    else if (length > 0) return 'error';\r\n    return null;\r\n  }\r\n\r\n  handleChange(e) {\r\n    this.setState({ password: e.target.value });\r\n  }\r\n    \r\n  handleChangeEmail(e) {\r\n    this.setState({ email: e.target.value });\r\n  }\r\n    \r\n  logInClicked() {\r\n      const {\r\n          email, \r\n          password,\r\n      } = this.state;\r\n      \r\n      this.setState({\r\n          logInLoading: true,\r\n      });\r\n      \r\n      fetch( RESTAPIUrl + '/api/account/signin', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            email,\r\n            password,\r\n          }),\r\n        }).then(res => res.json())\r\n          .then(json => {\r\n            console.log('json', json);\r\n            if (json.success) {\r\n              setInStorage('the_login_n_signup', { token: json.token, name: json.name });\r\n              this.setState({\r\n                signInError: 'Welcome ' + json.name + '!',\r\n                logInLoading: false,\r\n                password: '',\r\n                email: '',\r\n                token: json.token,\r\n                show: true,\r\n                logInStatus: 'success',\r\n              });\r\n                \r\n              this.props.stateChanger({\r\n                  loggedIn: true,\r\n                  token: json.token,\r\n                  loggedInName: json.name,\r\n                  logOutButtonStatus: 'warning',\r\n              });\r\n            } else {\r\n              this.setState({\r\n                signInError: json.message,\r\n                logInLoading: false,\r\n                show: true,\r\n                logInStatus: 'danger',\r\n              });\r\n            }\r\n          \r\n          })\r\n      \r\n  }\r\n    \r\n\r\n  handleDismiss() {\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  handleShow() {\r\n    this.setState({ show: true });\r\n  }\r\n    \r\n  displayAlert() {\r\n      return (\r\n          <Alert bsStyle={this.state.logInStatus} onDismiss={this.handleDismiss} id=\"alertBox\">\r\n              \r\n              <p>\r\n                { this.state.signInError }\r\n              </p>\r\n              \r\n            </Alert>\r\n\r\n      );\r\n  }\r\n    \r\n    \r\n    \r\n  \r\n    \r\n    render() {\r\n        return (\r\n            <div>\r\n              <form>\r\n                <FormGroup\r\n                    controlId=\"LogInEmail\"\r\n                    validationState={this.validateEmail()}\r\n                    >\r\n\r\n                    <FormControl\r\n                        type=\"email\"\r\n                        value = {this.state.email}\r\n                        placeholder=\"Email\"\r\n                        onChange={this.handleChangeEmail}\r\n                        />\r\n                    <FormControl.Feedback />    \r\n\r\n                </FormGroup>    \r\n\r\n\r\n                <FormGroup\r\n                  controlId=\"formBasicText\"\r\n                  validationState={this.getValidationState()}\r\n                >\r\n\r\n                  <FormControl\r\n                    type=\"password\"\r\n                    value={this.state.password}\r\n                    placeholder=\"Password\"\r\n                    onChange={this.handleChange}\r\n                  />\r\n                  <FormControl.Feedback />\r\n\r\n                </FormGroup>\r\n\r\n\r\n\r\n              </form>\r\n            \r\n          <Button\r\n                  block\r\n                  bsStyle=\"success\"\r\n                  disabled = {this.state.logInLoading}\r\n                  onClick = {this.state.logInLoading ? null : this.logInClicked}\r\n                  >\r\n                    {this.state.logInLoading ? 'Authenticating...' : 'Log In'}\r\n          </Button>\r\n        \r\n        { this.state.show ? this.displayAlert() : null}\r\n\r\n            \r\n        </div>\r\n            \r\n        );\r\n        \r\n    }\r\n}\r\n\r\nexport default LogIn;\r\n\r\n","import React, { Component } from 'react';\r\nimport './UserSign.css';\r\nimport { \r\n     Grid, \r\n     Row,\r\n     Col,\r\n     Tabs,\r\n     Tab,\r\n     Button \r\n       } from 'react-bootstrap'; \r\nimport SignUp from '../Signup/Signup';\r\nimport LogIn from '../Login/Login';\r\nimport {\r\n  getFromStorage,\r\n} from '../../utils/storage';\r\nimport { RESTAPIUrl } from '../../config/config';\r\n\r\nclass UserSign extends Component { \r\n    constructor( props, context) {\r\n        super(props, context);\r\n        \r\n        this.stateChanger = this.stateChanger.bind(this);\r\n        this.logOutClicked = this.logOutClicked.bind(this);\r\n        \r\n        this.state = {\r\n            loggedIn: false,\r\n            token: '',\r\n            loggedInName: 'Unnamed Ashok Kumar',\r\n            logOutButtonStatus: 'warning',\r\n            logOutLoadingMessage: 'Log Out',\r\n            logOutLoading: false,\r\n            \r\n            \r\n            \r\n        }\r\n    }\r\n    \r\n    stateChanger(newState) {\r\n        this.setState(newState);\r\n    }\r\n    \r\n    componentDidMount() {\r\n    const obj = getFromStorage('the_login_n_signup');\r\n    if (obj && obj.token) {\r\n      const { token } = obj;\r\n      const { name } = obj;\r\n      // Verify token\r\n      fetch( RESTAPIUrl + '/api/account/verify?token=' + token)\r\n        .then(res => res.json())\r\n        .then(json => {\r\n          if (json.success) {\r\n            this.setState({\r\n              token,\r\n              loggedInName: name,\r\n              logOutLoading: false,\r\n              loggedIn: true,\r\n            });\r\n          } else {\r\n            this.setState({\r\n              logOutLoading: false,\r\n            });\r\n          }\r\n        });\r\n    } else {\r\n      this.setState({\r\n        logOutLoading: false,\r\n      });\r\n    }\r\n  }\r\n    \r\n    logOutClicked() {\r\n        this.setState({\r\n          logOutLoading: true,\r\n          logOutLoadingMessage: 'Logging Out...',\r\n          logOutButtonStatus: 'info',\r\n        });\r\n        const obj = getFromStorage('the_login_n_signup');\r\n        if (obj && obj.token) {\r\n          const { token } = obj;\r\n          // Verify token\r\n          fetch(RESTAPIUrl + '/api/account/logout?token=' + token)\r\n            .then(res => {\r\n              //console.log(res);\r\n              return res.json();\r\n          })\r\n            .then(json => {\r\n              if (json.success) {\r\n                this.setState({\r\n                  token: '',\r\n                  logOutLoading: false,\r\n                  loggedIn: false,\r\n                });\r\n              } else {\r\n                this.setState({\r\n                  logOutLoading: false,\r\n                });\r\n              }\r\n            });\r\n        } else {\r\n          this.setState({\r\n            logOutLoading: false,\r\n          });\r\n        }\r\n        \r\n    }\r\n    \r\n    \r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <header className=\"App-header\">\r\n \r\n          <h1 className=\"App-title\">Login Or Sign-Up</h1>\r\n        </header>\r\n            <Grid>\r\n                <Row>\r\n                    <Col md={4}></Col>\r\n                    <Col xs={12} md={4}>\r\n                        {this.state.loggedIn ? \r\n                            <div><h1>Welcome {this.state.loggedInName}!</h1> \r\n                            <Button\r\n                                  block\r\n                                  bsStyle= {this.state.logOutButtonStatus}\r\n                                  disabled = {this.state.logOutLoading}\r\n                                  onClick = {this.state.logOutLoading ? null : this.logOutClicked}\r\n                                  >\r\n                                    {this.state.logOutButtonStatus ? 'Log Out' : 'Logging Out'}\r\n                            </Button>\r\n                            </div>\r\n                            : \r\n                            \r\n                            <div className = \"loginBoxContainer\">\r\n                            <Tabs defaultActiveKey={1} id=\"uncontrolled-tab-example\">\r\n                                  <Tab eventKey={1} title=\"Login\" className=\"tabContent\">\r\n                                    <LogIn stateChanger = {this.stateChanger}/>\r\n                                  </Tab>\r\n                                  <Tab eventKey={2} title=\"Sign Up\" className=\"tabContent\">\r\n                                    <SignUp />\r\n                                  </Tab>\r\n                            </Tabs>\r\n                        </div>}\r\n                    \r\n                    </Col>\r\n                    <Col md={4}></Col>\r\n                </Row>\r\n            </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserSign;\r\n","export const countries = [\r\n    \"Afghanistan\",\r\n    \"Albania\",\r\n    \"Algeria\",\r\n    \"Andorra\",\r\n    \"Angola\",\r\n    \"Antigua and Barbuda\",\r\n    \"Argentina\",\r\n    \"Armenia\",\r\n    \"Australia\",\r\n    \"Austria\",\r\n    \"Azerbaijan\",\r\n    \"Bahamas\",\r\n    \"Bahrain\",\r\n    \"Bangladesh\",\r\n    \"Barbados\",\r\n    \"Belarus\",\r\n    \"Belgium\",\r\n    \"Belize\",\r\n    \"Benin\",\r\n    \"Bhutan\",\r\n    \"Bolivia\",\r\n    \"Bosnia and Herzegovina\",\r\n    \"Botswana\",\r\n    \"Brazil\",\r\n    \"Brunei\",\r\n    \"Bulgaria\",\r\n    \"Burkina Faso\",\r\n    \"Burundi\",\r\n    \"Cabo Verde\",\r\n    \"Cambodia\",\r\n    \"Cameroon\",\r\n    \"Canada\",\r\n    \"Central African Republic (CAR)\",\r\n    \"Chad\",\r\n    \"Chile\",\r\n    \"China\",\r\n    \"Colombia\",\r\n    \"Comoros\",\r\n    \"Costa Rica\",\r\n    \"Cote d'Ivoire\",\r\n    \"Croatia\",\r\n    \"Cuba\",\r\n    \"Cyprus\",\r\n    \"Czech Republic\",\r\n    \"Denmark\",\r\n    \"Djibouti\",\r\n    \"Dominica\",\r\n    \"Dominican Republic\",\r\n    \"Ecuador\",\r\n    \"Egypt\",\r\n    \"El Salvador\",\r\n    \"Equatorial Guinea\",\r\n    \"Eritrea\",\r\n    \"Estonia\",\r\n    \"Ethiopia\",\r\n    \"Fiji\",\r\n    \"Finland\",\r\n    \"France\",\r\n    \"Gabon\",\r\n    \"Gambia\",\r\n    \"Georgia\",\r\n    \"Germany\",\r\n    \"Ghana\",\r\n    \"Greece\",\r\n    \"Grenada\",\r\n    \"Guatemala\",\r\n    \"Guinea\",\r\n    \"Guinea-Bissau\",\r\n    \"Guyana\",\r\n    \"Haiti\",\r\n    \"Honduras\",\r\n    \"Hungary\",\r\n    \"Iceland\",\r\n    \"India\",\r\n    \"Indonesia\",\r\n    \"Iran\",\r\n    \"Iraq\",\r\n    \"Ireland\",\r\n    \"Israel\",\r\n    \"Italy\",\r\n    \"Jamaica\",\r\n    \"Japan\",\r\n    \"Jordan\",\r\n    \"Kazakhstan\",\r\n    \"Kenya\",\r\n    \"Kiribati\",\r\n    \"Kosovo\",\r\n    \"Kuwait\",\r\n    \"Kyrgyzstan\",\r\n    \"Laos\",\r\n    \"Latvia\",\r\n    \"Lebanon\",\r\n    \"Lesotho\",\r\n    \"Liberia\",\r\n    \"Libya\",\r\n    \"Liechtenstein\",\r\n    \"Lithuania\",\r\n    \"Luxembourg\",\r\n    \"Macedonia (FYROM)\",\r\n    \"Madagascar\",\r\n    \"Malawi\",\r\n    \"Malaysia\",\r\n    \"Maldives\",\r\n    \"Mali\",\r\n    \"Malta\",\r\n    \"Marshall Islands\",\r\n    \"Mauritania\",\r\n    \"Mauritius\",\r\n    \"Mexico\",\r\n    \"Micronesia\",\r\n    \"Moldova\",\r\n    \"Monaco\",\r\n    \"Mongolia\",\r\n    \"Montenegro\",\r\n    \"Morocco\",\r\n    \"Mozambique\",\r\n    \"Myanmar (Burma)\",\r\n    \"Namibia\",\r\n    \"Nauru\",\r\n    \"Nepal\",\r\n    \"Netherlands\",\r\n    \"New Zealand\",\r\n    \"Nicaragua\",\r\n    \"Niger\",\r\n    \"Nigeria\",\r\n    \"North Korea\",\r\n    \"Norway\",\r\n    \"Oman\",\r\n    \"Pakistan\",\r\n    \"Palau\",\r\n    \"Palestine\",\r\n    \"Panama\",\r\n    \"Papua New Guinea\",\r\n    \"Paraguay\",\r\n    \"Peru\",\r\n    \"Philippines\",\r\n    \"Poland\",\r\n    \"Portugal\",\r\n    \"Qatar\",\r\n    \"Romania\",\r\n    \"Russia\",\r\n    \"Rwanda\",\r\n    \"Saint Kitts and Nevis\",\r\n    \"Saint Lucia\",\r\n    \"Saint Vincent and the Grenadines\",\r\n    \"Samoa\",\r\n    \"San Marino\",\r\n    \"Sao Tome and Principe\",\r\n    \"Saudi Arabia\",\r\n    \"Senegal\",\r\n    \"Serbia\",\r\n    \"Seychelles\",\r\n    \"Sierra Leone\",\r\n    \"Singapore\",\r\n    \"Slovakia\",\r\n    \"Slovenia\",\r\n    \"Solomon Islands\",\r\n    \"Somalia\",\r\n    \"South Africa\",\r\n    \"South Korea\",\r\n    \"South Sudan\",\r\n    \"Spain\",\r\n    \"Sri Lanka\",\r\n    \"Sudan\",\r\n    \"Suriname\",\r\n    \"Swaziland\",\r\n    \"Sweden\",\r\n    \"Switzerland\",\r\n    \"Syria\",\r\n    \"Taiwan\",\r\n    \"Tajikistan\",\r\n    \"Tanzania\",\r\n    \"Thailand\",\r\n    \"Timor-Leste\",\r\n    \"Togo\",\r\n    \"Tonga\",\r\n    \"Trinidad and Tobago\",\r\n    \"Tunisia\",\r\n    \"Turkey\",\r\n    \"Turkmenistan\",\r\n    \"Tuvalu\",\r\n    \"Uganda\",\r\n    \"Ukraine\",\r\n    \"United Arab Emirates (UAE)\",\r\n    \"United Kingdom (UK)\",\r\n    \"United States of America (USA)\",\r\n    \"Uruguay\",\r\n    \"Uzbekistan\",\r\n    \"Vanuatu\",\r\n    \"Vatican City (Holy See)\",\r\n    \"Venezuela\",\r\n    \"Vietnam\",\r\n    \"Yemen\",\r\n    \"Zambia\",\r\n    \"Zimbabwe\"\r\n];","import React from 'react';\r\nimport { MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBModalFooter, MDBInputSelect } from 'mdbreact';\r\nimport 'whatwg-fetch';\r\nimport {\r\n  NotificationContainer,\r\n  NotificationManager\r\n} from \"react-notifications\";\r\nimport { setInStorage } from '../../utils/storage';\r\nimport { RESTAPIUrl } from '../../config/config';\r\nimport { countries } from \"../../config/country\";\r\nimport './GuestSign.css';\r\n\r\nclass GuestSign extends React.Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.handleChangeName = this.handleChangeName.bind(this);\r\n    this.handleChangeLocation = this.handleChangeLocation.bind(this);\r\n    this.handleChangeAge = this.handleChangeAge.bind(this);\r\n    this.handleChangeGender = this.handleChangeGender.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n\r\n    this.state = {\r\n      userName: '',\r\n      location: 'Canada',\r\n      age: 28,\r\n      gender: 'Male',\r\n      loginLoading: false,\r\n    }\r\n  }\r\n\r\n  handleChangeName(e) {\r\n    this.setState({ userName: e.target.value });\r\n  }\r\n\r\n  handleChangeLocation(e) {\r\n    this.setState({ location: e.target.value });\r\n  }\r\n\r\n  handleChangeAge(value) {\r\n    this.setState({ age: value });\r\n  }\r\n\r\n  handleChangeGender(e) {\r\n    this.setState({ gender: e.target.value });\r\n  }\r\n  \r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const { userName, location, age, gender } = this.state;\r\n    \r\n    this.setState ({ \r\n      loginLoading: true, \r\n    });\r\n\r\n    fetch(RESTAPIUrl + '/api/guest/signin', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        userName,\r\n        location,\r\n        age,\r\n        gender\r\n      }),\r\n    }).then(res =>res.json())\r\n      .then(json => {\r\n        if(json.status) {\r\n          setInStorage('guest_signin', {token:json.token});\r\n          this.props.history.push(\"/chat\");\r\n        } else {\r\n          NotificationManager.error(\r\n            `${json.message}`\r\n          );\r\n        }\r\n      })\r\n  }\r\n  render() {\r\n    return (\r\n        <MDBRow>\r\n          <NotificationContainer /> \r\n          <MDBCol sm=\"10\" md=\"7\" lg=\"6\" xl=\"4\" className=\"mx-auto mt-3 sign-container\">\r\n            <form onSubmit={this.handleSubmit}>\r\n              <MDBCard>\r\n              <div className=\"text-center sign-title\">\r\n                <h5 className=\"dark-grey-text mb-5\"><strong>Sign in</strong></h5>\r\n              </div>\r\n              <MDBCardBody className=\"mx-4\">\r\n                \r\n                <MDBInput label=\"Your Name\" group type=\"text\" onChange={this.handleChangeName} validate error=\"wrong\" success=\"right\" required/>\r\n                \r\n                <select className=\"browser-default custom-select\" id=\"location\" name=\"location\" value={this.state.location} onChange={this.handleChangeLocation} >\r\n                  <option>Choose your location</option>\r\n                  {\r\n                    countries.map((object, i) => {\r\n                      return <option value={object} key={i}>{object}</option>\r\n                    })\r\n                  }\r\n                </select>\r\n\r\n                <label className=\"form-label\" >Your Age</label>\r\n                <MDBInputSelect  id=\"age\" name=\"age\" getValue={this.handleChangeAge} min={13} max={99} value={this.state.age} className='mb-2' />\r\n                \r\n                <label className=\"form-label\">Your Gender</label>\r\n                <div className=\"radio-group\">\r\n                  <div className=\"radio\">\r\n                    <input id=\"radio-1\" name=\"radio\" type=\"radio\" value=\"Male\" onChange={this.handleChangeGender} checked={this.state.gender === 'Male'} />\r\n                    <label htmlFor=\"radio-1\" className=\"radio-label\">Male</label>\r\n                  </div>\r\n\r\n                  <div className=\"radio\">\r\n                    <input id=\"radio-2\" name=\"radio\" type=\"radio\" value=\"Female\" onChange={this.handleChangeGender} checked={this.state.gender === 'Female'} />\r\n                    <label  htmlFor=\"radio-2\" className=\"radio-label\">Female</label>\r\n                  </div>  \r\n                </div>\r\n\r\n                <div className=\"text-center pt-3 mb-3\">\r\n                  <MDBBtn \r\n                    type=\"submit\" \r\n                    className=\"btn-block z-depth-1a\" \r\n                    outline color=\"info\"\r\n                    >\r\n                      {this.state.logInLoading ? 'Authenticating...' : 'Start Chat'}\r\n                  </MDBBtn>\r\n                </div>\r\n\r\n              </MDBCardBody>\r\n              <MDBModalFooter className=\"mx-5 pt-3 mb-1\">\r\n                \r\n              </MDBModalFooter>\r\n            </MDBCard>\r\n            </form>\r\n          </MDBCol>\r\n        </MDBRow>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GuestSign;","import React, { Component } from \"react\";\r\nimport InputGroup from \"react-bootstrap/lib/InputGroup\";\r\nimport Row from \"react-bootstrap/lib/Row\";\r\nimport FormGroup from \"react-bootstrap/lib/FormGroup\";\r\nimport {\r\n  MessageList,\r\n  Navbar as NavbarComponent,\r\n  Avatar \r\n} from \"react-chat-elements\";\r\nimport { MDBBtn ,MDBIcon, MDBDropdown, MDBDropdownToggle, MDBDropdownMenu, MDBDropdownItem } from 'mdbreact';\r\n\r\n// MDI icon import\r\nimport Icon from '@mdi/react'\r\nimport { mdiPhone, mdiVideoOutline, mdiDotsVertical, mdiConsoleNetworkOutline } from '@mdi/js'\r\n\r\n// Emoji icon module\r\nimport { Picker } from 'emoji-mart';\r\nimport 'emoji-mart/css/emoji-mart.css';\r\n\r\n// Font Selector module- draft.js\r\nimport { EditorState, convertToRaw, ContentState, getDefaultKeyBinding, KeyBindingUtil } from 'draft-js';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport { SketchPicker } from 'react-color';\r\nimport { toggleCustomInlineStyle } from 'draftjs-utils';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\n\r\nimport { RESTAPIUrl } from '../config/config';\r\n/**\r\n *\r\n * ChatBox Component\r\n *\r\n * displays all the messages from chat history.\r\n * renders message text box for input.\r\n */\r\n\r\n\r\nexport default class ChatBox extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showEmojiPicker: false,\r\n      toolbar_show : false,\r\n      showColorPicker: false,\r\n      pickerColor: 'RGB(0,0,0)',\r\n      messageText: \"\",\r\n      editorState: EditorState.createEmpty(),\r\n    }\r\n\r\n    this.onAttachFile = this.onAttachFile.bind(this);\r\n    this.setDomEditorRef = ref => this.domEditor = ref;\r\n  }\r\n  \r\n  componentDidMount() {\r\n    // this.domEditor.focusEditor();\r\n  }\r\n\r\n  onSendClicked() {\r\n    // if (!this.state.messageText) {\r\n    //   return;\r\n    // }\r\n    // this.props.onSendClicked(this.state.messageText);\r\n    // this.setState({ messageText: \"\" });\r\n    this.props.onSendClicked(draftToHtml(convertToRaw(this.state.editorState.getCurrentContent())));\r\n    this.setState({editorState:EditorState.createEmpty()});\r\n\r\n    this.domEditor.focusEditor();\r\n    \r\n    document.onkeydown = function (e) {\r\n      e.preventDefault();\r\n      return false;\r\n    };\r\n    \r\n    setTimeout(\r\n      function() {\r\n        const newState = toggleCustomInlineStyle(this.state.editorState, 'color', this.state.pickerColor);\r\n        this.setState({\r\n          editorState: newState\r\n        });\r\n\r\n        document.onkeydown = function (e) {\r\n          return true;\r\n        };\r\n      }\r\n      .bind(this),\r\n      500\r\n    );\r\n  }\r\n  \r\n  onMessageInputChange(e) {\r\n    this.setState({ messageText: e.target.value });\r\n  }\r\n  /**\r\n   *\r\n   * @param {KeyboardEvent} e\r\n   *\r\n   * listen for enter pressed and sends the message.\r\n   */\r\n  onMessageKeyPress(e) {\r\n    if (e.key === \"Enter\") {\r\n      this.onSendClicked();\r\n    }\r\n  }\r\n\r\n  toggleEmojiPicker() {\r\n    this.setState({\r\n      showEmojiPicker: !this.state.showEmojiPicker,\r\n    });\r\n  }\r\n  \r\n  addEmoji(emoji) {\r\n    // if(this.state.messageText) {\r\n    //   var { messageText } = this.state;\r\n    // } else {\r\n    //   var messageText = '';\r\n    // }\r\n    // const text = `${messageText}${emoji.native}`;\r\n  \r\n    // this.setState({\r\n    //   messageText: text,\r\n    // });\r\n    // const selectEmoji = document.querySelector('[title=' + emoji.id +']');\r\n\r\n    const { editorState } = this.state;\r\n    const convertHtml = draftToHtml(convertToRaw(editorState.getCurrentContent()));\r\n    const subHtml = convertHtml.substring(0,(convertHtml.length-5));\r\n    // const totalHtml = `${subHtml}${emoji.native}</p>`;\r\n    const totalHtml = `${subHtml} :${emoji.id}: </p>`;\r\n    \r\n    const blocksFromHtml = htmlToDraft(totalHtml);\r\n    const { contentBlocks, entityMap } = blocksFromHtml;\r\n    const contentState = ContentState.createFromBlockArray(contentBlocks, entityMap);\r\n    const editorStateChange = EditorState.createWithContent(contentState);\r\n    this.setState({editorState: editorStateChange});\r\n  }\r\n\r\n  closeEmojiPicker() {\r\n    this.setState({showEmojiPicker: false});\r\n  }\r\n\r\n  onEditorStateChange =  (editorState) => {\r\n    this.setState({\r\n      editorState,\r\n    });\r\n  };\r\n\r\n  onFocusEditor() {\r\n    document.onkeydown = function (e) {\r\n      e.preventDefault();\r\n      return false;\r\n    };\r\n\r\n    console.log(\"editor state focus\")\r\n    \r\n    setTimeout(\r\n      function() {\r\n\r\n        const tempState = toggleCustomInlineStyle(this.state.editorState, 'color', 'RGB(0,0,1)');\r\n        this.setState({\r\n          editorState: tempState\r\n          \r\n        }, () => {\r\n          const newState = toggleCustomInlineStyle(this.state.editorState, 'color', this.state.pickerColor);\r\n          this.setState({\r\n            editorState: newState,\r\n            showColorPicker: false\r\n            \r\n          });\r\n\r\n          document.onkeydown = function (e) {\r\n            return true;\r\n          };\r\n        });        \r\n      }\r\n      .bind(this),\r\n      500\r\n    );\r\n  }\r\n\r\n\r\n  toggle_toolbar() {   \r\n    this.setState({toolbar_show: !this.state.toolbar_show});\r\n  }\r\n\r\n  keyBindingFunction(event) {\r\n\r\n    // Call onTyping function to let contact user typing status\r\n    this.props.onTyping();\r\n\r\n    // Set original color state when editor state is empty\r\n    if ( event.key === 'Backspace') {\r\n      this.onFocusEditor();\r\n    }\r\n\r\n    if (KeyBindingUtil.hasCommandModifier(event) && event.ctrlKey && event.key === 'Enter') {\r\n      return getDefaultKeyBinding(event);\r\n    }\r\n  \r\n    if (event.key === 'Enter') {\r\n      this.onSendClicked();\r\n      return;\r\n    }\r\n    return getDefaultKeyBinding(event);\r\n  }\r\n\r\n  findTargetUser() {\r\n    this.props.findTargetUser();\r\n  }\r\n\r\n  onAttachFile(e) {\r\n    e.preventDefault();\r\n\r\n    // this.props.onAttachFile();\r\n    const data = new FormData();\r\n    data.append('attachFile', this.attachFile.files[0]);\r\n    fetch(`${RESTAPIUrl}/api/attach-file`, {\r\n      method: 'POST',\r\n      body: data,\r\n    })\r\n    .then(res => res.json())\r\n    .then(json => {\r\n      if(json.status) {\r\n        const { editorState } = this.state;\r\n        const convertHtml = draftToHtml(convertToRaw(editorState.getCurrentContent()));\r\n        var subHtml = '';\r\n        // if(convertHtml.substring(convertHtml.length-5) == '</p>')\r\n        //   subHtml = convertHtml.substring(0,(convertHtml.length-5));\r\n        // else \r\n          subHtml = convertHtml.substring(0,(convertHtml.length));\r\n        const fileContainer = `<img src=\"${RESTAPIUrl}/public/uploads/${json.fileName}\" alt=\"${RESTAPIUrl}/public/uploads/${json.fileName}\">`;\r\n        const totalHtml = `${subHtml}${fileContainer}`;\r\n\r\n        const blocksFromHtml = htmlToDraft(totalHtml);\r\n        const { contentBlocks, entityMap } = blocksFromHtml;\r\n        const contentState = ContentState.createFromBlockArray(contentBlocks, entityMap);\r\n        const editorStateChange = EditorState.createWithContent(contentState);\r\n        this.setState({editorState: editorStateChange});\r\n\r\n        // Focus editor box after file select.\r\n        this.domEditor.focusEditor();\r\n\r\n        // Reset File input \r\n        this.attachFile.value='';\r\n\r\n      }\r\n    })\r\n  }\r\n  image_thumbs() {\r\n    console.log(\"image thumbs start\");\r\n  }\r\n\r\n  toggleColorPicker() {\r\n    this.setState({showColorPicker: !this.state.showColorPicker})\r\n  }\r\n  hideColorPicker() {\r\n    this.setState({showColorPicker: false});\r\n  }\r\n\r\n  onApplyColorPicker() {\r\n\r\n    this.domEditor.focusEditor();\r\n    // document.onkeydown = function (e) {\r\n    //   console.log(\"apply color picker\")\r\n    //   e.preventDefault();\r\n    //   return false;\r\n    // };\r\n    \r\n    // setTimeout(\r\n    //   function() {\r\n    //     const newState = toggleCustomInlineStyle(this.state.editorState, 'color', this.state.pickerColor);\r\n    //     this.setState({\r\n    //       editorState: newState,\r\n    //       showColorPicker: false\r\n    //     });\r\n\r\n    //     document.onkeydown = function (e) {\r\n    //       return true;\r\n    //     };\r\n    //   }\r\n    //   .bind(this),\r\n    //   500\r\n    // );\r\n  }\r\n  handleChangeComplete = (color) => {\r\n    const rgbColor=`RGB(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b})`;\r\n      this.setState({pickerColor: rgbColor});\r\n  }\r\n\r\n  callWithVideo (video) {\r\n    const config = { audio: true, video };\r\n    // return () => this.props.targetUser.id && this.props.startCall(true, this.props.targetUser.id, config);\r\n    this.props.startCall(true, this.props.targetUser.id, config);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>        \r\n          <div>\r\n            <NavbarComponent\r\n              left={\r\n                <div>\r\n                  <Avatar\r\n                    src={`${RESTAPIUrl}/public/profile/${this.props.signedInUser.profile_image}?${this.props.imageHash}`}\r\n                    alt={\"logo\"}\r\n                    size=\"large\"\r\n                    type=\"circle flexible\"\r\n                  />\r\n                  <div className=\"user-info\">\r\n                    <p className=\"navBarText user-name\">{this.props.signedInUser.userName}</p>\r\n                    <p className=\"navBarText user-title\">{this.props.signedInUser.gender}   {this.props.signedInUser.age} {this.props.signedInUser.location}</p>\r\n                  </div>\r\n                </div>\r\n              }\r\n              center={\r\n                <div>\r\n                  <MDBBtn \r\n                    className=\"action-btn next-user\" \r\n                    color=\"primary\"\r\n                    onClick={this.findTargetUser.bind(this)}\r\n                  >\r\n                    <img alt=\"Arrow, person, profile, right, user icon\" className=\"n3VNCb\" src={`${RESTAPIUrl}/public/find-user.webp`} />\r\n                  </MDBBtn>\r\n                </div>\r\n                \r\n                \r\n              }\r\n              right={\r\n                <div>\r\n                  <div className=\"navbar-right\">     \r\n                    <MDBBtn \r\n                      className=\"action-btn phone\" \r\n                      color=\"primary\"\r\n                      onClick={this.callWithVideo.bind(this, false)}\r\n                      disabled={typeof this.props.targetUser.id == 'undefined' ? true : false }\r\n                    >\r\n                      <Icon path={mdiPhone}\r\n                        size={1}\r\n                        horizontal\r\n                        vertical\r\n                        rotate={180}\r\n                      />\r\n                    </MDBBtn>\r\n                    \r\n                    <MDBBtn \r\n                      className=\"action-btn video\" \r\n                      color=\"primary\"\r\n                      onClick={this.callWithVideo.bind(this, true)}\r\n                      disabled={typeof this.props.targetUser.id == 'undefined' ? true : false }\r\n                    >\r\n                      <Icon path={mdiVideoOutline}\r\n                        size={1}\r\n                        horizontal\r\n                        vertical\r\n                        rotate={180}\r\n                      />\r\n                    </MDBBtn>\r\n                    \r\n                    <MDBDropdown>\r\n                      <MDBDropdownToggle caret color=\"primary\" className=\"action-btn\">\r\n                        <Icon path={mdiDotsVertical}\r\n                          size={1}\r\n                          horizontal\r\n                          vertical\r\n                        />\r\n                      </MDBDropdownToggle>\r\n                      <MDBDropdownMenu basic>\r\n                        <MDBDropdownItem\r\n                          onClick={()=> {this.props.onProfileModalShow(true)}}\r\n                        >\r\n                          Your Profile\r\n                        </MDBDropdownItem>\r\n                        <MDBDropdownItem\r\n                          onClick={()=> {this.props.onSearchSettingModalShow(true)}}\r\n                        >\r\n                          Search Setting\r\n                        </MDBDropdownItem>\r\n\r\n                        <MDBDropdownItem\r\n                          onClick={()=> {this.props.onReportModalShow(true)}}\r\n                          disabled={typeof this.props.targetUser.id == 'undefined' ? true : false }\r\n                        >\r\n                          Report\r\n                        </MDBDropdownItem>\r\n                        \r\n                        \r\n                        <MDBDropdownItem divider />\r\n                        \r\n                        <MDBDropdownItem\r\n                          onClick={this.props.logOut}\r\n                        >\r\n                          Log Out\r\n                        </MDBDropdownItem> \r\n\r\n                      </MDBDropdownMenu>\r\n                    </MDBDropdown>\r\n                    \r\n                  </div>\r\n                </div>\r\n              }\r\n            />\r\n            {this.props.targetUser.id ? (\r\n              <div> \r\n                <MessageList\r\n                  className=\"message-list\"\r\n                  lockable={true}\r\n                  toBottomHeight={\"300\"}\r\n                  dataSource={this.props.targetUser.messages}\r\n                  downButton={true}\r\n                />\r\n                <FormGroup className=\"send-message-form\">\r\n                  <Row style={{width:\"100%\", position:\"relative\"}}>\r\n                      {/* <button\r\n                        type=\"button\"\r\n                        className=\"toggle-emoji\"\r\n                        onClick={this.toggleEmojiPicker.bind(this)}\r\n                      >\r\n                        <i class=\"far fa-smile\"></i>\r\n                      </button> */}\r\n                      <i \r\n                        className=\"toggle-emoji far fa-smile toggle-icon\"\r\n                        onClick={this.toggleEmojiPicker.bind(this)} \r\n                      ></i>\r\n                      {/* <button \r\n                        onClick={this.toggle_toolbar.bind(this)}\r\n                        className=\"font-selector\"\r\n                      >\r\n                        <MDBIcon icon=\"font\" className=\"mr-1\" size=\"lg\" />\r\n                      </button> */}\r\n                      <MDBIcon \r\n                        icon=\"palette\" \r\n                        size=\"lg\"\r\n                        onClick={this.toggle_toolbar.bind(this)}\r\n                        className=\"font-selector mr-1 toggle-icon\"\r\n                      />\r\n                      \r\n                      <Editor\r\n                        ref={this.setDomEditorRef}\r\n                        editorState={this.state.editorState}\r\n                        placeholder=\"Type a message...234\"\r\n                        wrapperClassName=\"demo-wrapper\"\r\n                        toolbarClassName={this.state.toolbar_show ? '' : 'toggle-toolbar'}\r\n                        editorClassName=\"demo-editor\"\r\n                        keyBindingFn={this.keyBindingFunction.bind(this)}\r\n                        onEditorStateChange={this.onEditorStateChange}\r\n                        onFocus={this.onFocusEditor.bind(this)}\r\n                        // onChange={this.onEditorChange.bind(this)}\r\n                        toolbar={{\r\n                          options: ['inline', 'colorPicker', 'fontSize', 'fontFamily',],\r\n                          inline: { \r\n                              inDropdown: false, \r\n                              options: ['bold', 'italic', 'underline'], \r\n                          },\r\n                          image: { uploadEnabled: true},\r\n                          inputAccept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg',\r\n                          fontSize: {\r\n                            options: [8, 9, 10, 11, 12, 14, 16, 18, 20]\r\n                          },\r\n                        }}\r\n                      />\r\n                      \r\n                      {this.state.showColorPicker ? \r\n                      <div>\r\n                        <SketchPicker \r\n                          color={ this.state.pickerColor }\r\n                          onChangeComplete={ this.handleChangeComplete.bind(this) }\r\n                        />\r\n                        <button className=\"color-confirm\" onClick={this.onApplyColorPicker.bind(this)}>Apply</button>\r\n                        <button className=\"color-cancel\" onClick={this.hideColorPicker.bind(this)}>Cancel</button>\r\n                        <div className=\"color-picker-hide\" onClick={this.hideColorPicker.bind(this)}></div>\r\n                      </div>\r\n                      :\r\n                      null}\r\n                      \r\n\r\n                      {this.state.toolbar_show ? \r\n                        <button className=\"color-picker-toggle\" onClick={this.toggleColorPicker.bind(this)}>\r\n                          <i className=\"fas fa-eye-dropper\"></i>\r\n                        </button>\r\n                      : null}\r\n                      \r\n                      \r\n\r\n                      \r\n                      <label htmlFor=\"attachFile\" className=\"attach-file\">\r\n                        <i \r\n                          className=\"fas fa-paperclip toggle-icon \"                   \r\n                        ></i>\r\n                      </label>\r\n                      \r\n                      <input \r\n                          ref={(ref) => { this.attachFile = ref; }} \r\n                          onChange={this.onAttachFile.bind(this)} \r\n                          type=\"file\"\r\n                          id=\"attachFile\" \r\n                          accept=\".png, .jpg, .jpeg\"\r\n                      />\r\n\r\n                      <InputGroup.Button>\r\n                        <div\r\n                          disabled={!this.state.messageText}\r\n                          className=\"sendButton\"\r\n                          onClick={this.onSendClicked.bind(this)}\r\n                        >\r\n                          {/* <FontAwesomeIcon icon={faPaperPlane} color=\"white\" /> */}\r\n                          {/* <svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"paper-plane\" class=\"svg-inline--fa fa-paper-plane fa-w-16 \" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\" color=\"white\"><path fill=\"currentColor\" d=\"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z\"></path></svg> */}\r\n                          <svg className=\"jss4\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\" role=\"presentation\"><path fill=\"#fff\" d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"></path><path fill=\"none\" d=\"M0 0h24v24H0z\"></path></svg>\r\n                        </div>\r\n                      </InputGroup.Button>\r\n\r\n                  </Row>\r\n                </FormGroup>\r\n              </div>\r\n            ) : (\r\n              <div className=\"waiting-container\">\r\n                <div className=\"title-box\">\r\n                  <h2>Welcome, {this.props.signedInUser.userName}!</h2><br></br>\r\n                </div>\r\n                <div className=\"body-box\">\r\n                  <p \r\n                    className=\"select-friend\"\r\n                    onClick={this.findTargetUser.bind(this)}\r\n                  >\r\n                      Select a friend to start a chat.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        \r\n          <Picker \r\n            style={this.state.showEmojiPicker? { position: 'absolute', bottom: '90px', right: '10px', opacity: '1' } : { position: 'absolute', bottom: '90px', right: '10px', opacity: '0', zIndex:'-3' }} \r\n            onSelect={this.addEmoji.bind(this)} \r\n            emojiTooltip={true}\r\n          />\r\n\r\n        { this.state.showEmojiPicker ? (\r\n          <div>            \r\n            <div className=\"emoji-back\" onClick={this.closeEmojiPicker.bind(this)}></div>\r\n          </div>\r\n        ): null }       \r\n        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport \"./OnTyping.css\";\r\n\r\nconst OnTyping = () => {\r\n    return (\r\n        <div className=\"message-text message-text-left on-typing\">\r\n            <div id=\"circleG\">\r\n                <div id=\"circleG_1\" className=\"circleG\"></div>\r\n                <div id=\"circleG_2\" className=\"circleG\"></div>\r\n                <div id=\"circleG_3\" className=\"circleG\"></div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default OnTyping;","import React, { Component } from \"react\";\r\nimport {\r\n    MDBJumbotron,\r\n    MDBBtn,\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBCardBody,\r\n    MDBInput,\r\n    MDBInputSelect,\r\n    MDBCloseIcon\r\n  } from 'mdbreact';\r\n\r\nimport {\r\n    NotificationContainer,\r\n    NotificationManager\r\n} from \"react-notifications\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { RESTAPIUrl } from '../../config/config';\r\nimport { setInStorage } from \"../../utils/storage\";\r\nimport { countries } from \"../../config/country\";\r\n\r\nimport \"./ProfileBox.css\";\r\n\r\n\r\n\r\n\r\nexport default class ChatBox extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.state = {\r\n            imageURL: `${RESTAPIUrl}/public/profile/${this.props.profileInfo.profile_image}`,\r\n            userName: this.props.profileInfo.userName,\r\n            age: this.props.profileInfo.age,\r\n            location: this.props.profileInfo.location,\r\n            gender: this.props.profileInfo.gender,\r\n            imageHash: this.props.imageHash\r\n        }\r\n\r\n        this.handleUploadImage = this.handleUploadImage.bind(this);\r\n        this.handleChangeProfile = this.handleChangeProfile.bind(this);\r\n    }\r\n    componentWillReceiveProps() {\r\n        this.setState({\r\n            imageURL: `${RESTAPIUrl}/public/profile/${this.props.profileInfo.profile_image}`\r\n        });\r\n    }\r\n    handleUploadImage(ev) {\r\n        ev.preventDefault();\r\n    \r\n        const data = new FormData();\r\n        data.append('file', this.uploadInput.files[0]);\r\n        data.append('fileName', this.fileName.value);\r\n        \r\n        fetch(`${RESTAPIUrl}/api/profile/image`, {\r\n          method: 'POST',\r\n          body: data,\r\n        })\r\n        .then(res =>res.json())\r\n        .then(json => {\r\n            if(json.status) {\r\n                setInStorage('guest_signin', {token:json.token});\r\n                this.props.updateProfile();\r\n\r\n                // this.setState({imageHash: Date.now()});\r\n\r\n                let decoded_token = jwt_decode(json.token);\r\n                let signedInUser = decoded_token.user;\r\n                // this.props.onChangeProfile(signedInUser);\r\n                this.setState({\r\n                    imageURL: `${RESTAPIUrl}/public/profile/${signedInUser.profile_image}`,\r\n                    imageHash: Date.now()\r\n                });    \r\n            } else {\r\n                alert(\"Server Error\");\r\n            }\r\n        })\r\n        \r\n        \r\n        // .then((response) => {\r\n        //   response.json().then((body) => {\r\n        //     this.setState({ imageURL: `http://localhost:5000/${body.file}` });\r\n        //   });\r\n        // });\r\n    }\r\n\r\n    handleChangeProfile(e) {\r\n        e.preventDefault();\r\n        const { userName, location, age, gender } = this.state;\r\n        const { _id } = this.props.profileInfo;\r\n        this.setState ({ \r\n            loginLoading: true, \r\n        });\r\n\r\n        fetch(RESTAPIUrl + '/api/profile/update', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            _id,\r\n            userName,\r\n            location,\r\n            age,\r\n            gender\r\n        }),\r\n        }).then(res =>res.json())\r\n        .then(json => {\r\n            if(json.status) {\r\n                setInStorage('guest_signin', {token:json.token});\r\n                this.props.updateProfile();\r\n                this.props.onProfileModalShow(false);\r\n                NotificationManager.success(\r\n                    `${json.message}`\r\n                );\r\n            } else {\r\n                NotificationManager.error(\r\n                    `${json.message}`\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    onProfileModalShow() {\r\n        this.props.onProfileModalShow(false);\r\n    }\r\n    \r\n    handleChangeName(e) {\r\n        this.setState({ userName: e.target.value });\r\n    }\r\n\r\n    handleChangeLocation(e) {\r\n        this.setState({ location: e.target.value });\r\n    }\r\n\r\n    handleChangeAge(value) {\r\n        this.setState({ age: value });\r\n    }\r\n\r\n    handleChangeGender(e) {\r\n        this.setState({ gender: e.target.value });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <NotificationContainer /> \r\n                <MDBRow className={`${this.props.profileContainer}`}>\r\n                    <MDBCol>\r\n                        <MDBCloseIcon onClick={this.onProfileModalShow.bind(this)}/>\r\n                        <MDBJumbotron className='text-center'>                          \r\n                            \r\n                            <MDBCardBody>\r\n\r\n                                <form onSubmit={this.handleChangeProfile}>\r\n                                    <div className=\"profile-image\">\r\n                                        <img\r\n                                            src={`${this.state.imageURL}?${this.state.imageHash}`}\r\n                                            className='img-fluid'\r\n                                            alt=\"profile-img\"\r\n                                        />\r\n                                        <div className=\"upload-button\">\r\n                                            <label htmlFor=\"imageUpload\"></label>\r\n                                            <input \r\n                                                ref={(ref) => { this.uploadInput = ref; }} \r\n                                                onChange={this.handleUploadImage.bind(this)} \r\n                                                type=\"file\"\r\n                                                id=\"imageUpload\" \r\n                                                accept=\".png, .jpg, .jpeg\"\r\n                                            />\r\n                                            <input ref={(ref) => { this.fileName = ref; }}\r\n                                                value={this.props.profileInfo.profile_image}\r\n                                                type=\"hidden\"\r\n                                            />\r\n                                        </div>\r\n                                        <h4 className=\"userName\">{this.props.profileInfo.userName}</h4>\r\n                                        <h6 className=\"userInfo\">\r\n                                            {`${this.props.profileInfo.gender}  ${this.props.profileInfo.age}  ${this.props.profileInfo.location}`}\r\n                                        </h6>\r\n                                        <hr></hr>\r\n                                    </div>\r\n                                    <div>\r\n                    \r\n                                        <MDBInput \r\n                                            label=\"Your Name\" \r\n                                            ref={(ref) => { this.userName = ref; }}\r\n                                            group type=\"text\" \r\n                                            onChange={this.handleChangeName.bind(this)} \r\n                                            validate error=\"wrong\" \r\n                                            success=\"right\"\r\n                                            value={this.state.userName }\r\n                                            required\r\n                                            disabled\r\n                                        />\r\n                                        \r\n                                        <label className=\"form-label\" >Your Location</label>\r\n                                        <select \r\n                                            className=\"browser-default custom-select\" \r\n                                            id=\"location\" \r\n                                            name=\"location\" \r\n                                            value={this.state.location} \r\n                                            onChange={this.handleChangeLocation.bind(this)} \r\n                                        >\r\n                                            <option>Choose your location</option>\r\n                                            {\r\n                                                countries.map((object, i) => {\r\n                                                return <option value={object} key={i}>{object}</option>\r\n                                                })\r\n                                            }\r\n                                        </select>\r\n\r\n                                        <label className=\"form-label\" >Your Age</label>\r\n                                        <MDBInputSelect  \r\n                                            id=\"age\" \r\n                                            name=\"age\" \r\n                                            getValue={this.handleChangeAge.bind(this)} \r\n                                            min={13} \r\n                                            max={99} \r\n                                            value={this.state.age } \r\n                                            className='mb-2' \r\n                                        />\r\n                                        \r\n                                        <label className=\"form-label\">Your Gender</label>\r\n                                        <div className=\"radio-group\">\r\n                                            <div className=\"radio\">\r\n                                                <input id=\"radio-1\" name=\"radio\" type=\"radio\" value=\"Male\" onChange={this.handleChangeGender.bind(this)} checked={this.state.gender === 'Male'} disabled/>\r\n                                                <label htmlFor=\"radio-1\" className=\"radio-label\">Male</label>\r\n                                            </div>\r\n\r\n                                            <div className=\"radio\">\r\n                                                <input id=\"radio-2\" name=\"radio\" type=\"radio\" value=\"Female\" onChange={this.handleChangeGender.bind(this)} checked={this.state.gender === 'Female'} disabled/>\r\n                                                <label  htmlFor=\"radio-2\" className=\"radio-label\">Female</label>\r\n                                            </div>  \r\n                                        </div>\r\n\r\n                                        <div className=\"text-center pt-3 mb-3\">\r\n                                        <MDBBtn \r\n                                            type=\"submit\"\r\n                                            color=\"primary\"\r\n                                            size=\"sm\"\r\n                                            >\r\n                                            Apply\r\n                                        </MDBBtn>\r\n\r\n                                        <MDBBtn color=\"cyan\" size=\"sm\"\r\n                                            onClick={this.onProfileModalShow.bind(this)}\r\n                                        >\r\n                                            Close\r\n                                        </MDBBtn>\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </form>\r\n\r\n                            </MDBCardBody>\r\n                        </MDBJumbotron>\r\n                    </MDBCol>\r\n                    </MDBRow>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport 'rc-slider/assets/index.css';\r\n\r\nimport \"./FullScreenImage.css\";\r\n\r\nexport default class FullScreenImage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let imageUrl = this.props.imageUrl;\r\n        let downloadPath = imageUrl.split(\"public/\")[1];\r\n        this.state = {\r\n            downloadPath: downloadPath\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n    onShowImageFullScreen() {\r\n        this.props.onShowImageFullScreen();\r\n    }\r\n    render() {\r\n        return (\r\n            \r\n            <div>\r\n                <div className=\"full-image\">\r\n                    <span \r\n                        onClick={this.onShowImageFullScreen.bind(this)}\r\n                        className=\"close-btn\"    \r\n                    >\r\n                        X\r\n                    </span>\r\n                    <a href={this.props.imageUrl} download=\"image-file\" className=\"download-btn\">\r\n                        <i class=\"fa fa-download\"></i>\r\n                    </a>\r\n                    <img src={this.props.imageUrl} alt=\"\"></img>\r\n                    \r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport {\r\n    MDBJumbotron,\r\n    MDBBtn,\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBCardTitle,\r\n    MDBCardBody,\r\n    MDBCloseIcon\r\n} from 'mdbreact';\r\nimport Slider from 'rc-slider';\r\nimport 'rc-slider/assets/index.css';\r\n\r\nimport { countries } from \"../../config/country\";\r\nimport \"./SearchSettingBox.css\";\r\n\r\nconst createSliderWithTooltip = Slider.createSliderWithTooltip;\r\nconst Range = createSliderWithTooltip(Slider.Range);\r\n\r\nexport default class SearchSettingBox extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const temp = this.props.searchSetting\r\n        this.state = {\r\n            searchSetting: temp,\r\n        }\r\n\r\n        this.handleChangeGender = this.handleChangeGender.bind(this);\r\n    }\r\n\r\n    handleChangeSearchSetting(e) {\r\n        e.preventDefault();\r\n\r\n    }\r\n\r\n    handleChangeGender(e) {\r\n        let searchSetting = this.state.searchSetting;\r\n        searchSetting.gender = e.target.value;\r\n        this.setState({ searchSetting });\r\n    }\r\n\r\n    handleChangeLocation(e) {\r\n        let searchSetting = this.state.searchSetting;\r\n        searchSetting.location = e.target.value;\r\n        this.setState({ searchSetting });\r\n    }\r\n\r\n    handleChangeAge(value) {\r\n        let searchSetting = this.state.searchSetting;\r\n        searchSetting.ageMin = value[0];\r\n        searchSetting.ageMax = value[1];\r\n        this.setState({ searchSetting });\r\n\r\n        // this.setState({\r\n        //     ageMin: value[0],\r\n        //     ageMax: value[1],\r\n        // })\r\n    }\r\n    onSearchSettingModalShow() {\r\n        this.props.onSearchSettingModalShow(false);\r\n    }\r\n\r\n    render() {\r\n        return ( \r\n            <div>\r\n                <MDBRow className = {`${this.props.searchContainer}` } >\r\n                    <MDBCol>\r\n                        <MDBCloseIcon onClick = { this.onSearchSettingModalShow.bind(this) }/>\r\n\r\n                        <MDBJumbotron className = 'text-center' >\r\n                            <MDBCardTitle className = \"card-title h4 pb-2\" >\r\n                                <strong > Search Filter Setting </strong> \r\n                            </MDBCardTitle > \r\n                            \r\n                            <MDBCardBody >\r\n                                <form onSubmit = { this.handleChangeSearchSetting.bind(this) } >\r\n                                    <div>\r\n                                        <div className = \"form-group\" >\r\n                                            <label className = \"form-label\" > Location </label> \r\n                                            <select className = \"browser-default custom-select\" id = \"location1\" name = \"location1\" value = { this.props.searchSetting.location } onChange = { this.handleChangeLocation.bind(this) } >\r\n                                                <option value = \"\"> All </option> \r\n                                                {countries.map((object, i) => \r\n                                                    {\r\n                                                        return <option value = { object } key = { i } > { object } </option>\r\n                                                    })\r\n                                                } \r\n                                            </select> \r\n                                        </div >\r\n\r\n                                        <div className = \"form-group\" >\r\n                                            <label className = \"form-label\"> Age Range </label> \r\n                                            <Range min = { 13 } max = { 99 } defaultValue = { [this.props.searchSetting.ageMin, this.props.searchSetting.ageMax]} tipFormatter = { value => `${value}` } onChange = { this.handleChangeAge.bind(this) }/> \r\n                                        </div >\r\n\r\n                                        <div className = \"form-group\" >\r\n                                            <label className = \"form-label\" > Gender </label> \r\n                                            <div className = \"radio-group\" >\r\n                                                <div className = \"radio\" >\r\n                                                    <input id = \"radio1\"\r\n                                                        name = \"radio1\"\r\n                                                        type = \"radio\"\r\n                                                        value = \"\"\r\n                                                        onChange = { this.handleChangeGender.bind(this) }\r\n                                                        checked = { this.state.searchSetting.gender === '' }\r\n                                                    /> \r\n                                            \r\n                                                    <label htmlFor = \"radio1\" className = \"radio-label\" > All </label> \r\n                                                </div>\r\n\r\n                                                <div className = \"radio\" >\r\n                                                    <input id = \"radio2\"\r\n                                                        name = \"radio1\"\r\n                                                        type = \"radio\"\r\n                                                        value = \"Male\"\r\n                                                        onChange = { this.handleChangeGender.bind(this) }\r\n                                                        checked = { this.state.searchSetting.gender === 'Male' }\r\n                                                    /> \r\n                                                    <label htmlFor = \"radio2\" className = \"radio-label\" > Male </label> \r\n                                                </div>\r\n\r\n                                                <div className = \"radio\">\r\n                                                    <input id = \"radio3\" name = \"radio1\"\r\n                                                        type = \"radio\"\r\n                                                        value = \"Female\"\r\n                                                        onChange = { this.handleChangeGender.bind(this) }\r\n                                                        checked = { this.state.searchSetting.gender === 'Female' }\r\n                                                    /> \r\n                                                    <label htmlFor = \"radio3\" className = \"radio-label\" > Female </label> \r\n                                                </div>\r\n                                            </div> \r\n                                        </div>\r\n\r\n                                        <div className = \"text-center pt-3 mb-3\" >\r\n\r\n                                            <MDBBtn \r\n                                                color = \"cyan\" \r\n                                                size = \"sm\"\r\n                                                onClick = { this.onSearchSettingModalShow.bind(this) } \r\n                                            >\r\n                                                Close \r\n                                            </MDBBtn> \r\n                                        </div>\r\n                                    </div> \r\n                                </form >\r\n\r\n                            </MDBCardBody> \r\n                        </MDBJumbotron> \r\n                    </MDBCol> \r\n                </MDBRow > \r\n            </div>\r\n    );\r\n}\r\n}","import React, { Component } from \"react\";\r\nimport {\r\n    MDBJumbotron,\r\n    MDBBtn,\r\n    MDBRow,\r\n    MDBCol,\r\n    MDBCardTitle,\r\n    MDBCardBody,\r\n    MDBCloseIcon,\r\n} from 'mdbreact';\r\nimport {\r\n    NotificationManager\r\n} from \"react-notifications\";\r\n\r\nimport { RESTAPIUrl } from \"../../config/config\";\r\nimport \"./ReportBox.css\";\r\n\r\nexport default class ReportBox extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            reportList: ['Spam', 'Inappropriate or Vulgar Content', 'Illegal Content', 'Abusive behaviour', 'Other'],\r\n            reportReason: '',\r\n            inputTextActive: false,\r\n        }\r\n\r\n    }\r\n\r\n    handleReport(e) {\r\n        e.preventDefault();\r\n        if( typeof this.props.targetUser._id == 'undefined' ) {            \r\n            NotificationManager.error(\r\n                \"Please select target user\"\r\n            );\r\n            return false;\r\n        }\r\n        fetch(RESTAPIUrl + '/api/report', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                reportUser: this.props.signedInUser,\r\n                targetUser: this.props.targetUser,\r\n                reason: this.state.reportReason\r\n            }),\r\n        }).then(res =>res.json())\r\n        .then(json => {\r\n            if(json.status) {\r\n                NotificationManager.success(\r\n                    json.message\r\n                );\r\n            } else {\r\n                NotificationManager.error(\r\n                    json.message\r\n                );\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    handleChangeReportSetting(e) {\r\n        if(e.target.value !== \"Other\") {\r\n            this.setState({\r\n                reportReason: e.target.value,\r\n                inputTextActive: false,\r\n            })\r\n        } else {\r\n            this.setState({inputTextActive: true});\r\n        }\r\n    }\r\n\r\n    handleOtherReason(e) {\r\n        this.setState({reportReason: e.target.value});\r\n    }\r\n\r\n    onReportModalShow() {\r\n        this.props.onReportModalShow(false);\r\n    }\r\n\r\n    render() {\r\n        return ( \r\n            <div>\r\n                <MDBRow  className = {` ${this.props.reportContainer} `} >\r\n                    <MDBCol>\r\n                        <MDBCloseIcon onClick = { this.onReportModalShow.bind(this) }/>\r\n\r\n                        <MDBJumbotron className = 'text-center' >\r\n                            <MDBCardTitle className = \"card-title h4 pb-2\" >\r\n                                <strong > Report User </strong> \r\n                            </MDBCardTitle > \r\n                            <hr></hr>\r\n                            <MDBCardBody >\r\n                                <form onSubmit = { this.handleReport.bind(this) } >\r\n                                    <div>\r\n                                        <div className = \"form-group\" >\r\n                                            {this.state.reportList.map((object, i) => \r\n                                                {\r\n                                                    return (\r\n                                                        <div className = \"radio\" key={`${object}-container`}>\r\n                                                            <input \r\n                                                                id = {`report-radio${i}`}\r\n                                                                name = 'report-radio'\r\n                                                                type = \"radio\"\r\n                                                                value = {object}\r\n                                                                key = {object}\r\n                                                                onChange = { this.handleChangeReportSetting.bind(this) }\r\n                                                            /> \r\n                                                    \r\n                                                            <label htmlFor = {`report-radio${i}`} className = \"radio-label\" > {object} </label> \r\n                                                        </div>\r\n                                                    )\r\n                                                })\r\n                                            }\r\n                                        </div>\r\n\r\n                                        <div className=\"form-group\">\r\n                                            {this.state.inputTextActive?\r\n                                                <div className=\"form-group report-reason\">\r\n                                                    <textarea\r\n                                                        className=\"form-control\"\r\n                                                        id=\"exampleFormControlTextarea1\"\r\n                                                        rows=\"3\"\r\n                                                        onChange={ this.handleOtherReason.bind(this) }\r\n                                                        required\r\n                                                    />\r\n                                                </div>\r\n                                                :\r\n                                                null\r\n                                            }\r\n                                            \r\n                                            \r\n                                        </div>\r\n\r\n                                        <div className = \"text-center pt-3 mb-3\" >\r\n                                            <MDBBtn\r\n                                                type=\"submit\"\r\n                                                color = \"cyan\" \r\n                                                size = \"sm\"\r\n                                            >\r\n                                                Report\r\n                                            </MDBBtn> \r\n                                            <MDBBtn \r\n                                                color = \"cyan\" \r\n                                                size = \"sm\"\r\n                                                onClick = { this.onReportModalShow.bind(this) } \r\n                                            >\r\n                                                Close \r\n                                            </MDBBtn> \r\n                                        </div>\r\n                                    </div> \r\n                                </form >\r\n\r\n                            </MDBCardBody> \r\n                        </MDBJumbotron> \r\n                    </MDBCol> \r\n                </MDBRow > \r\n            </div>\r\n    );\r\n}\r\n}","import React, { Component } from \"react\";\r\nimport Glyphicon from \"react-bootstrap/lib/Glyphicon\";\r\nimport Modal from \"react-bootstrap/lib/Modal\";\r\n\r\n/**\r\n *\r\n * Renders a Error modal if app encounter any error.\r\n */\r\n\r\nexport default class ErrorModal extends Component {\r\n  state = {};\r\n  render() {\r\n    return (\r\n      <Modal show={this.props.show}>\r\n        <Modal.Header>\r\n          <Modal.Title>Error</Modal.Title>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body>\r\n          <h1 className=\"text-center\">\r\n            <Glyphicon glyph=\"alert\" />\r\n          </h1>\r\n          <h5 className=\"text-center\">{this.props.errorMessage}</h5>\r\n        </Modal.Body>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Glyphicon from \"react-bootstrap/lib/Glyphicon\";\r\nimport Modal from \"react-bootstrap/lib/Modal\";\r\n\r\n/**\r\n *\r\n * Renders a loader modal.\r\n */\r\n\r\nexport default class LoadingModal extends Component {\r\n  state = {};\r\n  render() {\r\n    return (\r\n      <Modal show={this.props.show}>\r\n        <Modal.Body>\r\n          <h1 className=\"text-center\">\r\n            <Glyphicon glyph=\"refresh\" />\r\n          </h1>\r\n          <h5 className=\"text-center\">Loading...</h5>\r\n        </Modal.Body>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n","import io from 'socket.io-client';\r\nimport { RESTAPIUrl } from \"../../config/config\"\r\n\r\nconst socket = io.connect(`${RESTAPIUrl}`);\r\n\r\nexport default socket;","import _ from 'lodash';\r\n\r\nclass Emitter {\r\n  constructor() {\r\n    this.events = {};\r\n  }\r\n\r\n  emit(event, ...args) {\r\n    if (this.events[event]) {\r\n      this.events[event].forEach((fn) => fn(...args));\r\n    }\r\n    return this;\r\n  }\r\n\r\n  on(event, fn) {\r\n    if (this.events[event]) this.events[event].push(fn);\r\n    else this.events[event] = [fn];\r\n    return this;\r\n  }\r\n\r\n  off(event, fn) {\r\n    if (event && _.isFunction(fn)) {\r\n      const listeners = this.events[event];\r\n      const index = listeners.findIndex((_fn) => _fn === fn);\r\n      listeners.splice(index, 1);\r\n    } else this.events[event] = [];\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default Emitter;\r\n","import _ from 'lodash';\r\nimport Emitter from './Emitter';\r\n\r\n/**\r\n * Manage all media devices\r\n */\r\nclass MediaDevice extends Emitter {\r\n  /**\r\n   * Start media devices and send stream\r\n   */\r\n  start() {\r\n    const constraints = {\r\n      video: {\r\n        facingMode: 'user',\r\n        height: { min: 360, ideal: 720, max: 1080 }\r\n      },\r\n      audio: true\r\n    };\r\n\r\n    navigator.mediaDevices\r\n      .getUserMedia(constraints)\r\n      .then((stream) => {\r\n        this.stream = stream;\r\n        this.emit('stream', stream);\r\n      })\r\n      .catch((err) => {\r\n        if (err instanceof DOMException) {\r\n          alert('Cannot open webcam and/or microphone');\r\n        } else {\r\n          console.log(err);\r\n        }\r\n      });\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Turn on/off a device\r\n   * @param {String} type - Type of the device\r\n   * @param {Boolean} [on] - State of the device\r\n   */\r\n  toggle(type, on) {\r\n    const len = arguments.length;\r\n    if (this.stream) {\r\n      this.stream[`get${type}Tracks`]().forEach((track) => {\r\n        const state = len === 2 ? on : !track.enabled;\r\n        _.set(track, 'enabled', state);\r\n      });\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Stop all media track of devices\r\n   */\r\n  stop() {\r\n    if (this.stream) {\r\n      this.stream.getTracks().forEach((track) => track.stop());\r\n    }\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default MediaDevice;\r\n","import MediaDevice from './MediaDevice';\r\nimport Emitter from './Emitter';\r\nimport socket from './socket';\r\n\r\n// const PC_CONFIG = { iceServers: [{ urls: ['stun:stun.l.google.com:19302'] }] };\r\nconst PC_CONFIG = {\r\n    iceServers: [{\r\n        url: 'turn:numb.viagenie.ca',\r\n        credential: 'nothingbutthebest',\r\n        username: 'bluesky410219@gmail.com'\r\n    }]\r\n};\r\n\r\nclass PeerConnection extends Emitter {\r\n    /**\r\n     * Create a PeerConnection.\r\n     * @param {String} friendID - ID of the friend you want to call.\r\n     */\r\n    constructor(friendID) {\r\n        super();\r\n        this.pc = new RTCPeerConnection(PC_CONFIG);\r\n        this.pc.onicecandidate = (event) => socket.emit('call', {\r\n            to: this.friendID,\r\n            candidate: event.candidate\r\n        });\r\n        this.pc.ontrack = (event) => this.emit('peerStream', event.streams[0]);\r\n\r\n        this.mediaDevice = new MediaDevice();\r\n        this.friendID = friendID;\r\n    }\r\n\r\n    /**\r\n     * Starting the call\r\n     * @param {Boolean} isCaller\r\n     * @param {Object} config - configuration for the call {audio: boolean, video: boolean}\r\n     */\r\n    start(isCaller, config) {\r\n        this.mediaDevice\r\n            .on('stream', (stream) => {\r\n                stream.getTracks().forEach((track) => {\r\n                    this.pc.addTrack(track, stream);\r\n                });\r\n                this.emit('localStream', stream);\r\n                if (isCaller) socket.emit('request', { to: this.friendID });\r\n                else this.createOffer();\r\n            })\r\n            .start(config);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Stop the call\r\n     * @param {Boolean} isStarter\r\n     */\r\n    stop(isStarter) {\r\n        if (isStarter) {\r\n            socket.emit('end', { to: this.friendID });\r\n        }\r\n        this.mediaDevice.stop();\r\n        this.pc.close();\r\n        this.pc = null;\r\n        this.off();\r\n        return this;\r\n    }\r\n\r\n    createOffer() {\r\n        this.pc.createOffer()\r\n            .then(this.getDescription.bind(this))\r\n            .catch((err) => console.log(err));\r\n        return this;\r\n    }\r\n\r\n    createAnswer() {\r\n        this.pc.createAnswer()\r\n            .then(this.getDescription.bind(this))\r\n            .catch((err) => console.log(err));\r\n        return this;\r\n    }\r\n\r\n    getDescription(desc) {\r\n        this.pc.setLocalDescription(desc);\r\n        socket.emit('call', { to: this.friendID, sdp: desc });\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} sdp - Session description\r\n     */\r\n    setRemoteDescription(sdp) {\r\n        const rtcSdp = new RTCSessionDescription(sdp);\r\n        this.pc.setRemoteDescription(rtcSdp);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @param {Object} candidate - ICE Candidate\r\n     */\r\n    addIceCandidate(candidate) {\r\n        if (candidate) {\r\n            const iceCandidate = new RTCIceCandidate(candidate);\r\n            this.pc.addIceCandidate(iceCandidate);\r\n        }\r\n        return this;\r\n    }\r\n}\r\n\r\nexport default PeerConnection;","import React, { useState, useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport { RESTAPIUrl } from \"../../config/config\";\r\nimport \"./CallWindow.css\";\r\n\r\nconst getButtonClass = (icon, enabled) => classnames(`btn-action fa ${icon}`, { disable: !enabled });\r\n\r\nfunction CallWindow({ peerSrc, localSrc, config, mediaDevice, status, endCall }) {\r\n  const peerVideo = useRef(null);\r\n  const localVideo = useRef(null);\r\n  const [video, setVideo] = useState(config.video);\r\n  const [audio, setAudio] = useState(config.audio);\r\n  const [ toggleVideo, setToggleVideo ] = useState(true);\r\n\r\n  useEffect(() => {\r\n    if (peerVideo.current && peerSrc) peerVideo.current.srcObject = peerSrc;\r\n    if (localVideo.current && localSrc) localVideo.current.srcObject = localSrc;\r\n  },[peerSrc, localSrc]);\r\n\r\n  useEffect(() => {\r\n    if (mediaDevice) {\r\n      mediaDevice.toggle('Video', video);\r\n      mediaDevice.toggle('Audio', audio);\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Turn on/off a media device\r\n   * @param {String} deviceType - Type of the device eg: Video, Audio\r\n   */\r\n  const toggleMediaDevice = (deviceType) => {\r\n    if (deviceType === 'video') {\r\n      setVideo(!video);\r\n      mediaDevice.toggle('Video');\r\n    }\r\n    if (deviceType === 'audio') {\r\n      setAudio(!audio);\r\n      mediaDevice.toggle('Audio');\r\n    }\r\n  };\r\n\r\n  const toggleVideoContact = () => {\r\n    setToggleVideo(!toggleVideo);\r\n  }\r\n\r\n  return (\r\n    <div className={classnames('call-window', status)}>\r\n      <div className=\"video-contact\">\r\n        <video id=\"peerVideo\" className={`${toggleVideo? 'max-video':'min-video'}`} ref={peerVideo} autoPlay />\r\n\r\n        <div \r\n          className={`toggle-contact-video ${toggleVideo? 'max-mark':'min-mark'}`}\r\n          onClick={() => toggleVideoContact()}\r\n        >\r\n          <img src={`${RESTAPIUrl}/public/${toggleVideo? 'min' : 'max'}.png`}></img>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"video-user\">\r\n        <video id=\"localVideo\" ref={localVideo} autoPlay muted />        \r\n      </div>      \r\n      \r\n      <div className=\"video-control\">\r\n        <button\r\n          key=\"btnVideo\"\r\n          type=\"button\"\r\n          className={getButtonClass('fa-video', video)}\r\n          onClick={() => toggleMediaDevice('video')}\r\n        />\r\n        <button\r\n          key=\"btnAudio\"\r\n          type=\"button\"\r\n          className={getButtonClass('fa-microphone', audio)}\r\n          onClick={() => toggleMediaDevice('audio')}\r\n        />\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn-action hangup fa fa-phone\"\r\n          onClick={() => endCall(true)}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nCallWindow.propTypes = {\r\n  status: PropTypes.string.isRequired,\r\n  localSrc: PropTypes.object, // eslint-disable-line\r\n  peerSrc: PropTypes.object, // eslint-disable-line\r\n  config: PropTypes.shape({\r\n    audio: PropTypes.bool.isRequired,\r\n    video: PropTypes.bool.isRequired\r\n  }).isRequired,\r\n  mediaDevice: PropTypes.object, // eslint-disable-line\r\n  endCall: PropTypes.func.isRequired\r\n};\r\n\r\nexport default CallWindow;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport { RESTAPIUrl } from '../../config/config';\r\nimport './CallModal.css';\r\n\r\n\r\nfunction CallModal({ status, callFrom, startCall, rejectCall, contactUser, userAvatar }) {\r\n  const acceptWithVideo = (video) => {\r\n    const config = { audio: true, video };\r\n    return () => startCall(false, callFrom, config);\r\n  };\r\n\r\n  return (\r\n    <div className={classnames('call-modal', status)}>\r\n      <div className=\"target-avatar\">\r\n        <img src={`${RESTAPIUrl}/public/profile/${userAvatar}`} alt=\"contact-user\"></img>\r\n      </div>\r\n      <p>\r\n        <span className=\"caller\">{`${contactUser}`}</span>\r\n      </p>\r\n      <span className=\"incoming\">Incoming call...</span>\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn-action fa fa-video\"\r\n        onClick={acceptWithVideo(true)}\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn-action fa fa-phone\"\r\n        onClick={acceptWithVideo(false)}\r\n      />\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn-action hangup fa fa-phone\"\r\n        onClick={rejectCall}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nCallModal.propTypes = {\r\n  status: PropTypes.string.isRequired,\r\n  callFrom: PropTypes.string.isRequired,\r\n  startCall: PropTypes.func.isRequired,\r\n  rejectCall: PropTypes.func.isRequired\r\n};\r\n\r\nexport default CallModal;","import React, { Component } from \"react\";\r\nimport ChatBox from \"../../components/ChatBox\";\r\nimport OnTyping from \"../../components/OnTyping/OnTyping\";\r\nimport ProfileBox from \"../../components/ProfileBox/ProfileBox\";\r\nimport FullScreenImage from \"../../components/FullScreenImage/FullScreenImage\";\r\nimport SearchSettingBox from \"../../components/SearchSettingBox/SearchSettingBox\";\r\nimport ReportBox from \"../../components/ReportBox/ReportBox\";\r\nimport ErrorModal from \"../../components/ErrorModal\";\r\nimport LoadingModal from \"../../components/LoadingModal\";\r\nimport \"react-chat-elements/dist/main.css\";\r\nimport {\r\n  NotificationContainer,\r\n  NotificationManager\r\n} from \"react-notifications\";\r\nimport \"react-notifications/lib/notifications.css\";\r\nimport axios from \"axios\";\r\nimport { getFromStorage } from '../../utils/storage';\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nimport renderHtml from 'react-render-html';\r\nimport { RESTAPIUrl } from \"../../config/config\";\r\nimport \"./Chat.css\";\r\n/**\r\n * Fetches socket server URL from env\r\n */\r\n// @@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nimport _ from 'lodash';\r\nimport socket from './socket';\r\nimport PeerConnection from './PeerConnection';\r\n// import MainWindow from './MainWindow';\r\n// import CallWindow from './CallWindow';\r\n// import CallModal from './CallModal';\r\nimport CallWindow from '../../components/CallWindow/CallWindow';\r\nimport CallModal from '../../components/CallModal/CallModal';\r\nimport { MDBBtn } from \"mdbreact\";\r\n/**\r\n * App Component\r\n *\r\n * initiaites Socket connection and handle all cases like disconnected,\r\n * reconnected again so that user can send messages when he is back online\r\n *\r\n * handles Error scenarios if requests from Axios fails.\r\n *\r\n */\r\n\r\n//  Get the token information from local storage and get user's information using decode\r\nconst obj = getFromStorage('guest_signin');\r\nif(obj && obj.token) {\r\n    var decoded_token = jwt_decode(obj.token);\r\n    var signedInUser = decoded_token.user;\r\n}\r\n\r\n\r\nclass App extends Component {\r\n  socket = null;\r\n  constructor() {\r\n    super();\r\n\r\n    const obj = getFromStorage('guest_signin');\r\n    if(obj && obj.token) {\r\n        var decoded_token = jwt_decode(obj.token);\r\n        var signedInUser = decoded_token.user;\r\n    }\r\n\r\n    this.state = {\r\n      signInModalShow: false,\r\n      users: [], // Avaiable users for signing-in\r\n      userChatData: {}, // this contains users from which signed-in user can chat and its message data.\r\n      user: null, // Signed-In User\r\n      selectedUserIndex: 1,\r\n      profileModalShow: '',\r\n      searchModalShow: '',\r\n      reportModalShow: '',\r\n      error: false,\r\n      errorMessage: \"\",\r\n      targetUser: '',\r\n      blackUsersList: [signedInUser._id],\r\n      signedInUser: signedInUser,\r\n      searchSetting: {\r\n        location: '',\r\n        gender: '',\r\n        ageMin: 13,\r\n        ageMax: 99,\r\n      },\r\n      onTyping: false,\r\n      showImageFullScreen: false,\r\n      confirmRemoveOldSession: false,\r\n      imageHash: Date.now(),\r\n\r\n      // @@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n      // clientId: '',\r\n      callWindow: '',\r\n      callModal: '',\r\n      callFrom: '',\r\n      localSrc: null,\r\n      peerSrc: null,\r\n\r\n      config: null,\r\n    \r\n    };\r\n\r\n\r\n    // @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n    this.pc = {};\r\n    // this.config = null;\r\n    this.startCallHandler = this.startCall.bind(this);\r\n    this.endCallHandler = this.endCall.bind(this);\r\n    this.rejectCallHandler = this.rejectCall.bind(this);\r\n  }\r\n  \r\n  \r\n  /**\r\n   *\r\n   * Setups Axios to monitor XHR errors.\r\n   * Initiates and listen to socket.\r\n   * fetches User's list from backend to populate.\r\n   */\r\n\r\n  componentDidMount() {\r\n    this.verifyAccount();\r\n    // this.initAxios();\r\n    this.initSocketConnection();\r\n    this.createSocketRoom();\r\n    this.setupSocketListeners();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    var imgObj = document.getElementsByTagName(\"img\");\r\n    let that = this;\r\n    for (var i = 0 ; i < imgObj.length; i++) {\r\n      imgObj[i].addEventListener('click' , function() {\r\n        if(this.hasAttribute('data_group')) {\r\n          console.log(\"this is attach file property\", this.attributes.getNamedItem(\"src\").value)\r\n          \r\n          that.setState({\r\n            showImageFullScreen: true,\r\n            attachFileUrl: this.attributes.getNamedItem(\"src\").value\r\n          });\r\n        }\r\n\r\n      }) ; \r\n    }\r\n  }\r\n\r\n  verifyAccount() {\r\n    const obj = getFromStorage('guest_signin');\r\n    \r\n    fetch(RESTAPIUrl + '/api/guest/verify', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        token: obj.token\r\n      }),\r\n    })\r\n    .then(res =>res.json())\r\n    .then(json => {\r\n      if(!json.status) {\r\n        localStorage.clear();\r\n        this.props.history.push(\"/\");\r\n      }\r\n    })\r\n  }\r\n\r\n  initSocketConnection() {\r\n    // this.socket = io.connect(SOCKET_URI);\r\n    this.socket = socket;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Checks if request from axios fails\r\n   * and if it does then shows error modal.\r\n   */\r\n  initAxios() {\r\n    axios.interceptors.request.use(\r\n      config => {\r\n        this.setState({ loading: true });\r\n        return config;\r\n      },\r\n      error => {\r\n        this.setState({ loading: false });\r\n        this.setState({\r\n          errorMessage: `Couldn't connect to server. try refreshing the page.`,\r\n          error: true\r\n        });\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n    axios.interceptors.response.use(\r\n      response => {\r\n        this.setState({ loading: false });\r\n        return response;\r\n      },\r\n      error => {\r\n        this.setState({ loading: false });\r\n        this.setState({\r\n          errorMessage: `Some error occured. try after sometime`,\r\n          error: true\r\n        });\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Shows error if client gets disconnected.\r\n   */\r\n  onClientDisconnected() {\r\n    NotificationManager.error(\r\n      \"Connection Lost from server please check your connection.\",\r\n      \"Error!\"\r\n    );\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Established new connection if reconnected.\r\n   */\r\n  onReconnection() {\r\n    if (this.state.user) {\r\n      this.socket.emit(\"sign-in\", this.state.user);\r\n      NotificationManager.success(\"Connection Established.\", \"Reconnected!\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Create room when user enter chat router\r\n   */\r\n  createSocketRoom() {\r\n    this.socket.emit(\"create_room\", this.state.signedInUser);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * Get target user to chat\r\n   */\r\n  findTargetUser() {\r\n    let findTargetQuery = {\r\n        blackUsersList: this.state.blackUsersList,\r\n        searchSetting: this.state.searchSetting,\r\n        signedInUser: this.state.signedInUser,\r\n        prevTargetUser: this.state.targetUser,\r\n    };\r\n    this.socket.emit(\"find_target\", findTargetQuery);\r\n\r\n    if(this.state.targetUser._id !== 'undefined'){\r\n      this.socket.emit('end', { to: this.state.targetUser._id });\r\n    }    \r\n    this.setState({ callModal: '' });\r\n  }\r\n\r\n  onRemoveOldSession() {\r\n    this.setState({\r\n      confirmRemoveOldSession: true,\r\n      targetUser: '',\r\n      userChatData: {}\r\n    },() => {\r\n      this.socket.emit('confirm_remove_old_session', this.state.signedInUser); \r\n    });       \r\n  }\r\n\r\n  onConfirmRemoveOldSession() {\r\n    // this.socket.emit('confirm_remove_old_session', this.state.signedInUser);\r\n    localStorage.clear();\r\n    this.setState({confirmRemoveOldSession: false});\r\n    \r\n    this.props.history.push(\"/\");\r\n  }\r\n\r\n  onFindTargetUser(targetUser) {\r\n    // Add current target user to black user list\r\n    let blackUsersList = this.state.blackUsersList;\r\n    blackUsersList.push(targetUser._id);\r\n    this.setState({blackUsersList});\r\n    \r\n    let userChatData = {\r\n        id: targetUser._id,\r\n        name: targetUser.userName,\r\n        profile_image: targetUser.profile_image,\r\n        gender: targetUser.gender,\r\n        location: targetUser.location,\r\n        age: targetUser.age\r\n    }\r\n    \r\n    // this.setState({userChatData});\r\n    this.setState({ userChatData,targetUser }, () => {\r\n      let message = {\r\n        to: this.state.signedInUser._id,\r\n        message: {\r\n          type: \"text\",\r\n          date: +new Date(),\r\n          text: `<span style=\"color: blue;\">You are now connected to ${this.state.targetUser.userName}<br>${this.state.targetUser.gender} ${this.state.targetUser.age} ${this.state.targetUser.location}</span>`,\r\n          className: \"message\"\r\n        },\r\n        from: this.state.targetUser._id\r\n      };\r\n      this.socket.emit(\"message\", message);\r\n    });\r\n    \r\n    // This is used for backed global variable (target_id     )\r\n    this.socket.emit(\"confirm-find_target\", this.state.targetUser);\r\n  }\r\n\r\n  onSearchNone() {\r\n    NotificationManager.error(\r\n      `Sorry your search did not have any results. Please widen your search`\r\n    );\r\n    this.setState({targetUser: ''});\r\n    this.setState({ userChatData: {}}); \r\n  }\r\n\r\n  onAvailableNone() {\r\n    console.log(\"already contacted with all users\");\r\n    NotificationManager.error(\r\n      `You have already contacted with all online users. Try search again`\r\n    );\r\n    this.setState({targetUser: ''});\r\n    this.setState({ userChatData: {}}); \r\n  }\r\n  \r\n  onIgnore() {\r\n    if(this.state.targetUser._id !== 'undefined'){\r\n      this.socket.emit('end', { to: this.state.targetUser._id });\r\n    }    \r\n    this.setState({ callModal: '' });\r\n    // console.log(\"You are ignored from\", this.state.targetUser);\r\n    // Ignored Message handling\r\n    this.setState({targetUser: ''});\r\n    this.setState({ userChatData: {}});\r\n  }\r\n  /**\r\n   *\r\n   * Setup all listeners\r\n   */\r\n\r\n  setupSocketListeners() {\r\n    this.socket.on(\"message\", this.onMessageRecieved.bind(this));\r\n    this.socket.on(\"reconnect\", this.onReconnection.bind(this));\r\n    this.socket.on(\"disconnect\", this.onClientDisconnected.bind(this));\r\n    //////\r\n    this.socket.on(\"remove_old_session\", this.onRemoveOldSession.bind(this));\r\n    this.socket.on(\"find_target\", this.onFindTargetUser.bind(this));\r\n    this.socket.on(\"search-none\", this.onSearchNone.bind(this));\r\n    this.socket.on(\"available-none\", this.onAvailableNone.bind(this));\r\n    this.socket.on(\"ignore\", this.onIgnore.bind(this));\r\n    this.socket.on(\"on-typing\", this.onTargetUserTyping.bind(this));\r\n    this.socket.on(\"target-disconnect\", this.onTargetDisconnect.bind(this));\r\n    this.socket.on(\"target-logout\", this.onTargetLogout.bind(this));\r\n    this.socket.on(\"log-out\", this.onLogOut.bind(this));\r\n\r\n    // @@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n    this.socket\r\n      // .on('init', ({ id: clientId }) => {\r\n      //   document.title = `${clientId} - VideoCall`;\r\n      //   this.setState({ clientId });\r\n      // })\r\n\r\n      //@@@@@@@@@@ Remove the callfrom. It's not needed\r\n      .on('request', ({ from: callFrom }) => {\r\n        this.setState({ callModal: 'active', callFrom });\r\n      })\r\n      .on('call', (data) => {\r\n        if (data.sdp) {\r\n          this.pc.setRemoteDescription(data.sdp);\r\n          if (data.sdp.type === 'offer') this.pc.createAnswer();\r\n        } else this.pc.addIceCandidate(data.candidate);\r\n      })\r\n      .on('end', this.endCall.bind(this, false))\r\n      .emit('init');\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {MessageRecievedFromSocket} message\r\n   *\r\n   * Triggered when message is received.\r\n   * It can be a message from user himself but on different session (Tab).\r\n   * so it decides which is the position of the message \"right\" or \"left\".\r\n   *\r\n   * increments unread count and appends in the messages array to maintain Chat History\r\n   */\r\n  customeRenderAddCamp() {\r\n      // console.log('param');\r\n  }\r\n\r\n  onMessageRecieved(message) {\r\n    var userChatData = this.state.userChatData;    \r\n    var messageData = message.message;\r\n    var messageDataText = messageData.text;\r\n    \r\n    if(messageDataText === '<p></p>\\n')\r\n      return false;\r\n      \r\n    // Handling emoji icon string\r\n    // let regexp = /:[\\w]+[_]?[-]?[+]*[\\w]+:/g;\r\n    let regexp = /:[\\w]*[_]?[-]?[+]*[\\w]*[_]?[-]?[+]*[\\w]*[_]?[-]?[+]*[\\w]*[_]?[-]?[+]*[\\w]*[_]?[-]?[+]*[\\w]*[_]?[-]?[+]*[\\w]+:/g;\r\n    let str = messageData.text;\r\n\r\n    let array = [...str.matchAll(regexp)];\r\n    for(let i = 0 ; i < array.length ; i++)  {\r\n      let emojiComp = document.querySelector(`button[title=  '${String(array[i]).split(':').join('')}' ]`);\r\n      let emojiHtml = emojiComp.innerHTML;\r\n      messageDataText = messageDataText.replace(String(array[i]), String(emojiHtml));\r\n    }\r\n\r\n    // Handling image case\r\n    messageDataText = messageDataText.split(\"<img\").join(\"<img data_group='attach-file'\");\r\n\r\n    // let targetId;\r\n    if (message.from === this.state.signedInUser._id) {\r\n      messageData.position = \"right\";\r\n      messageData.renderAddCmp = () => { return renderHtml(`<div className=\"message-text message-text-right\">${messageDataText}</div>`)};\r\n      // targetId = message.to;\r\n      //   messageData.avatar = `${process.env.REACT_APP_SERVER_URI}/avatar/${this.state.user.id}.jpg`;\r\n      messageData.avatar = `${RESTAPIUrl}/public/profile/${this.state.signedInUser.profile_image}`;\r\n    } else {\r\n      messageData.position = \"left\";      \r\n      messageData.renderAddCmp = () => { return renderHtml(`<div className=\"message-text message-text-left\">${messageDataText}</div>`)};\r\n      // targetId = message.from;\r\n    //   messageData.avatar = `${process.env.REACT_APP_SERVER_URI}/avatar/${targetId}.jpg`;\r\n      messageData.avatar = `${RESTAPIUrl}/public/profile/${this.state.targetUser.profile_image}`;\r\n    }\r\n    // let targetIndex = userChatData.findIndex(u => u.id === targetId);\r\n    // messageData.renderAddCamp = this.customeRenderAddCamp;\r\n    messageData.alert = false;\r\n    messageData.date = new Date();\r\n    if (!userChatData.messages) {\r\n      userChatData.messages = [];\r\n    } else {\r\n      if(userChatData.messages[userChatData.messages.length-1].alert === true ) {\r\n        userChatData.messages.pop();\r\n      }  \r\n    }\r\n    // console.log(this.state.userChatData.messages[this.state.userChatData.messages.length - 1]);\r\n    let messages = this.state.userChatData.messages;\r\n    if(typeof messages != 'undefined' && messages.length > 0) {\r\n      if(messages[messages.length-1].position === messageData.position) {\r\n        let prevMessageData = messages[messages.length-1];\r\n        prevMessageData.avatar = '';\r\n        prevMessageData.date = '';\r\n        userChatData.messages.pop();\r\n        userChatData.messages.push(prevMessageData);\r\n      }\r\n    }\r\n    userChatData.messages.push(messageData);\r\n    this.setState({ userChatData });\r\n    // console.log(\"This is state for this component\",this.state);\r\n\r\n\r\n    // Scroll to bottom when receiving the new message\r\n    var element = document.querySelector('[class=\"rce-mlist\"]');\r\n    console.log(\"this is element error\", element,\"type\", typeof element);\r\n    if(element !== null){\r\n      element.scrollTop = element.scrollHeight;\r\n    }\r\n    \r\n  }\r\n  /**\r\n   *\r\n   * @param {User} e\r\n   *\r\n   * called when user clicks to sign-in\r\n   */\r\n  onUserClicked(e) {\r\n    let user = e.user;\r\n    this.socket.emit(\"sign-in\", user);\r\n    let userChatData = this.state.users.filter(u => u.id !== user.id);\r\n    this.setState({ user, signInModalShow: false, userChatData });\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {ChatItem} e\r\n   *\r\n   * handles if user clickes on ChatItem on left.\r\n   */\r\n  onChatClicked(e) {\r\n    let users = this.state.userChatData;\r\n    for (let index = 0; index < users.length; index++) {\r\n      if (users[index].id === e.user.id) {\r\n        users[index].unread = 0;\r\n        this.setState({ selectedUserIndex: index, userChatData: users });\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {messageText} text\r\n   *\r\n   * creates message in a format in which messageList can render.\r\n   * position is purposely omitted and will be appended when message is received.\r\n   */\r\n  createMessage(text) {\r\n    let message = {\r\n      to: this.state.targetUser._id,\r\n      message: {\r\n        type: \"text\",\r\n        text: text,\r\n        date: +new Date(),\r\n        className: \"message\"\r\n      },\r\n      from: this.state.signedInUser._id\r\n    };\r\n    this.socket.emit(\"message\", message);\r\n  }\r\n\r\n  /**\r\n   * Toggles views from 'ChatList' to 'ChatBox'\r\n   *\r\n   * only on Phone\r\n   */\r\n\r\n  changeProfile(userInfo) {\r\n    this.setState({signedInUser: userInfo});\r\n  }\r\n\r\n  onProfileModalShow(status) {\r\n    this.setState({profileModalShow: status});\r\n  }\r\n\r\n  onSearchSettingModalShow(status) {\r\n    this.setState({searchModalShow: status});    \r\n  }\r\n  onReportModalShow(status) {\r\n    this.setState({reportModalShow: status});\r\n  }\r\n  onShowImageFullScreen() {\r\n    this.setState({showImageFullScreen: false});\r\n  }\r\n  \r\n  onTyping() {\r\n    this.socket.emit(\"on-typing\", this.state.targetUser);\r\n  }\r\n\r\n  onTargetUserTyping() {\r\n    this.setState({onTyping: true});\r\n\r\n    let userChatData = this.state.userChatData;\r\n    let messages = userChatData.messages;\r\n    let messageData = {};\r\n    if(typeof messages != 'undefined'){\r\n      if(messages[messages.length-1].alert !== true || messages.length === 0) {\r\n        messageData.position = \"left\";      \r\n        messageData.renderAddCmp = () => { return <OnTyping/>};\r\n        messageData.avatar = `${RESTAPIUrl}/public/profile/${this.state.targetUser.profile_image}`;\r\n        messageData.className = \"message\";\r\n        messageData.alert = true;\r\n        \r\n        if (!userChatData.messages) {\r\n          userChatData.messages = [];\r\n        }\r\n        userChatData.messages.push(messageData);\r\n        this.setState({ userChatData });\r\n        \r\n        this.turnOffNoExistTimeout = setTimeout(() => {\r\n          userChatData = this.state.userChatData;\r\n          if(userChatData.messages[userChatData.messages.length-1].alert === true) {\r\n            userChatData.messages.pop();\r\n            this.setState({ userChatData });\r\n          }          \r\n        }, 2000);\r\n      } else {\r\n        if(messages[messages.length-1].alert == true) {\r\n          this.setState({userChatData: this.state.userChatData});\r\n          \r\n          clearTimeout(this.turnOffNoExistTimeout);\r\n          clearTimeout(this.turnOffExistTimeout);\r\n\r\n          this.turnOffExistTimeout = setTimeout(() => {\r\n            userChatData = this.state.userChatData;\r\n            if(userChatData.messages[userChatData.messages.length-1].alert === true) {\r\n              userChatData.messages.pop();\r\n              this.setState({ userChatData });\r\n            }          \r\n          }, 2000);\r\n        }\r\n             \r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n  onTargetDisconnect() {\r\n    if(this.state.targetUser._id !== 'undefined'){\r\n      this.socket.emit('end', { to: this.state.targetUser._id });\r\n    }    \r\n    this.setState({ callModal: '' });\r\n\r\n    if(this.state.targetUser !== '' || typeof this.state.targetUser.userName !== 'undefined') {\r\n      NotificationManager.error(\r\n        `${this.state.targetUser.userName} disconnected from this chat room.`\r\n      );\r\n    }\r\n    \r\n    this.setState({targetUser: ''});\r\n    this.setState({ userChatData: {}});\r\n    this.socket.emit(\"confirm-target-disconnect\");   \r\n  }\r\n\r\n  updateProfile() {\r\n    const obj = getFromStorage('guest_signin');\r\n    if(obj && obj.token) {\r\n        var decoded_token = jwt_decode(obj.token);\r\n        var signedInUser = decoded_token.user;\r\n    }\r\n    this.setState({signedInUser: signedInUser, imageHash:Date.now()});\r\n  }\r\n\r\n  closeSettingBox() {\r\n    this.setState({\r\n      profileModalShow: false,\r\n      searchModalShow: false,\r\n      reportModalShow:false,\r\n    })\r\n  }\r\n\r\n  logOut() {\r\n    this.socket.emit('log-out', signedInUser);\r\n  }\r\n\r\n  onLogOut() {\r\n    localStorage.clear();\r\n    this.props.history.push(\"/\");\r\n  }\r\n\r\n  onTargetLogout() {\r\n    if(this.state.targetUser._id !== 'undefined'){\r\n      this.socket.emit('end', { to: this.state.targetUser._id });\r\n    }    \r\n    this.setState({ callModal: '' });\r\n    \r\n    NotificationManager.error(\r\n      `${this.state.targetUser.userName} log out.`\r\n    );\r\n\r\n    let blackUsersList = this.state.blackUsersList;\r\n    let targetIndex = blackUsersList.indexOf(this.state.targetUser._id);\r\n      blackUsersList.splice(targetIndex, targetIndex+1 );\r\n  \r\n    this.setState({\r\n      targetUser: '',\r\n      userChatData: {},\r\n      blackUsersList: blackUsersList\r\n    });\r\n    this.socket.emit(\"confirm-target-logout\");\r\n  }\r\n  // @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n  startCall(isCaller, targetUserID, config) {\r\n    console.log(\"call start now \", isCaller, targetUserID, config)\r\n    // this.config = config;\r\n    this.setState({config});\r\n    this.pc = new PeerConnection(targetUserID)\r\n      .on('localStream', (src) => {\r\n        const newState = { callWindow: 'active', localSrc: src };\r\n        if (!isCaller) newState.callModal = '';\r\n        this.setState(newState);\r\n      })\r\n      .on('peerStream', (src) => this.setState({ peerSrc: src }))\r\n      .start(isCaller, config);\r\n  }\r\n\r\n  rejectCall() {\r\n    const { callFrom } = this.state;\r\n    this.socket.emit('end', { to: callFrom });\r\n    this.setState({ callModal: '' });\r\n  }\r\n\r\n  endCall(isStarter) {\r\n    if (_.isFunction(this.pc.stop)) {\r\n      this.pc.stop(isStarter);\r\n    }\r\n    this.pc = {};\r\n    // this.config = null;\r\n    this.setState({\r\n      callWindow: '',\r\n      callModal: '',\r\n      localSrc: null,\r\n      peerSrc: null,\r\n      config: null\r\n    });\r\n  }\r\n  \r\n  \r\n  render() {\r\n    // @@@@@@@@@@@@@@@@@@@@@@@@@@\r\n    const { callModal, callWindow, localSrc, peerSrc } = this.state;\r\n    return (\r\n      <div>\r\n        {/* <button onClick={this.findTargetUser.bind(this)}>Next stranger</button> */}\r\n        \r\n        <ChatBox\r\n          signedInUser={this.state.signedInUser}\r\n          imageHash={this.state.imageHash}\r\n          onSendClicked={this.createMessage.bind(this)}\r\n          targetUser={\r\n            this.state.userChatData\r\n          }\r\n          onProfileModalShow={this.onProfileModalShow.bind(this)}\r\n          onSearchSettingModalShow={this.onSearchSettingModalShow.bind(this)}\r\n          onReportModalShow={this.onReportModalShow.bind(this)}\r\n          findTargetUser={this.findTargetUser.bind(this)}\r\n          onTyping={this.onTyping.bind(this)}\r\n          startCall={this.startCallHandler}\r\n          logOut={this.logOut.bind(this)}\r\n        />\r\n        \r\n        <ErrorModal\r\n          show={this.state.error}\r\n          errorMessage={this.state.errorMessage}\r\n        />\r\n\r\n        <LoadingModal show={this.state.loading} />\r\n        <NotificationContainer />        \r\n        \r\n        <ProfileBox \r\n          profileInfo={this.state.signedInUser}\r\n          iamgeHash={this.state.imageHash}\r\n          onChangeProfile={this.changeProfile.bind(this)}\r\n          onProfileModalShow={this.onProfileModalShow.bind(this)}\r\n          profileContainer={ `profile-container-${this.state.profileModalShow}` }\r\n          updateProfile={this.updateProfile.bind(this)}\r\n        />\r\n        <SearchSettingBox\r\n          searchContainer={ `search-container-${this.state.searchModalShow}` }\r\n          searchSetting={this.state.searchSetting}\r\n          onSearchSettingModalShow={this.onSearchSettingModalShow.bind(this)}\r\n        />\r\n\r\n        <ReportBox\r\n          reportContainer={ `report-container-${this.state.reportModalShow}` }\r\n          onReportModalShow={this.onReportModalShow.bind(this)}\r\n          signedInUser={this.state.signedInUser}\r\n          targetUser={this.state.targetUser}\r\n        />\r\n\r\n        { this.state.reportModalShow || this.state.profileModalShow || this.state.searchModalShow ? (\r\n          <div>            \r\n            <div className=\"setting-back\" onClick={this.closeSettingBox.bind(this)}></div>\r\n          </div>\r\n        ): null } \r\n\r\n        {this.state.showImageFullScreen ? \r\n          <FullScreenImage \r\n            imageUrl={this.state.attachFileUrl}\r\n            onShowImageFullScreen={this.onShowImageFullScreen.bind(this)}\r\n          />\r\n          : null\r\n        }\r\n\r\n        {!_.isEmpty(this.state.config) && (\r\n          <CallWindow\r\n            status={this.state.callWindow}\r\n            localSrc={this.state.localSrc}\r\n            peerSrc={this.state.peerSrc}\r\n            config={this.state.config}\r\n            mediaDevice={this.pc.mediaDevice}\r\n            endCall={this.endCallHandler}\r\n          />\r\n        ) }\r\n        \r\n        {this.state.targetUser ? (\r\n          <CallModal\r\n            status={callModal}\r\n            startCall={this.startCallHandler}\r\n            rejectCall={this.rejectCallHandler}\r\n            callFrom={this.state.targetUser._id}\r\n            contactUser={this.state.targetUser.userName}\r\n            userAvatar={this.state.targetUser.profile_image}\r\n          />\r\n        ): null}\r\n\r\n        {this.state.confirmRemoveOldSession ? (\r\n          <div>\r\n            <div className=\"hide-comp\"></div>\r\n            <div className=\"close-window\">\r\n              <span>You are signed in another location and disconnect old session.</span>\r\n              <div className=\"button-wrapper\">\r\n                <MDBBtn\r\n                  size=\"sm\"\r\n                  color=\"primary\"\r\n                  onClick={this.onConfirmRemoveOldSession.bind(this)}\r\n                >\r\n                  Confirm\r\n                </MDBBtn>\r\n              </div> \r\n            </div>\r\n          </div>\r\n        ):\r\n        null\r\n        } \r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport { MDBRow, MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBModalFooter } from 'mdbreact';\r\nimport 'whatwg-fetch';\r\nimport {\r\n    NotificationContainer,\r\n    NotificationManager\r\n  } from \"react-notifications\";\r\n  import \"react-notifications/lib/notifications.css\";\r\n\r\nimport { RESTAPIUrl } from '../../config/config';\r\nimport './AdminSign.css';\r\n\r\nclass AdminSign extends React.Component {\r\n  constructor(props) {\r\n    super(props);    \r\n\r\n    this.state = {\r\n        email: '' ,\r\n        password: '',\r\n        adminSignLoading: false\r\n    }\r\n  }\r\n\r\n  handleChangeEmail(e) {\r\n    console.log(\"email change\", this.state.email)\r\n    this.setState({ email: e.target.value });\r\n  }\r\n\r\n  handleChangePassword(e) {\r\n      this.setState({ password: e.target.value });\r\n  }\r\n\r\n  \r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    const { email, password } = this.state;\r\n    \r\n    this.setState ({ \r\n      adminSignLoading: true, \r\n    });\r\n\r\n    fetch(RESTAPIUrl + '/api/admin/signin', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        email,\r\n        password\r\n      }),\r\n    }).then(res =>res.json())\r\n      .then(json => {\r\n        console.log('this is json object', json);\r\n        if(json.success) {\r\n          this.props.history.push(\"/admin/manage\");\r\n        } else {\r\n            NotificationManager.error(\r\n                `${json.message}`\r\n            );\r\n        }\r\n      })\r\n  }\r\n  render() {\r\n    return (\r\n        <MDBRow>\r\n            <NotificationContainer />  \r\n          <MDBCol sm=\"10\" md=\"7\" lg=\"6\" xl=\"4\" className=\"mx-auto mt-3 sign-container\">\r\n            <form onSubmit={this.handleSubmit.bind(this)}>\r\n              <MDBCard>\r\n              <div className=\"text-center sign-title\">\r\n                <h5 className=\"dark-grey-text mb-5\"><strong> Adminiatrator Sign in</strong></h5>\r\n              </div>\r\n              <MDBCardBody className=\"mx-4\">\r\n                \r\n                <MDBInput label=\"Your Email\" group type=\"email\" onChange={this.handleChangeEmail.bind(this)} validate error=\"wrong\" success=\"right\" required/>\r\n\r\n                <MDBInput group type=\"password\" onChange={this.handleChangePassword.bind(this)} validate error=\"wrong\" success=\"right\" required/>\r\n\r\n                <div className=\"text-center pt-3 mb-3\">\r\n                  <MDBBtn \r\n                    type=\"submit\" \r\n                    className=\"btn-block z-depth-1a\"\r\n                    outline color=\"info\"\r\n                    >\r\n                      {this.state.logInLoading ? 'Authenticating...' : 'SignIn'}\r\n                  </MDBBtn>\r\n                </div>\r\n\r\n              </MDBCardBody>\r\n              <MDBModalFooter className=\"mx-5 pt-3 mb-1\">\r\n                \r\n              </MDBModalFooter>\r\n            </MDBCard>\r\n            </form>\r\n          </MDBCol>\r\n        </MDBRow>\r\n    );  \r\n  }\r\n}\r\n\r\nexport default AdminSign;","import React from 'react';\r\nimport { MDBCol, MDBInput, MDBBtn, MDBCard, MDBCardBody, MDBModalFooter  } from 'mdbreact';\r\nimport 'whatwg-fetch';\r\nimport {\r\n    NotificationContainer,\r\n    NotificationManager\r\n  } from \"react-notifications\";\r\n  import \"react-notifications/lib/notifications.css\";\r\n\r\nimport { RESTAPIUrl } from '../../config/config';\r\nimport './AdminManage.css';\r\n\r\nclass AdminManage extends React.Component {\r\n  constructor(props) {\r\n    super(props);    \r\n\r\n    this.state = {\r\n        userListShow: true,\r\n        userProfileShow: false,\r\n        adminProfileShow: false,\r\n        toggleWrapper: true,\r\n    }\r\n\r\n    this.updateUserProfile = this.updateUserProfile.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n      this.getUserList();\r\n      this.getAdminInfo();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const $button  = document.querySelector('#sidebar-toggle');\r\n    const $wrapper = document.querySelector('#wrapper');\r\n    \r\n    $button.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      $wrapper.classList.toggle('toggled');\r\n    });\r\n  }\r\n  \r\n  getUserList() {\r\n\r\n    fetch(RESTAPIUrl + '/api/admin/manage', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        \r\n      }),\r\n    }).then(res =>res.json())\r\n      .then(json => {\r\n        if(json.success) {\r\n          this.setState({users: json.users});\r\n        } else {\r\n            NotificationManager.error(\r\n                `${json.message}`\r\n            );\r\n        }\r\n      })\r\n  }\r\n\r\n  getAdminInfo() {\r\n      fetch(RESTAPIUrl + '/api/admin/get-info', {\r\n          method: 'POST',\r\n          headers: {\r\n              'Content-Type' : 'application/json'\r\n          },\r\n          bpdy: JSON.stringify({\r\n\r\n          }),          \r\n      }).then(res => res.json())\r\n      .then(json => {\r\n          if(json.success) {\r\n            this.setState({\r\n                email: json.admin.email\r\n            })\r\n          } else {\r\n\r\n          }\r\n      })\r\n  }\r\n\r\n  updateUserProfile(user) {\r\n    this.setState({\r\n        userListShow: false,\r\n        userProfileShow: true,\r\n        selectedUser: user\r\n    });\r\n  }\r\n\r\n  userListShow() {\r\n      this.setState({\r\n        userListShow: true,\r\n        userProfileShow: false,\r\n        adminProfileShow: false,\r\n      });\r\n  }\r\n\r\n  adminProfileShow() {\r\n    this.setState({\r\n        userListShow: false,\r\n        userProfileShow: false,\r\n        adminProfileShow: true,\r\n      });\r\n  }\r\n\r\n  handleChangeEmail(e) {\r\n    this.setState({email: e.target.value});\r\n  }\r\n\r\n  handleChangePassword(e) {\r\n    this.setState({password: e.target.value});\r\n  }\r\n\r\n  handleChangeConfirmPassword(e) {\r\n    this.setState({confirmPassword: e.target.value});\r\n  }\r\n\r\n  enableUser() {\r\n    console.log(\"sdfsdf\", this.state.users);\r\n    fetch(RESTAPIUrl + '/api/admin/enable-user', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            user: this.state.selectedUser\r\n        }),\r\n      }).then(res =>res.json())\r\n        .then(json => {\r\n          if(json.success) {\r\n            NotificationManager.success(`${json.message}`);\r\n            let selectedUser = json.user;\r\n            this.setState({selectedUser});\r\n\r\n            this.state.users.map((user, i) => {\r\n                if(user._id === selectedUser._id) {\r\n                    let users = this.state.users;\r\n                    users[i] = selectedUser;\r\n                    this.setState({users});\r\n                    return true;\r\n                }\r\n                return false;\r\n            })\r\n\r\n          } else {\r\n              NotificationManager.error(\r\n                  `${json.message}`\r\n              );\r\n          }\r\n        })\r\n  }\r\n\r\n  handleSubmit() {\r\n    let { email, password, confirmPassword } = this.state;\r\n    fetch(RESTAPIUrl + '/api/admin/update-profile', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            email,\r\n            password,\r\n            confirmPassword\r\n        }),\r\n      }).then(res =>res.json())\r\n        .then(json => {\r\n          if(json.success) {\r\n            NotificationManager.success(`${json.message}`);\r\n          } else {\r\n              NotificationManager.error(\r\n                  `${json.message}`\r\n              );\r\n          }\r\n        })\r\n  }\r\n\r\n  toggleWrapper () {\r\n      this.setState({toggleWrapper: !this.state.toggleWrapper})\r\n  }\r\n  render() {\r\n    return (\r\n        <div>\r\n            <NotificationContainer /> \r\n\r\n            <aside id=\"sidebar-wrapper\" className={!this.state.toggleWrapper ? 'expand-sidebar' : 'shrink-sidebar'}>\r\n                <div className=\"sidebar-brand\">\r\n                </div>\r\n                <ul className=\"sidebar-nav\">\r\n                <li>\r\n                    <a href=\"!#\"  onClick={this.userListShow.bind(this)}>\r\n                        <i className=\"fa fa-tasks\"></i>User Manage\r\n                    </a>\r\n                </li>\r\n                <li>\r\n                    <a href=\"!#\" onClick={this.adminProfileShow.bind(this)}>\r\n                        <i className=\"fa fa-user\"></i>Profile\r\n                    </a>\r\n                </li>\r\n                </ul>\r\n            </aside>\r\n\r\n            <div id=\"wrapper\" className={this.state.toggleWrapper ? 'expand-wrapper' : 'shrink-wrapper'}>              \r\n\r\n                <div id=\"navbar-wrapper\">\r\n                    <nav className=\"navbar navbar-inverse\">\r\n                    <div className=\"container-fluid\">\r\n                        <div className=\"navbar-header\">\r\n                        <a href=\"!#\" className=\"navbar-brand\" id=\"sidebar-toggle\">\r\n                            <i \r\n                                className=\"fa fa-bars\"\r\n                                onClick={this.toggleWrapper.bind(this)}    \r\n                            >\r\n                                \r\n                            </i>\r\n                        </a>\r\n                        </div>\r\n                    </div>\r\n                    </nav>\r\n                </div>\r\n\r\n                {this.state.userListShow? \r\n                    <section className=\"content-wrapper user-manage\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-xs-12 col-sm-12 col-md-12 col-lg-10 offset-lg-1\">\r\n                            {\r\n                                this.state.users ? (\r\n                                    <div className=\"table-responsive\">\r\n                                        <table summary=\"This table shows how to create responsive tables using Bootstrap's default functionality\" className=\"table table-bordered table-hover\">\r\n                                        <thead>\r\n                                            <tr>\r\n                                                <th>Num</th>\r\n                                                <th>Avatar</th>\r\n                                                <th>User Name</th>\r\n                                                <th>Age</th>\r\n                                                <th>Location</th>\r\n                                                <th>Gender</th>\r\n                                                <th>Ip Address</th>\r\n                                                <th>Reported Number</th>\r\n                                                <th>Allowed</th>\r\n                                                <th>Action</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                        {                                    \r\n                                            this.state.users.map((user, i) => {\r\n                                                return (\r\n                                                    <tr>\r\n                                                        <td>{i+1}</td>\r\n                                                        <td><img src={`${RESTAPIUrl}/public/profile/${user.profile_image}`} alt=\"profile-img\"></img>   </td>\r\n                                                        <td>{user.userName}</td>\r\n                                                        <td>{user.age}</td>\r\n                                                        <td>{user.location}</td>\r\n                                                        <td>{user.gender}</td>\r\n                                                        <td>{user.ip_address}</td>\r\n                                                        <td>{user.report_number}</td>\r\n                                                        <td>{user.isDeleted? 'Disabled' : 'Enabled'}</td>\r\n                                                        <td>\r\n                                                            <MDBBtn \r\n                                                                type=\"button\" \r\n                                                                className=\"btn-block z-depth-1a\"\r\n                                                                size=\"sm\"\r\n                                                                color=\"primary\"\r\n                                                                onClick={()=>this.updateUserProfile(user)}\r\n                                                                >\r\n                                                                Update\r\n                                                            </MDBBtn>\r\n                                                        </td>\r\n                                                    </tr>\r\n                                                )\r\n                                            })                                    \r\n                                        }\r\n                                        </tbody>\r\n                                        </table>\r\n                                        \r\n                                    </div>\r\n                                ) : \r\n                                (\r\n                                    <div className=\"loading-container\">\r\n                                        <div className=\"loading\"></div>\r\n                                        <div id=\"loading-text\">loading</div>\r\n                                    </div>\r\n                                )\r\n                            }\r\n                            \r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                    </section>\r\n                : null\r\n                }\r\n                \r\n                {this.state.adminProfileShow? \r\n                    <section className=\"content-wrapper \">\r\n                        <MDBCol sm=\"10\" md=\"7\" lg=\"6\" xl=\"4\" className=\"mx-auto mt-3 admin-profile\">\r\n                            <form onSubmit={this.handleSubmit.bind(this)}>\r\n                            <MDBCard>\r\n                            <div className=\"text-center sign-title\">\r\n                                <h5 className=\"dark-grey-text mb-5\"><strong> Update Profile</strong></h5>\r\n                            </div>\r\n                            <MDBCardBody className=\"mx-4\">\r\n                                \r\n                                <MDBInput label=\"Your Email\" group type=\"email\" value= {this.state.email? this.state.email: ''} onChange={this.handleChangeEmail.bind(this)} validate error=\"wrong\" success=\"right\" required/>\r\n\r\n                                <MDBInput group type=\"password\" label=\"Password\" onChange={this.handleChangePassword.bind(this)} validate error=\"wrong\" success=\"right\" required/>\r\n\r\n                                <MDBInput group type=\"password\" label=\"Confirm Password\" onChange={this.handleChangeConfirmPassword.bind(this)} validate error=\"wrong\" success=\"right\" required/>\r\n\r\n                                <div className=\"text-center pt-3 mb-3\">\r\n                                <MDBBtn \r\n                                    type=\"submit\" \r\n                                    className=\"btn-block z-depth-1a\"\r\n                                    outline color=\"info\"\r\n                                    >\r\n                                    Update\r\n                                </MDBBtn>\r\n                                </div>\r\n\r\n                            </MDBCardBody>\r\n                            <MDBModalFooter className=\"mx-5 pt-3 mb-1\">\r\n                                \r\n                            </MDBModalFooter>\r\n                            </MDBCard>\r\n                            </form>\r\n                        </MDBCol>\r\n                    </section>\r\n                : null \r\n                }\r\n\r\n                {this.state.userProfileShow? \r\n                    <section className=\"content-wrapper \">\r\n                        <MDBCol sm=\"10\" md=\"10\" lg=\"8\" xl=\"6\" className=\"mx-auto mt-3 user-profile\">\r\n                            <form onSubmit={this.handleSubmit.bind(this)}>\r\n                            <MDBCard>\r\n                                <div className=\"avatar-container\">\r\n                                    <img src={`${RESTAPIUrl}/public/profile/${this.state.selectedUser.profile_image}`} alt=\"user-img\"></img>\r\n                                    <h2>{this.state.selectedUser.userName}</h2>\r\n                                </div> \r\n\r\n                                <div className=\"contact-information\">\r\n                                    <div className=\"contact-title\">\r\n                                        <span>PERSONAL & CONTACT INFORMATION</span>\r\n                                    </div>\r\n                                    <div className=\"contact-body\">\r\n                                        <div className=\"contact-sub-body\">\r\n                                            <div className=\"contact-sub-left\">\r\n                                                <i className=\"fa fa-transgender\" aria-hidden=\"true\"></i>\r\n                                                Gender\r\n                                            </div>\r\n                                            <div className=\"contact-sub-right\">\r\n                                                <span>{this.state.selectedUser.gender}</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"contact-sub-body\">\r\n                                            <div className=\"contact-sub-left\">\r\n                                                <i className=\"fa fa-user\"></i>\r\n                                                User Name\r\n                                            </div>\r\n                                            <div className=\"contact-sub-right\">\r\n                                                <span>{this.state.selectedUser.userName}</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"contact-sub-body\">\r\n                                            <div className=\"contact-sub-left\">\r\n                                                <i className=\"fa fa-birthday-cake\" aria-hidden=\"true\"></i>\r\n                                                Age\r\n                                            </div>\r\n                                            <div className=\"contact-sub-right\">\r\n                                                <span>{this.state.selectedUser.age}</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"contact-sub-body\">\r\n                                            <div className=\"contact-sub-left\">\r\n                                                <i className=\"fas fa-map-marker-alt\"></i>\r\n                                                Location\r\n                                            </div>\r\n                                            <div className=\"contact-sub-right\">\r\n                                                <span>{this.state.selectedUser.location}</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"contact-sub-body\">\r\n                                            <div className=\"contact-sub-left\">\r\n                                                <i className=\"fa fa-server\" aria-hidden=\"true\"></i>\r\n                                                Ip Address\r\n                                            </div>\r\n                                            <div className=\"contact-sub-right\">\r\n                                                <span>{this.state.selectedUser.ip_address}</span>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"contact-sub-body\">\r\n                                            <div className=\"contact-sub-left\">\r\n                                                <i className=\"fa fa-ban\" aria-hidden=\"true\"></i>\r\n                                                Allowed\r\n                                            </div>\r\n                                            <div className=\"contact-sub-right\">\r\n                                                <div className=\"button-switch\">\r\n                                                    <input \r\n                                                        type=\"checkbox\" \r\n                                                        id=\"switch-blue\" \r\n                                                        className=\"switch\"\r\n                                                        onChange={this.enableUser.bind(this)}\r\n                                                        checked={!this.state.selectedUser.isDeleted} \r\n                                                    />\r\n                                                    <label for=\"switch-blue\" className=\"lbl-off\">No</label>\r\n                                                    <label for=\"switch-blue\" className=\"lbl-on\">Yes</label>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"contact-sub-body\">\r\n                                            <div className=\"contact-sub-left\">\r\n                                                <i className=\"fa fa-file\" aria-hidden=\"true\"></i>\r\n                                                Report Number\r\n                                            </div>\r\n                                            <div className=\"contact-sub-right\">\r\n                                                <span>{this.state.selectedUser.report_number}</span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"report-title\">\r\n                                        <span>REPORT LIST</span>\r\n                                    </div>\r\n                                    <div className=\"report-body\">\r\n                                        {this.state.selectedUser.report_reason.map((object, i) => {\r\n                                            return(\r\n                                                <div className=\"report-sub-body\">                                            \r\n                                                        \r\n                                                    {this.state.users.map((user) => {\r\n                                                        if(user._id === object.reporter_id) {\r\n                                                            return (\r\n                                                                <div className=\"report-sub-left\">\r\n                                                                    <img src={`${RESTAPIUrl}/public/profile/${user.profile_image}`} alt=\"reporter_img\"></img><span>{user.userName}</span>\r\n                                                                </div>\r\n                                                            );\r\n                                                        }\r\n                                                        return null;\r\n                                                    })}\r\n                                                    \r\n                                                    <div className=\"contact-sub-right\">\r\n                                                        <span>{object.reason}</span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            )\r\n                                        })}\r\n                                        \r\n                                        \r\n                                    </div>\r\n                                </div>\r\n\r\n                            </MDBCard>\r\n                            </form>\r\n                        </MDBCol>\r\n                    </section>\r\n                : null \r\n                }\r\n\r\n            </div>\r\n        </div>\r\n    );  \r\n  }\r\n}\r\n\r\nexport default AdminManage;","import React from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\nimport { getFromStorage } from '../utils/storage';\r\n\r\n// FREE\r\nimport HomePage from '../pages/HomePage/HomePage';\r\nimport UserSign from '../pages/UserSign/UserSign';\r\nimport GuestSign from '../pages/GuestSign/GuestSign';\r\nimport Chat from '../pages/Chat/Chat';\r\n\r\nimport AdminSign from '../pages/AdminSign/AdminSign';\r\nimport AdminManage from '../pages/AdminManage/AdminManage';\r\n\r\nconst fakeAuth = () => {\r\n  const obj = getFromStorage('guest_signin');\r\n  \r\n  if(obj && obj.token) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n  <Route {...rest} render={(props) => (\r\n    fakeAuth()      \r\n      ? <Redirect to='/chat' /> \r\n      : <Component {...props} />\r\n  )} />\r\n)\r\n\r\nconst PrivateChatRoute = ({ component: Component, ...rest }) => (\r\n  <Route {...rest} render={(props) => (\r\n    fakeAuth()  \r\n      ? <Component {...props} />\r\n      : <Redirect to='/' /> \r\n  )} />\r\n)\r\n\r\nclass Routes extends React.Component {\r\n  \r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <PrivateRoute exact path=\"/\" component={HomePage} />\r\n        <PrivateRoute path=\"/usersign\" component={ UserSign } />\r\n        <PrivateRoute path=\"/guest\" component={ GuestSign } />\r\n        <PrivateChatRoute path=\"/chat\" component={ Chat } />\r\n        <Route exact path=\"/admin\" component={ AdminSign } />\r\n        <Route path=\"/admin/manage\" component= { AdminManage } />\r\n      </Switch>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Routes;\r\n","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport Routes from './Routes';\r\n\r\nclass App extends Component {\r\n  \r\n  render() {\r\n    return (\r\n      <Router>\r\n        <Routes />\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\r\nimport \"bootstrap-css-only/css/bootstrap.min.css\";\r\nimport \"mdbreact/dist/css/mdb.css\";\r\nimport \"./index.css\";\r\nimport App from \"./App/App\";\r\n\r\nimport registerServiceWorker from './registerServiceWorker';\r\n\r\nReactDOM.render( <App /> , document.getElementById('root'));\r\n\r\nregisterServiceWorker();"],"sourceRoot":""}